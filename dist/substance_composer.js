!function e(t,a,n){function i(r,s){if(!a[r]){if(!t[r]){var b="function"==typeof require&&require;if(!s&&b)return b(r,!0);if(c)return c(r,!0);var o=new Error("Cannot find module '"+r+"'");throw o.code="MODULE_NOT_FOUND",o}var d=a[r]={exports:{}};t[r][0].call(d.exports,function(e){var a=t[r][1][e];return i(a?a:e)},d,d.exports,e,t,a,n)}return a[r].exports}for(var c="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({1:[function(e){window.devMode=!0,window.app=e("./src/app")},{"./src/app":193}],2:[function(e,t){var a={id:"9cc2e4def8b39bc234bf5e186bafa743",schema:["substance-interview","0.1.0"],nodes:{document:{id:"document",type:"document",containers:["content"],guid:"9cc2e4def8b39bc234bf5e186bafa743",creator:"",title:"Test document","abstract":"Russian abstract",abstract_en:"Enter english abstract here",created_at:"2015-03-04T10:56:18.229Z",updated_at:"2015-03-04T10:56:47.425Z",published_on:"2015-03-04",project_name:"Internationales Sklaven-und Zwangsarbeiter Befragungsprojekt",project_location:"54ef1331afda2d3c024e4817",conductor:"Irina Ostrovskaya",operator:"Eduard Kechedjiyan",sound_operator:"Eduard Kechedjiyan",record_type:"video",interview_location:"respondent's apartment",interview_date:"2005-07-16",persons_present:"Nikolay Bogoslavec, Irina Ostrovskaya, Eduard Kechedjiyan, Alexey Bogoslavec",interview_duration:"247",interviewee_bio:"Please enter interview subject bio.",interviewee_category:"Ost-Arbeiter, concentration camp prisoner",interviewee_prisons:["54ef1331afda2d3c024e4817","54ef1331afda2d3c024e4818"],interviewee_forced_labor_type:"intracamp work, earthworks (construction of barracks), digging tunnels for military factories",interviewee_waypoints:["waypoint_1","waypoint_2"]},waypoint_1:{id:"waypoint_1",type:"waypoint",entityId:"54ef1331afda2d3c024e4817",density:4},waypoint_2:{id:"waypoint_2",type:"waypoint",entityId:"54ef1331afda2d3c024e4817",density:2},content:{type:"container",id:"content",nodes:["text_1","text_2","text_3","text_4","text_5"]},text_1:{type:"text",id:"text_1",content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus quis scelerisque ligula. Proin tristique ligula id magna finibus rhoncus. Quisque dictum viverra sapien, vel elementum metus condimentum nec. Donec ac tellus nunc. Nullam fermentum pharetra justo, accumsan tristique quam tempus a. Quisque vitae luctus velit. Praesent lacinia enim ex, sed pulvinar neque dictum ultricies. Sed est metus, bibendum sed suscipit ut, cursus ut mi. Pellentesque sagittis mi nisi, eu blandit metus congue id. Pellentesque eget magna porta, rutrum odio et, commodo lacus. Sed vitae vehicula ante. Quisque suscipit iaculis est, vitae aliquet lacus dictum ut. Nulla enim dolor, pulvinar at odio vitae, sollicitudin eleifend ex. Maecenas eget ligula eget sem efficitur consectetur nec vel sem. In massa mauris, consequat vitae enim eget, vehicula aliquet turpis."},text_2:{type:"text",id:"text_2",content:"Proin in luctus sapien, ultrices commodo augue. Phasellus ultrices commodo augue, in blandit nibh euismod nibh vitae erat luctus ac. Aliquam euismod nibh vitae erat pulvinar, at semper libero tincidunt. Nulla finibus est ac consequat consequat. Sed at condimentum purus. Aliquam vulputate ipsum ut justo posuere, quis varius risus finibus. Ut scelerisque laoreet vehicula. Nullam gravida fringilla justo, nec efficitur nunc sagittis et. Suspendisse nibh ligula, imperdiet id interdum et, sollicitudin non mauris. Suspendisse potenti. Suspendisse luctus iaculis nulla sed efficitur. Nullam sed viverra metus. Etiam dictum blandit enim tincidunt maximus. Nullam tempus nibh at varius interdum."},entity_reference_1:{id:"entity_reference_1",type:"entity_reference",path:["text_2","content"],target:"54ef1331afda2d3c024e4817",startOffset:24,endOffset:47},subject_reference_1:{id:"subject_reference_1",type:"subject_reference",container:"content",startPath:["text_1","content"],startOffset:100,endPath:["text_2","content"],endOffset:200,target:["54bae99ca868bc3ec7fb5ad8"]},subject_reference_2:{id:"subject_reference_2",type:"subject_reference",container:"content",startPath:["text_2","content"],startOffset:10,endPath:["text_4","content"],endOffset:40,target:["54bae4cda868bc6fab4bcd0e","54bae99ca868bc3ec7fb5ad8"]},remark_1:{id:"remark_1",type:"remark",container:"content",startPath:["text_1","content"],startOffset:20,endPath:["text_2","content"],endOffset:298,content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus quis scelerisque ligula. Proin tristique ligula id magna finibus rhoncus. Quisque dictum viverra sapien, vel elementum metus condimentum nec. Donec ac tellus nunc. Nullam fermentum pharetra justo, accumsan tristique quam tempus a. Quisque vitae luctus velit."},remark_2:{id:"remark_2",type:"remark",container:"content",startPath:["text_2","content"],startOffset:300,endPath:["text_2","content"],endOffset:520,content:"Pellentesque eget magna porta, rutrum odio et, commodo lacus. Sed vitae vehicula ante. Quisque suscipit iaculis est, vitae aliquet lacus dictum ut."},text_3:{type:"text",id:"text_3",content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus quis scelerisque ligula. Proin tristique ligula id magna finibus rhoncus. Quisque dictum viverra sapien, vel elementum metus condimentum nec. Donec ac tellus nunc. Nullam fermentum pharetra justo, accumsan tristique quam tempus a. Quisque vitae luctus velit. Praesent lacinia enim ex, sed pulvinar neque dictum ultricies. Sed est metus, bibendum sed suscipit ut, cursus ut mi. Pellentesque sagittis mi nisi, eu blandit metus congue id. Pellentesque eget magna porta, rutrum odio et, commodo lacus. Sed vitae vehicula ante. Quisque suscipit iaculis est, vitae aliquet lacus dictum ut. Nulla enim dolor, pulvinar at odio vitae, sollicitudin eleifend ex. Maecenas eget ligula eget sem efficitur consectetur nec vel sem. In massa mauris, consequat vitae enim eget, vehicula aliquet turpis."},text_4:{type:"text",id:"text_4",content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus quis scelerisque ligula. Proin tristique ligula id magna finibus rhoncus. Quisque dictum viverra sapien, vel elementum metus condimentum nec. Donec ac tellus nunc. Nullam fermentum pharetra justo, accumsan tristique quam tempus a. Quisque vitae luctus velit. Praesent lacinia enim ex, sed pulvinar neque dictum ultricies. Sed est metus, bibendum sed suscipit ut, cursus ut mi. Pellentesque sagittis mi nisi, eu blandit metus congue id. Pellentesque eget magna porta, rutrum odio et, commodo lacus. Sed vitae vehicula ante. Quisque suscipit iaculis est, vitae aliquet lacus dictum ut. Nulla enim dolor, pulvinar at odio vitae, sollicitudin eleifend ex. Maecenas eget ligula eget sem efficitur consectetur nec vel sem. In massa mauris, consequat vitae enim eget, vehicula aliquet turpis."},text_5:{type:"text",id:"text_5",content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus quis scelerisque ligula. Proin tristique ligula id magna finibus rhoncus. Quisque dictum viverra sapien, vel elementum metus condimentum nec. Donec ac tellus nunc. Nullam fermentum pharetra justo, accumsan tristique quam tempus a. Quisque vitae luctus velit. Praesent lacinia enim ex, sed pulvinar neque dictum ultricies. Sed est metus, bibendum sed suscipit ut, cursus ut mi. Pellentesque sagittis mi nisi, eu blandit metus congue id. Pellentesque eget magna porta, rutrum odio et, commodo lacus. Sed vitae vehicula ante. Quisque suscipit iaculis est, vitae aliquet lacus dictum ut. Nulla enim dolor, pulvinar at odio vitae, sollicitudin eleifend ex. Maecenas eget ligula eget sem efficitur consectetur nec vel sem. In massa mauris, consequat vitae enim eget, vehicula aliquet turpis."}}};t.exports=a},{}],3:[function(e,t){function a(e){for(var t=-1,a=e?e.length:0,n=-1,i=[];++t<a;){var c=e[t];c&&(i[++n]=c)}return i}t.exports=a},{}],4:[function(e,t){function a(e){return e?e[0]:void 0}t.exports=a},{}],5:[function(e,t){function a(){for(var e=[],t=-1,a=arguments.length,b=[],o=n,d=!0;++t<a;){var f=arguments[t];(s(f)||r(f))&&(e.push(f),b.push(d&&f.length>=120?c(t&&f):null))}a=e.length;var p=e[0],l=-1,u=p?p.length:0,h=[],_=b[0];e:for(;++l<u;)if(f=p[l],(_?i(_,f):o(h,f))<0){for(t=a;--t;){var m=b[t];if((m?i(m,f):o(e[t],f))<0)continue e}_&&_.push(f),h.push(f)}return h}var n=e("../internal/baseIndexOf"),i=e("../internal/cacheIndexOf"),c=e("../internal/createCache"),r=e("../lang/isArguments"),s=e("../lang/isArray");t.exports=a},{"../internal/baseIndexOf":37,"../internal/cacheIndexOf":53,"../internal/createCache":60,"../lang/isArguments":88,"../lang/isArray":89}],6:[function(e,t){function a(e){var t=e?e.length:0;return t?e[t-1]:void 0}t.exports=a},{}],7:[function(e,t){function a(){return i(n(arguments,!1,!0))}var n=e("../internal/baseFlatten"),i=e("../internal/baseUniq");t.exports=a},{"../internal/baseFlatten":34,"../internal/baseUniq":49}],8:[function(e,t){function a(e,t,a,s){var b=e?e.length:0;return b?(null!=t&&"boolean"!=typeof t&&(s=a,a=c(e,t,s)?null:t,t=!1),a=null==a?a:n(a,s,3),t?r(e,a):i(e,a)):[]}var n=e("../internal/baseCallback"),i=e("../internal/baseUniq"),c=e("../internal/isIterateeCall"),r=e("../internal/sortedUniq");t.exports=a},{"../internal/baseCallback":26,"../internal/baseUniq":49,"../internal/isIterateeCall":75,"../internal/sortedUniq":85}],9:[function(e,t){function a(e){return n(e,i(arguments,1))}var n=e("../internal/baseDifference"),i=e("../internal/baseSlice");t.exports=a},{"../internal/baseDifference":31,"../internal/baseSlice":47}],10:[function(e,t){function a(e,t,a){var s=r(e)?n:c;return t=i(t,a,3),s(e,t)}var n=e("../internal/arrayFilter"),i=e("../internal/baseCallback"),c=e("../internal/baseFilter"),r=e("../lang/isArray");t.exports=a},{"../internal/arrayFilter":23,"../internal/baseCallback":26,"../internal/baseFilter":33,"../lang/isArray":89}],11:[function(e,t){function a(e,t,a){return"function"==typeof t&&"undefined"==typeof a&&r(e)?n(e,t):i(e,c(t,a,3))}var n=e("../internal/arrayEach"),i=e("../internal/baseEach"),c=e("../internal/bindCallback"),r=e("../lang/isArray");t.exports=a},{"../internal/arrayEach":22,"../internal/baseEach":32,"../internal/bindCallback":51,"../lang/isArray":89}],12:[function(e,t){function a(e,t,a){var o=e?e.length:0;return c(o)||(e=s(e),o=e.length),o?(a="number"==typeof a?0>a?b(o+a,0):a||0:0,"string"==typeof e||!i(e)&&r(e)?o>a&&e.indexOf(t,a)>-1:n(e,t,a)>-1):!1}var n=e("../internal/baseIndexOf"),i=e("../lang/isArray"),c=e("../internal/isLength"),r=e("../lang/isString"),s=e("../object/values"),b=Math.max;t.exports=a},{"../internal/baseIndexOf":37,"../internal/isLength":76,"../lang/isArray":89,"../lang/isString":96,"../object/values":102}],13:[function(e,t){var a=e("../internal/createAggregator"),n=a(function(e,t,a){e[a]=t});t.exports=n},{"../internal/createAggregator":57}],14:[function(e,t){function a(e,t,a){var s=r(e)?n:c;return t=i(t,a,3),s(e,t)}var n=e("../internal/arrayMap"),i=e("../internal/baseCallback"),c=e("../internal/baseMap"),r=e("../lang/isArray");t.exports=a},{"../internal/arrayMap":24,"../internal/baseCallback":26,"../internal/baseMap":42,"../lang/isArray":89}],15:[function(e,t){function a(e,t){return i(e,n(t))}var n=e("../internal/baseProperty"),i=e("./map");t.exports=a},{"../internal/baseProperty":45,"./map":14}],16:[function(e,t){var a=e("../lang/isNative"),n=a(n=Date.now)&&n,i=n||function(){return(new Date).getTime()};t.exports=i},{"../lang/isNative":93}],17:[function(e,t){function a(e,t){var b=r;if(arguments.length>2){var o=n(arguments,2),d=c(o,a.placeholder);b|=s}return i(e,b,t,o,d)}var n=e("../internal/baseSlice"),i=e("../internal/createWrapper"),c=e("../internal/replaceHolders"),r=1,s=32;a.placeholder={},t.exports=a},{"../internal/baseSlice":47,"../internal/createWrapper":64,"../internal/replaceHolders":82}],18:[function(e,t){function a(e,t,a){function s(){_&&clearTimeout(_),p&&clearTimeout(p),p=_=m=void 0}function b(){var a=t-(i()-u);if(0>=a||a>t){p&&clearTimeout(p);var n=m;p=_=m=void 0,n&&(v=i(),l=e.apply(h,f),_||p||(f=h=null))}else _=setTimeout(b,a)}function o(){_&&clearTimeout(_),p=_=m=void 0,(y||g!==t)&&(v=i(),l=e.apply(h,f),_||p||(f=h=null))}function d(){if(f=arguments,u=i(),h=this,m=y&&(_||!x),g===!1)var a=x&&!_;else{p||x||(v=u);var n=g-(u-v),c=0>=n||n>g;c?(p&&(p=clearTimeout(p)),v=u,l=e.apply(h,f)):p||(p=setTimeout(o,n))}return c&&_?_=clearTimeout(_):_||t===g||(_=setTimeout(b,t)),a&&(c=!0,l=e.apply(h,f)),!c||_||p||(f=h=null),l}var f,p,l,u,h,_,m,v=0,g=!1,y=!0;if("function"!=typeof e)throw new TypeError(c);if(t=0>t?0:+t||0,a===!0){var x=!0;y=!1}else n(a)&&(x=a.leading,g="maxWait"in a&&r(+a.maxWait||0,t),y="trailing"in a?a.trailing:y);return d.cancel=s,d}var n=e("../lang/isObject"),i=e("../date/now"),c="Expected a function",r=Math.max;t.exports=a},{"../date/now":16,"../lang/isObject":95}],19:[function(e,t){function a(e,t){return n(e,t,arguments,2)}var n=e("../internal/baseDelay");t.exports=a},{"../internal/baseDelay":30}],20:[function(e,t){(function(a){function n(e){var t=e?e.length:0;for(this.data={hash:s(null),set:new r};t--;)this.push(e[t])}var i=e("./cachePush"),c=e("../lang/isNative"),r=c(r=a.Set)&&r,s=c(s=Object.create)&&s;n.prototype.push=i,t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lang/isNative":93,"./cachePush":54}],21:[function(e,t){function a(e,t){var a=-1,n=e.length;for(t||(t=Array(n));++a<n;)t[a]=e[a];return t}t.exports=a},{}],22:[function(e,t){function a(e,t){for(var a=-1,n=e.length;++a<n&&t(e[a],a,e)!==!1;);return e}t.exports=a},{}],23:[function(e,t){function a(e,t){for(var a=-1,n=e.length,i=-1,c=[];++a<n;){var r=e[a];t(r,a,e)&&(c[++i]=r)}return c}t.exports=a},{}],24:[function(e,t){function a(e,t){for(var a=-1,n=e.length,i=Array(n);++a<n;)i[a]=t(e[a],a,e);return i}t.exports=a},{}],25:[function(e,t){function a(e,t,a){var c=i(t);if(!a)return n(t,e,c);for(var r=-1,s=c.length;++r<s;){var b=c[r],o=e[b],d=a(o,t[b],b,e,t);(d===d?d===o:o!==o)&&("undefined"!=typeof o||b in e)||(e[b]=d)}return e}var n=e("./baseCopy"),i=e("../object/keys");t.exports=a},{"../object/keys":100,"./baseCopy":28}],26:[function(e,t){function a(e,t,a){var o=typeof e;return"function"==o?"undefined"!=typeof t&&b(e)?r(e,t,a):e:null==e?s:"object"==o?n(e):"undefined"==typeof t?c(e+""):i(e+"",t)}var n=e("./baseMatches"),i=e("./baseMatchesProperty"),c=e("./baseProperty"),r=e("./bindCallback"),s=e("../utility/identity"),b=e("./isBindable");t.exports=a},{"../utility/identity":106,"./baseMatches":43,"./baseMatchesProperty":44,"./baseProperty":45,"./bindCallback":51,"./isBindable":73}],27:[function(e,t){function a(e,t,u,h,_,m,g){var y;if(u&&(y=_?u(e,h,_):u(e)),"undefined"!=typeof y)return y;if(!f(e))return e;var w=d(e);if(w){if(y=s(e),!t)return n(e,y)}else{var C=L.call(e),S=C==v;if(C!=x&&C!=l&&(!S||_))return M[C]?b(e,C,t):_?e:{};if(y=o(S?{}:e),!t)return c(e,y,p(e))}m||(m=[]),g||(g=[]);for(var N=m.length;N--;)if(m[N]==e)return g[N];return m.push(e),g.push(y),(w?i:r)(e,function(n,i){y[i]=a(n,t,u,i,e,m,g)}),y}var n=e("./arrayCopy"),i=e("./arrayEach"),c=e("./baseCopy"),r=e("./baseForOwn"),s=e("./initCloneArray"),b=e("./initCloneByTag"),o=e("./initCloneObject"),d=e("../lang/isArray"),f=e("../lang/isObject"),p=e("../object/keys"),l="[object Arguments]",u="[object Array]",h="[object Boolean]",_="[object Date]",m="[object Error]",v="[object Function]",g="[object Map]",y="[object Number]",x="[object Object]",w="[object RegExp]",C="[object Set]",S="[object String]",N="[object WeakMap]",E="[object ArrayBuffer]",T="[object Float32Array]",O="[object Float64Array]",I="[object Int8Array]",j="[object Int16Array]",P="[object Int32Array]",D="[object Uint8Array]",A="[object Uint8ClampedArray]",k="[object Uint16Array]",R="[object Uint32Array]",M={};M[l]=M[u]=M[E]=M[h]=M[_]=M[T]=M[O]=M[I]=M[j]=M[P]=M[y]=M[x]=M[w]=M[S]=M[D]=M[A]=M[k]=M[R]=!0,M[m]=M[v]=M[g]=M[C]=M[N]=!1;var q=Object.prototype,L=q.toString;t.exports=a},{"../lang/isArray":89,"../lang/isObject":95,"../object/keys":100,"./arrayCopy":21,"./arrayEach":22,"./baseCopy":28,"./baseForOwn":36,"./initCloneArray":70,"./initCloneByTag":71,"./initCloneObject":72}],28:[function(e,t){function a(e,t,a){a||(a=t,t={});for(var n=-1,i=a.length;++n<i;){var c=a[n];t[c]=e[c]}return t}t.exports=a},{}],29:[function(e,t){(function(a){var n=e("../lang/isObject"),i=function(){function e(){}return function(t){if(n(t)){e.prototype=t;var i=new e;e.prototype=null}return i||a.Object()}}();t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lang/isObject":95}],30:[function(e,t){function a(e,t,a,c){if("function"!=typeof e)throw new TypeError(i);return setTimeout(function(){e.apply(void 0,n(a,c))},t)}var n=e("./baseSlice"),i="Expected a function";t.exports=a},{"./baseSlice":47}],31:[function(e,t){function a(e,t){var a=e?e.length:0,r=[];if(!a)return r;var s=-1,b=n,o=!0,d=o&&t.length>=200?c(t):null,f=t.length;d&&(b=i,o=!1,t=d);e:for(;++s<a;){var p=e[s];if(o&&p===p){for(var l=f;l--;)if(t[l]===p)continue e;r.push(p)}else b(t,p)<0&&r.push(p)}return r}var n=e("./baseIndexOf"),i=e("./cacheIndexOf"),c=e("./createCache");t.exports=a},{"./baseIndexOf":37,"./cacheIndexOf":53,"./createCache":60}],32:[function(e,t){function a(e,t){var a=e?e.length:0;if(!i(a))return n(e,t);for(var r=-1,s=c(e);++r<a&&t(s[r],r,s)!==!1;);return e}var n=e("./baseForOwn"),i=e("./isLength"),c=e("./toObject");t.exports=a},{"./baseForOwn":36,"./isLength":76,"./toObject":86}],33:[function(e,t){function a(e,t){var a=[];return n(e,function(e,n,i){t(e,n,i)&&a.push(e)}),a}var n=e("./baseEach");t.exports=a},{"./baseEach":32}],34:[function(e,t){function a(e,t,s,b){for(var o=(b||0)-1,d=e.length,f=-1,p=[];++o<d;){var l=e[o];if(r(l)&&c(l.length)&&(i(l)||n(l))){t&&(l=a(l,t,s));var u=-1,h=l.length;for(p.length+=h;++u<h;)p[++f]=l[u]}else s||(p[++f]=l)}return p}var n=e("../lang/isArguments"),i=e("../lang/isArray"),c=e("./isLength"),r=e("./isObjectLike");t.exports=a},{"../lang/isArguments":88,"../lang/isArray":89,"./isLength":76,"./isObjectLike":77}],35:[function(e,t){function a(e,t,a){for(var i=-1,c=n(e),r=a(e),s=r.length;++i<s;){var b=r[i];if(t(c[b],b,c)===!1)break}return e}var n=e("./toObject");t.exports=a},{"./toObject":86}],36:[function(e,t){function a(e,t){return n(e,t,i)}var n=e("./baseFor"),i=e("../object/keys");t.exports=a},{"../object/keys":100,"./baseFor":35}],37:[function(e,t){function a(e,t,a){if(t!==t)return n(e,a);for(var i=(a||0)-1,c=e.length;++i<c;)if(e[i]===t)return i;return-1}var n=e("./indexOfNaN");t.exports=a},{"./indexOfNaN":69}],38:[function(e,t){function a(e,t,i,c,r,s){if(e===t)return 0!==e||1/e==1/t;var b=typeof e,o=typeof t;return"function"!=b&&"object"!=b&&"function"!=o&&"object"!=o||null==e||null==t?e!==e&&t!==t:n(e,t,a,i,c,r,s)}var n=e("./baseIsEqualDeep");t.exports=a},{"./baseIsEqualDeep":39}],39:[function(e,t){function a(e,t,a,f,u,h,_){var m=r(e),v=r(t),g=o,y=o;m||(g=l.call(e),g==b?g=d:g!=d&&(m=s(e))),v||(y=l.call(t),y==b?y=d:y!=d&&(v=s(t)));var x=g==d,w=y==d,C=g==y;if(C&&!m&&!x)return i(e,t,g);var S=x&&p.call(e,"__wrapped__"),N=w&&p.call(t,"__wrapped__");if(S||N)return a(S?e.value():e,N?t.value():t,f,u,h,_);if(!C)return!1;h||(h=[]),_||(_=[]);for(var E=h.length;E--;)if(h[E]==e)return _[E]==t;h.push(e),_.push(t);var T=(m?n:c)(e,t,a,f,u,h,_);return h.pop(),_.pop(),T}var n=e("./equalArrays"),i=e("./equalByTag"),c=e("./equalObjects"),r=e("../lang/isArray"),s=e("../lang/isTypedArray"),b="[object Arguments]",o="[object Array]",d="[object Object]",f=Object.prototype,p=f.hasOwnProperty,l=f.toString;t.exports=a},{"../lang/isArray":89,"../lang/isTypedArray":97,"./equalArrays":65,"./equalByTag":66,"./equalObjects":67}],40:[function(e,t){function a(e){return"function"==typeof e||!1}t.exports=a},{}],41:[function(e,t){function a(e,t,a,i,r){var s=t.length;if(null==e)return!s;for(var b=-1,o=!r;++b<s;)if(o&&i[b]?a[b]!==e[t[b]]:!c.call(e,t[b]))return!1;for(b=-1;++b<s;){var d=t[b];if(o&&i[b])var f=c.call(e,d);else{var p=e[d],l=a[b];f=r?r(p,l,d):void 0,"undefined"==typeof f&&(f=n(l,p,r,!0))}if(!f)return!1}return!0}var n=e("./baseIsEqual"),i=Object.prototype,c=i.hasOwnProperty;t.exports=a},{"./baseIsEqual":38}],42:[function(e,t){function a(e,t){var a=[];return n(e,function(e,n,i){a.push(t(e,n,i))}),a}var n=e("./baseEach");t.exports=a},{"./baseEach":32}],43:[function(e,t){function a(e){var t=c(e),a=t.length;if(1==a){var r=t[0],b=e[r];if(i(b))return function(e){return null!=e&&e[r]===b&&s.call(e,r)}}for(var o=Array(a),d=Array(a);a--;)b=e[t[a]],o[a]=b,d[a]=i(b);return function(e){return n(e,t,o,d)}}var n=e("./baseIsMatch"),i=e("./isStrictComparable"),c=e("../object/keys"),r=Object.prototype,s=r.hasOwnProperty;t.exports=a},{"../object/keys":100,"./baseIsMatch":41,"./isStrictComparable":78}],44:[function(e,t){function a(e,t){return i(t)?function(a){return null!=a&&a[e]===t}:function(a){return null!=a&&n(t,a[e],null,!0)}}var n=e("./baseIsEqual"),i=e("./isStrictComparable");t.exports=a},{"./baseIsEqual":38,"./isStrictComparable":78}],45:[function(e,t){function a(e){return function(t){return null==t?void 0:t[e]}}t.exports=a},{}],46:[function(e,t){var a=e("../utility/identity"),n=e("./metaMap"),i=n?function(e,t){return n.set(e,t),e}:a;t.exports=i},{"../utility/identity":106,"./metaMap":80}],47:[function(e,t){function a(e,t,a){var n=-1,i=e.length;t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),a="undefined"==typeof a||a>i?i:+a||0,0>a&&(a+=i),i=t>a?0:a-t>>>0,t>>>=0;for(var c=Array(i);++n<i;)c[n]=e[n+t];return c}t.exports=a},{}],48:[function(e,t){function a(e){return"string"==typeof e?e:null==e?"":e+""}t.exports=a},{}],49:[function(e,t){function a(e,t){var a=-1,r=n,s=e.length,b=!0,o=b&&s>=200,d=o?c():null,f=[];d?(r=i,b=!1):(o=!1,d=t?[]:f);e:for(;++a<s;){var p=e[a],l=t?t(p,a,e):p;if(b&&p===p){for(var u=d.length;u--;)if(d[u]===l)continue e;t&&d.push(l),f.push(p)}else r(d,l)<0&&((t||o)&&d.push(l),f.push(p))}return f}var n=e("./baseIndexOf"),i=e("./cacheIndexOf"),c=e("./createCache");t.exports=a},{"./baseIndexOf":37,"./cacheIndexOf":53,"./createCache":60}],50:[function(e,t){function a(e,t){for(var a=-1,n=t.length,i=Array(n);++a<n;)i[a]=e[t[a]];return i}t.exports=a},{}],51:[function(e,t){function a(e,t,a){if("function"!=typeof e)return n;if("undefined"==typeof t)return e;switch(a){case 1:return function(a){return e.call(t,a)};case 3:return function(a,n,i){return e.call(t,a,n,i)};case 4:return function(a,n,i,c){return e.call(t,a,n,i,c)};case 5:return function(a,n,i,c,r){return e.call(t,a,n,i,c,r)}}return function(){return e.apply(t,arguments)}}var n=e("../utility/identity");t.exports=a},{"../utility/identity":106}],52:[function(e,t){(function(a){function n(e){return s.call(e,0)}var i=e("../utility/constant"),c=e("../lang/isNative"),r=c(r=a.ArrayBuffer)&&r,s=c(s=r&&new r(0).slice)&&s,b=Math.floor,o=c(o=a.Uint8Array)&&o,d=function(){try{var e=c(e=a.Float64Array)&&e,t=new e(new r(10),0,1)&&e}catch(n){}return t}(),f=d?d.BYTES_PER_ELEMENT:0;s||(n=r&&o?function(e){var t=e.byteLength,a=d?b(t/f):0,n=a*f,i=new r(t);if(a){var c=new d(i,0,a);c.set(new d(e,0,a))}return t!=n&&(c=new o(i,n),c.set(new o(e,n))),i}:i(null)),t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lang/isNative":93,"../utility/constant":105}],53:[function(e,t){function a(e,t){var a=e.data,i="string"==typeof t||n(t)?a.set.has(t):a.hash[t];return i?0:-1}var n=e("../lang/isObject");t.exports=a},{"../lang/isObject":95}],54:[function(e,t){function a(e){var t=this.data;"string"==typeof e||n(e)?t.set.add(e):t.hash[e]=!0}var n=e("../lang/isObject");t.exports=a},{"../lang/isObject":95}],55:[function(e,t){function a(e,t,a){for(var i=a.length,c=-1,r=n(e.length-i,0),s=-1,b=t.length,o=Array(r+b);++s<b;)o[s]=t[s];for(;++c<i;)o[a[c]]=e[c];for(;r--;)o[s++]=e[c++];return o}var n=Math.max;t.exports=a},{}],56:[function(e,t){function a(e,t,a){for(var i=-1,c=a.length,r=-1,s=n(e.length-c,0),b=-1,o=t.length,d=Array(s+o);++r<s;)d[r]=e[r];for(var f=r;++b<o;)d[f+b]=t[b];for(;++i<c;)d[f+a[i]]=e[r++];return d}var n=Math.max;t.exports=a},{}],57:[function(e,t){function a(e,t){return function(a,r,s){var b=t?t():{};if(r=n(r,s,3),c(a))for(var o=-1,d=a.length;++o<d;){var f=a[o];e(b,f,r(f,o,a),a)}else i(a,function(t,a,n){e(b,t,r(t,a,n),n)});return b}}var n=e("./baseCallback"),i=e("./baseEach"),c=e("../lang/isArray");t.exports=a},{"../lang/isArray":89,"./baseCallback":26,"./baseEach":32}],58:[function(e,t){function a(e){return function(){var t=arguments.length,a=arguments[0];if(2>t||null==a)return a;if(t>3&&i(arguments[1],arguments[2],arguments[3])&&(t=2),t>3&&"function"==typeof arguments[t-2])var c=n(arguments[--t-1],arguments[t--],5);else t>2&&"function"==typeof arguments[t-1]&&(c=arguments[--t]);for(var r=0;++r<t;){var s=arguments[r];s&&e(a,s,c)}return a}}var n=e("./bindCallback"),i=e("./isIterateeCall");t.exports=a},{"./bindCallback":51,"./isIterateeCall":75}],59:[function(e,t){function a(e,t){function a(){return(this instanceof a?i:e).apply(t,arguments)}var i=n(e);return a}var n=e("./createCtorWrapper");t.exports=a},{"./createCtorWrapper":61}],60:[function(e,t){(function(a){var n=e("./SetCache"),i=e("../utility/constant"),c=e("../lang/isNative"),r=c(r=a.Set)&&r,s=c(s=Object.create)&&s,b=s&&r?function(e){return new n(e)}:i(null);t.exports=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lang/isNative":93,"../utility/constant":105,"./SetCache":20}],61:[function(e,t){function a(e){return function(){var t=n(e.prototype),a=e.apply(t,arguments);return i(a)?a:t}}var n=e("./baseCreate"),i=e("../lang/isObject");t.exports=a},{"../lang/isObject":95,"./baseCreate":29}],62:[function(e,t){function a(e,t,v,g,y,x,w,C,S,N){function E(){for(var f=arguments.length,p=f,l=Array(f);p--;)l[p]=arguments[p];if(g&&(l=i(l,g,y)),x&&(l=c(l,x,w)),j||D){var _=E.placeholder,R=b(l,_);if(f-=R.length,N>f){var M=C?n(C):null,q=m(N-f,0),L=j?R:null,F=j?null:R,H=j?l:null,B=j?null:l;t|=j?u:h,t&=~(j?h:u),P||(t&=~(o|d));var U=a(e,t,v,H,L,B,F,M,S,q);return U.placeholder=_,U}}var W=O?v:this;return I&&(e=W[k]),C&&(l=s(l,C)),T&&S<l.length&&(l.length=S),(this instanceof E?A||r(e):e).apply(W,l)}var T=t&_,O=t&o,I=t&d,j=t&p,P=t&f,D=t&l,A=!I&&r(e),k=e;return E}var n=e("./arrayCopy"),i=e("./composeArgs"),c=e("./composeArgsRight"),r=e("./createCtorWrapper"),s=e("./reorder"),b=e("./replaceHolders"),o=1,d=2,f=4,p=8,l=16,u=32,h=64,_=256,m=Math.max;t.exports=a},{"./arrayCopy":21,"./composeArgs":55,"./composeArgsRight":56,"./createCtorWrapper":61,"./reorder":81,"./replaceHolders":82}],63:[function(e,t){function a(e,t,a,c){function r(){for(var t=-1,n=arguments.length,i=-1,o=c.length,d=Array(n+o);++i<o;)d[i]=c[i];for(;n--;)d[i++]=arguments[++t];return(this instanceof r?b:e).apply(s?a:this,d)}var s=t&i,b=n(e);return r}var n=e("./createCtorWrapper"),i=1;t.exports=a},{"./createCtorWrapper":61}],64:[function(e,t){function a(e,t,a,_,m,v,g,y){var x=t&f;if(!x&&"function"!=typeof e)throw new TypeError(u);var w=_?_.length:0;if(w||(t&=~(p|l),_=m=null),w-=m?m.length:0,t&l){var C=_,S=m;_=m=null}var N=!x&&s(e),E=[e,t,a,_,m,C,S,v,g,y];if(N&&N!==!0&&(b(E,N),t=E[1],y=E[9]),E[9]=null==y?x?0:e.length:h(y-w,0)||0,t==d)var T=i(E[0],E[2]);else T=t!=p&&t!=(d|p)||E[4].length?c.apply(void 0,E):r.apply(void 0,E);var O=N?n:o;return O(T,E)}var n=e("./baseSetData"),i=e("./createBindWrapper"),c=e("./createHybridWrapper"),r=e("./createPartialWrapper"),s=e("./getData"),b=e("./mergeData"),o=e("./setData"),d=1,f=2,p=32,l=64,u="Expected a function",h=Math.max;t.exports=a},{"./baseSetData":46,"./createBindWrapper":59,"./createHybridWrapper":62,"./createPartialWrapper":63,"./getData":68,"./mergeData":79,"./setData":83}],65:[function(e,t){function a(e,t,a,n,i,c,r){var s=-1,b=e.length,o=t.length,d=!0;if(b!=o&&!(i&&o>b))return!1;for(;d&&++s<b;){var f=e[s],p=t[s];if(d=void 0,n&&(d=i?n(p,f,s):n(f,p,s)),"undefined"==typeof d)if(i)for(var l=o;l--&&(p=t[l],!(d=f&&f===p||a(f,p,n,i,c,r))););else d=f&&f===p||a(f,p,n,i,c,r)}return!!d}t.exports=a},{}],66:[function(e,t){function a(e,t,a){switch(a){case n:case i:return+e==+t;case c:return e.name==t.name&&e.message==t.message;case r:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case s:case b:return e==t+""}return!1}var n="[object Boolean]",i="[object Date]",c="[object Error]",r="[object Number]",s="[object RegExp]",b="[object String]";t.exports=a},{}],67:[function(e,t){function a(e,t,a,i,r,s,b){var o=n(e),d=o.length,f=n(t),p=f.length;if(d!=p&&!r)return!1;for(var l,u=-1;++u<d;){var h=o[u],_=c.call(t,h);if(_){var m=e[h],v=t[h];_=void 0,i&&(_=r?i(v,m,h):i(m,v,h)),"undefined"==typeof _&&(_=m&&m===v||a(m,v,i,r,s,b))}if(!_)return!1;l||(l="constructor"==h)}if(!l){var g=e.constructor,y=t.constructor;if(g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y))return!1}return!0}var n=e("../object/keys"),i=Object.prototype,c=i.hasOwnProperty;t.exports=a},{"../object/keys":100}],68:[function(e,t){var a=e("./metaMap"),n=e("../utility/noop"),i=a?function(e){return a.get(e)}:n;t.exports=i},{"../utility/noop":107,"./metaMap":80}],69:[function(e,t){function a(e,t,a){for(var n=e.length,i=a?t||n:(t||0)-1;a?i--:++i<n;){var c=e[i];if(c!==c)return i}return-1}t.exports=a},{}],70:[function(e,t){function a(e){var t=e.length,a=new e.constructor(t);return t&&"string"==typeof e[0]&&i.call(e,"index")&&(a.index=e.index,a.input=e.input),a}var n=Object.prototype,i=n.hasOwnProperty;t.exports=a},{}],71:[function(e,t){function a(e,t,a){var y=e.constructor;switch(t){case o:return n(e);case i:case c:return new y(+e);case d:case f:case p:case l:case u:case h:case _:case m:case v:var x=e.buffer;return new y(a?n(x):x,e.byteOffset,e.length);case r:case b:return new y(e);case s:var w=new y(e.source,g.exec(e));w.lastIndex=e.lastIndex}return w}var n=e("./bufferClone"),i="[object Boolean]",c="[object Date]",r="[object Number]",s="[object RegExp]",b="[object String]",o="[object ArrayBuffer]",d="[object Float32Array]",f="[object Float64Array]",p="[object Int8Array]",l="[object Int16Array]",u="[object Int32Array]",h="[object Uint8Array]",_="[object Uint8ClampedArray]",m="[object Uint16Array]",v="[object Uint32Array]",g=/\w*$/;t.exports=a},{"./bufferClone":52}],72:[function(e,t){function a(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}t.exports=a},{}],73:[function(e,t){function a(e){var t=!(c.funcNames?e.name:c.funcDecomp);if(!t){var a=b.call(e);c.funcNames||(t=!r.test(a)),t||(t=s.test(a)||i(e),n(e,t))}return t}var n=e("./baseSetData"),i=e("../lang/isNative"),c=e("../support"),r=/^\s*function[ \n\r\t]+\w/,s=/\bthis\b/,b=Function.prototype.toString;t.exports=a},{"../lang/isNative":93,"../support":104,"./baseSetData":46}],74:[function(e,t){function a(e,t){return e=+e,t=null==t?n:t,e>-1&&e%1==0&&t>e}var n=Math.pow(2,53)-1;t.exports=a},{}],75:[function(e,t){function a(e,t,a){if(!c(a))return!1;var r=typeof t;if("number"==r)var s=a.length,b=i(s)&&n(t,s);else b="string"==r&&t in a;if(b){var o=a[t];return e===e?e===o:o!==o}return!1}var n=e("./isIndex"),i=e("./isLength"),c=e("../lang/isObject");t.exports=a},{"../lang/isObject":95,"./isIndex":74,"./isLength":76}],76:[function(e,t){function a(e){return"number"==typeof e&&e>-1&&e%1==0&&n>=e}var n=Math.pow(2,53)-1;t.exports=a},{}],77:[function(e,t){function a(e){return e&&"object"==typeof e||!1}t.exports=a},{}],78:[function(e,t){function a(e){return e===e&&(0===e?1/e>0:!n(e))}var n=e("../lang/isObject");t.exports=a},{"../lang/isObject":95}],79:[function(e,t){function a(e,t){var a=e[1],h=t[1],_=a|h,m=p|f,v=s|b,g=m|v|o|d,y=a&p&&!(h&p),x=a&f&&!(h&f),w=(x?e:t)[7],C=(y?e:t)[8],S=!(a>=f&&h>v||a>v&&h>=f),N=_>=m&&g>=_&&(f>a||(x||y)&&w.length<=C);if(!S&&!N)return e;h&s&&(e[2]=t[2],_|=a&s?0:o);var E=t[3];if(E){var T=e[3];e[3]=T?i(T,E,t[4]):n(E),e[4]=T?r(e[3],l):n(t[4])}return E=t[5],E&&(T=e[5],e[5]=T?c(T,E,t[6]):n(E),e[6]=T?r(e[5],l):n(t[6])),E=t[7],E&&(e[7]=n(E)),h&p&&(e[8]=null==e[8]?t[8]:u(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=_,e}var n=e("./arrayCopy"),i=e("./composeArgs"),c=e("./composeArgsRight"),r=e("./replaceHolders"),s=1,b=2,o=4,d=16,f=128,p=256,l="__lodash_placeholder__",u=Math.min;
t.exports=a},{"./arrayCopy":21,"./composeArgs":55,"./composeArgsRight":56,"./replaceHolders":82}],80:[function(e,t){(function(a){var n=e("../lang/isNative"),i=n(i=a.WeakMap)&&i,c=i&&new i;t.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lang/isNative":93}],81:[function(e,t){function a(e,t){for(var a=e.length,r=c(t.length,a),s=n(e);r--;){var b=t[r];e[r]=i(b,a)?s[b]:void 0}return e}var n=e("./arrayCopy"),i=e("./isIndex"),c=Math.min;t.exports=a},{"./arrayCopy":21,"./isIndex":74}],82:[function(e,t){function a(e,t){for(var a=-1,i=e.length,c=-1,r=[];++a<i;)e[a]===t&&(e[a]=n,r[++c]=a);return r}var n="__lodash_placeholder__";t.exports=a},{}],83:[function(e,t){var a=e("./baseSetData"),n=e("../date/now"),i=150,c=16,r=function(){var e=0,t=0;return function(r,s){var b=n(),o=c-(b-t);if(t=b,o>0){if(++e>=i)return r}else e=0;return a(r,s)}}();t.exports=r},{"../date/now":16,"./baseSetData":46}],84:[function(e,t){function a(e){for(var t=s(e),a=t.length,o=a&&e.length,f=o&&r(o)&&(i(e)||b.nonEnumArgs&&n(e)),p=-1,l=[];++p<a;){var u=t[p];(f&&c(u,o)||d.call(e,u))&&l.push(u)}return l}var n=e("../lang/isArguments"),i=e("../lang/isArray"),c=e("./isIndex"),r=e("./isLength"),s=e("../object/keysIn"),b=e("../support"),o=Object.prototype,d=o.hasOwnProperty;t.exports=a},{"../lang/isArguments":88,"../lang/isArray":89,"../object/keysIn":101,"../support":104,"./isIndex":74,"./isLength":76}],85:[function(e,t){function a(e,t){for(var a,n=-1,i=e.length,c=-1,r=[];++n<i;){var s=e[n],b=t?t(s,n,e):s;n&&a===b||(a=b,r[++c]=s)}return r}t.exports=a},{}],86:[function(e,t){function a(e){return n(e)?e:Object(e)}var n=e("../lang/isObject");t.exports=a},{"../lang/isObject":95}],87:[function(e,t){function a(e,t,a){return t="function"==typeof t&&i(t,a,1),n(e,!0,t)}var n=e("../internal/baseClone"),i=e("../internal/bindCallback");t.exports=a},{"../internal/baseClone":27,"../internal/bindCallback":51}],88:[function(e,t){function a(e){var t=i(e)?e.length:void 0;return n(t)&&s.call(e)==c||!1}var n=e("../internal/isLength"),i=e("../internal/isObjectLike"),c="[object Arguments]",r=Object.prototype,s=r.toString;t.exports=a},{"../internal/isLength":76,"../internal/isObjectLike":77}],89:[function(e,t){var a=e("../internal/isLength"),n=e("./isNative"),i=e("../internal/isObjectLike"),c="[object Array]",r=Object.prototype,s=r.toString,b=n(b=Array.isArray)&&b,o=b||function(e){return i(e)&&a(e.length)&&s.call(e)==c||!1};t.exports=o},{"../internal/isLength":76,"../internal/isObjectLike":77,"./isNative":93}],90:[function(e,t){function a(e){return e===!0||e===!1||n(e)&&r.call(e)==i||!1}var n=e("../internal/isObjectLike"),i="[object Boolean]",c=Object.prototype,r=c.toString;t.exports=a},{"../internal/isObjectLike":77}],91:[function(e,t){function a(e,t,a,r){if(a="function"==typeof a&&i(a,r,3),!a&&c(e)&&c(t))return e===t;var s=a?a(e,t):void 0;return"undefined"==typeof s?n(e,t,a):!!s}var n=e("../internal/baseIsEqual"),i=e("../internal/bindCallback"),c=e("../internal/isStrictComparable");t.exports=a},{"../internal/baseIsEqual":38,"../internal/bindCallback":51,"../internal/isStrictComparable":78}],92:[function(e,t){(function(a){var n=e("../internal/baseIsFunction"),i=e("./isNative"),c="[object Function]",r=Object.prototype,s=r.toString,b=i(b=a.Uint8Array)&&b,o=n(/x/)||b&&!n(b)?function(e){return s.call(e)==c}:n;t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../internal/baseIsFunction":40,"./isNative":93}],93:[function(e,t){function a(e){return null==e?!1:o.call(e)==c?d.test(b.call(e)):i(e)&&r.test(e)||!1}var n=e("../string/escapeRegExp"),i=e("../internal/isObjectLike"),c="[object Function]",r=/^\[object .+?Constructor\]$/,s=Object.prototype,b=Function.prototype.toString,o=s.toString,d=RegExp("^"+n(o).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=a},{"../internal/isObjectLike":77,"../string/escapeRegExp":103}],94:[function(e,t){function a(e){return"number"==typeof e||n(e)&&r.call(e)==i||!1}var n=e("../internal/isObjectLike"),i="[object Number]",c=Object.prototype,r=c.toString;t.exports=a},{"../internal/isObjectLike":77}],95:[function(e,t){function a(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}t.exports=a},{}],96:[function(e,t){function a(e){return"string"==typeof e||n(e)&&r.call(e)==i||!1}var n=e("../internal/isObjectLike"),i="[object String]",c=Object.prototype,r=c.toString;t.exports=a},{"../internal/isObjectLike":77}],97:[function(e,t){function a(e){return i(e)&&n(e.length)&&O[j.call(e)]||!1}var n=e("../internal/isLength"),i=e("../internal/isObjectLike"),c="[object Arguments]",r="[object Array]",s="[object Boolean]",b="[object Date]",o="[object Error]",d="[object Function]",f="[object Map]",p="[object Number]",l="[object Object]",u="[object RegExp]",h="[object Set]",_="[object String]",m="[object WeakMap]",v="[object ArrayBuffer]",g="[object Float32Array]",y="[object Float64Array]",x="[object Int8Array]",w="[object Int16Array]",C="[object Int32Array]",S="[object Uint8Array]",N="[object Uint8ClampedArray]",E="[object Uint16Array]",T="[object Uint32Array]",O={};O[g]=O[y]=O[x]=O[w]=O[C]=O[S]=O[N]=O[E]=O[T]=!0,O[c]=O[r]=O[v]=O[s]=O[b]=O[o]=O[d]=O[f]=O[p]=O[l]=O[u]=O[h]=O[_]=O[m]=!1;var I=Object.prototype,j=I.toString;t.exports=a},{"../internal/isLength":76,"../internal/isObjectLike":77}],98:[function(e,t){var a=e("../internal/baseAssign"),n=e("../internal/createAssigner"),i=n(a);t.exports=i},{"../internal/baseAssign":25,"../internal/createAssigner":58}],99:[function(e,t){t.exports=e("./assign")},{"./assign":98}],100:[function(e,t){var a=e("../internal/isLength"),n=e("../lang/isNative"),i=e("../lang/isObject"),c=e("../internal/shimKeys"),r=n(r=Object.keys)&&r,s=r?function(e){if(e)var t=e.constructor,n=e.length;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&n&&a(n)?c(e):i(e)?r(e):[]}:c;t.exports=s},{"../internal/isLength":76,"../internal/shimKeys":84,"../lang/isNative":93,"../lang/isObject":95}],101:[function(e,t){function a(e){if(null==e)return[];s(e)||(e=Object(e));var t=e.length;t=t&&r(t)&&(i(e)||b.nonEnumArgs&&n(e))&&t||0;for(var a=e.constructor,o=-1,f="function"==typeof a&&a.prototype===e,p=Array(t),l=t>0;++o<t;)p[o]=o+"";for(var u in e)l&&c(u,t)||"constructor"==u&&(f||!d.call(e,u))||p.push(u);return p}var n=e("../lang/isArguments"),i=e("../lang/isArray"),c=e("../internal/isIndex"),r=e("../internal/isLength"),s=e("../lang/isObject"),b=e("../support"),o=Object.prototype,d=o.hasOwnProperty;t.exports=a},{"../internal/isIndex":74,"../internal/isLength":76,"../lang/isArguments":88,"../lang/isArray":89,"../lang/isObject":95,"../support":104}],102:[function(e,t){function a(e){return n(e,i(e))}var n=e("../internal/baseValues"),i=e("./keys");t.exports=a},{"../internal/baseValues":50,"./keys":100}],103:[function(e,t){function a(e){return e=n(e),e&&c.test(e)?e.replace(i,"\\$&"):e}var n=e("../internal/baseToString"),i=/[.*+?^${}()|[\]\/\\]/g,c=RegExp(i.source);t.exports=a},{"../internal/baseToString":48}],104:[function(e,t){(function(a){var n=e("./lang/isNative"),i=/\bthis\b/,c=Object.prototype,r=(r=a.window)&&r.document,s=c.propertyIsEnumerable,b={};!function(){b.funcDecomp=!n(a.WinRTError)&&i.test(function(){return this}),b.funcNames="string"==typeof Function.name;try{b.dom=11===r.createDocumentFragment().nodeType}catch(e){b.dom=!1}try{b.nonEnumArgs=!s.call(arguments,1)}catch(e){b.nonEnumArgs=!0}}(0,0),t.exports=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lang/isNative":93}],105:[function(e,t){function a(e){return function(){return e}}t.exports=a},{}],106:[function(e,t){function a(e){return e}t.exports=a},{}],107:[function(e,t){function a(){}t.exports=a},{}],108:[function(e,t){t.exports=e("./src/article")},{"./src/article":112}],109:[function(e,t){t.exports=e("./src/basics/helpers")},{"./src/basics/helpers":123}],110:[function(e,t){var a=e("./src/basics");a.Data=e("./src/data"),a.Document=e("./src/document"),a.Operator=e("./src/operator"),a.Surface=e("./src/surface"),t.exports=a},{"./src/basics":124,"./src/data":131,"./src/document":151,"./src/operator":161,"./src/surface":171}],111:[function(e,t){"use strict";var a=e("../basics"),n=e("../document"),i=e("./nodes"),c=e("./nodes/reference"),r=new n.Schema("substance-article","1.0.0");r.addNodes(i.nodes);var s=function(e){n.call(this,r,e),i.initialize(this)};s.CoreModule=i,s.nodes={},s.nodes.Reference=c,a.inherit(s,n),s.schema=r,s.Paragraph=e("./nodes/paragraph"),t.exports=s},{"../basics":124,"../document":151,"./nodes":115,"./nodes/paragraph":117,"./nodes/reference":118}],112:[function(e,t){var a=e("./article");t.exports=a},{"./article":111}],113:[function(e,t){var a=e("../../document"),n=a.Node.extend({name:"document",properties:{guid:"string",creator:"string",title:"string","abstract":"string"}});t.exports=n},{"../../document":151}],114:[function(e,t){var a=e("../../document"),n=a.Annotation.extend({name:"emphasis"});n.static.matchElement=function(e){var t=e.tagName.toLowerCase();return"i"===t||"em"===t},t.exports=n},{"../../document":151}],115:[function(e,t){var a=e("./document_node"),n=e("./strong"),i=e("./emphasis"),c=e("./reference"),r=e("./initialize");t.exports={nodes:[a,c,n,i],initialize:r}},{"./document_node":113,"./emphasis":114,"./initialize":116,"./reference":118,"./strong":119}],116:[function(e,t){function a(e){e.references=e.addIndex("referenceByTarget",n.Index.create({type:"reference",property:"target"}))}var n=e("../../data");t.exports=a},{"../../data":131}],117:[function(e,t){var a=e("../../basics"),n=e("../../document"),i=n.TextNode.extend({name:"paragraph"});i.static.blockType=!0,i.static.matchElement=function(e){var t=e.tagName.toLowerCase();return"p"===t},i.static.fromHtml=function(e,t){var n={id:e.dataset.id||a.uuid("paragraph"),content:""};return n.content=t.annotatedText(e,[n.id,"content"]),n},t.exports=i},{"../../basics":124,"../../document":151}],118:[function(e,t){var a=e("../../document"),n=a.Annotation.extend({name:"reference"});t.exports=n},{"../../document":151}],119:[function(e,t){var a=e("../../document"),n=a.Annotation.extend({name:"strong"});n.static.matchElement=function(e){var t=e.tagName.toLowerCase();return"b"===t||"strong"===t},t.exports=n},{"../../document":151}],120:[function(e,t){"use strict";function a(){Error.apply(this,arguments)}var n=e("./oo");a.Prototype=function(){},n.inherit(a,Error),t.exports=a},{"./oo":125}],121:[function(e,t){"use strict";function a(){this.__events__={}}var n=e("./oo");a.Prototype=function(){function e(e,t){if("string"==typeof e){if(void 0===t||null===t)throw new Error('Method name "'+e+'" has no context.');if(!(e in t))throw new Error('Method not found: "'+e+'"');if("function"!=typeof t[e])throw new Error('Property "'+e+'" is not a function')}else if("function"!=typeof e)throw new Error("Invalid callback. Function or method name expected.")}this.on=function(t,a,n,i){var c;return e(a,i),c=this.__events__.hasOwnProperty(t)?this.__events__[t]:this.__events__[t]=[],c.push({method:a,args:n,context:arguments.length<4?null:i}),this},this.once=function(e,t){var a=this,n=function(){a.off(e,n),t.apply(a,Array.prototype.slice.call(arguments,0))};return this.on(e,n)},this.off=function(t,a,n){var i,c;if(1===arguments.length)return delete this.__events__[t],this;if(e(a,n),!(t in this.__events__&&this.__events__[t].length))return this;for(arguments.length<3&&(n=null),c=this.__events__[t],i=c.length;i--;)c[i].method===a&&c[i].context===n&&c.splice(i,1);return 0===c.length&&delete this.__events__[t],this},this.emit=function(e){var t,a,n,i,c,r;if(e in this.__events__){for(i=this.__events__[e].slice(),c=Array.prototype.slice.call(arguments,1),t=0,a=i.length;a>t;t++)n=i[t],r="string"==typeof n.method?n.context[n.method]:n.method,r.apply(n.context,n.args?n.args.concat(c):c);return!0}return!1},this.connect=function(e,t){var a,n,i;for(i in t)a=t[i],Array.isArray(a)?(n=a.slice(1),a=a[0]):n=[],this.on(i,a,n,e);return this},this.disconnect=function(e,t){var a,n,i;if(t)for(n in t)this.off(n,t[n],e);else for(n in this.__events__)for(i=this.__events__[n],a=i.length;a--;)i[a]&&i[a].context===e&&this.off(n,i[a].method,e);return this}},n.initClass(a),t.exports=a},{"./oo":125}],122:[function(e,t){"use strict";function a(){a.super.call(this)}var n=e("./oo"),i=e("./registry");a.Prototype=function(){this.create=function(e){var t=this.get(e);if(!t)throw new Error("No class registered by that name: "+e);var a=Array.prototype.slice.call(arguments,1),n=Object.create(t.prototype);return t.apply(n,a),n}},n.inherit(a,i),t.exports=a},{"./oo":125,"./registry":127}],123:[function(e,t){"use strict";var a={};a.isEqual=e("lodash/lang/isEqual"),a.isObject=e("lodash/lang/isObject"),a.isArray=e("lodash/lang/isArray"),a.isString=e("lodash/lang/isString"),a.isNumber=e("lodash/lang/isNumber"),a.isBoolean=e("lodash/lang/isBoolean"),a.isFunction=e("lodash/lang/isFunction"),a.cloneDeep=e("lodash/lang/cloneDeep"),a.bind=e("lodash/function/bind"),a.delay=e("lodash/function/delay"),a.debounce=e("lodash/function/debounce"),a.extend=e("lodash/object/extend"),a.last=e("lodash/array/last"),a.first=e("lodash/array/first"),a.compact=e("lodash/array/compact"),a.uniq=e("lodash/array/uniq"),a.intersection=e("lodash/array/intersection"),a.union=e("lodash/array/union"),a.without=e("lodash/array/without"),a.each=e("lodash/collection/forEach"),a.filter=e("lodash/collection/filter"),a.includes=e("lodash/collection/includes"),a.map=e("lodash/collection/map"),a.pluck=e("lodash/collection/pluck"),a.indexBy=e("lodash/collection/indexBy"),a.isArrayEqual=function(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!=t.length)return!1;for(var a=0;a<e.length;++a)if(e[a]!==t[a])return!1;return!0},a.deleteFromArray=function(e,t){for(var a=0;a<e.length;a++)e[a]===t&&(e.splice(a,1),a--)},a.clone=function(e){return null===e||void 0===e?e:a.isFunction(e.clone)?e.clone():a.deepclone(e)},a.deepclone=a.cloneDeep,t.exports=a},{"lodash/array/compact":3,"lodash/array/first":4,"lodash/array/intersection":5,"lodash/array/last":6,"lodash/array/union":7,"lodash/array/uniq":8,"lodash/array/without":9,"lodash/collection/filter":10,"lodash/collection/forEach":11,"lodash/collection/includes":12,"lodash/collection/indexBy":13,"lodash/collection/map":14,"lodash/collection/pluck":15,"lodash/function/bind":17,"lodash/function/debounce":18,"lodash/function/delay":19,"lodash/lang/cloneDeep":87,"lodash/lang/isArray":89,"lodash/lang/isBoolean":90,"lodash/lang/isEqual":91,"lodash/lang/isFunction":92,"lodash/lang/isNumber":94,"lodash/lang/isObject":95,"lodash/lang/isString":96,"lodash/object/extend":99}],124:[function(e,t){"use strict";var a=e("./uuid"),n=e("./oo"),i=e("./path_adapter"),c=e("./event_emitter"),r=e("./error"),s=e("./registry"),b=e("./factory"),o=e("./helpers");o.uuid=a,o.initClass=n.initClass,o.inherit=n.inherit,o.inheritClass=n.inheritClass,o.mixin=n.mixin,o.mixinClass=n.mixinClass,o.PathAdapter=i,o.EventEmitter=c,o.Error=r,o.Registry=s,o.Factory=b,t.exports=o},{"./error":120,"./event_emitter":121,"./factory":122,"./helpers":123,"./oo":125,"./path_adapter":126,"./registry":127,"./uuid":128}],125:[function(e,t){"use strict";function a(e){!e.Prototype||e.prototype instanceof e.Prototype||(e.prototype=new e.Prototype,e.prototype.constructor=e),e.static=e.static||{},e.extend=e.extend||r.bind(c,null,e)}function n(e,t){if(e.prototype instanceof t)throw new Error("Target already inherits from origin");var n=e.prototype.constructor,i=e.Prototype;e.super=t,i?(i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e):e.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e.prototype.super=t.prototype,a(t),e.static=Object.create(t.static),e.extend=r.bind(c,null,e)}function i(e,t){var n,i=t.prototype;t.Prototype&&(i=new t.Prototype);for(n in i)"constructor"!==n&&i.hasOwnProperty(n)&&(e.prototype[n]=i[n]);if(a(e),t.static)for(n in t.static)t.static.hasOwnProperty(n)&&(e.static[n]=t.static[n]);else a(t)}var c,r=e("./helpers");c=function(e,t){var a=function(){e.apply(this,arguments),this.init&&this.init()};n(a,e);for(var i in t)if(t.hasOwnProperty(i)){if("name"===i)continue;a.prototype[i]=t[i]}return a.static.name=t.name,a},t.exports={initClass:a,inherit:n,mixin:i}},{"./helpers":123}],126:[function(e,t){"use strict";function a(e){e&&(this.root=e)}var n=e("./helpers"),i=e("./oo");a.Prototype=function(){this.childrenScope=!1,this.getRoot=function(){return this.root||this},this._resolve=function(e,t){for(var a=e.length-1,n=this.getRoot(),i=0;a>i;i++){var c=e[i];if(void 0===n[c]){if(!t)return void 0;n[c]={},this.childrenScope&&(n[c].children={})}n=n[c],this.childrenScope&&(n=n.children)}return n},this.get=function(e){if(n.isString(e))return this[e];if(e&&0!==e.length){var t=e[e.length-1],a=this._resolve(e);return a?a[t]:void 0}return this.getRoot()},this.set=function(e,t){if(n.isString(e))this[e]=t;else{var a=e[e.length-1];this._resolve(e,!0)[a]=t}},this.delete=function(e,t){if(n.isString(e))delete this[e];else{var a=e[e.length-1],i=this._resolve(e);if(t&&!i||!i[a])throw new Error("Invalid path.");delete i[a]}},this.clear=function(){var e=this.getRoot();for(var t in e)e.hasOwnProperty(t)&&delete e[t]},this._traverse=function(e,t,a,n){for(var i in e)if(e.hasOwnProperty(i)&&"__values__"!==i){var c=t.concat([i]);a.call(n,c,e[i]),this._traverse(e[i],c,a,n)}},this.traverse=function(e,t){this._traverse(this.getRoot(),[],e,t)}},i.initClass(a),a.Arrays=function(){a.apply(this,arguments)},a.Arrays.Prototype=function(){this.get=function(e){if(n.isString(e))return this[e];if(e&&0!==e.length){var t=e[e.length-1],a=this._resolve(e);return a&&a[t]?a[t].__values__:void 0}return this.getRoot()},this.add=function(e,t){var a=e[e.length-1],n=this._resolve(e,!0);n[a]||(n[a]={__values__:[]});var i=n[a].__values__;i.push(t)},this.remove=function(e,t){var a=this.get(e);a?n.deleteFromArray(a,t):console.warn("Warning: trying to remove a value for an unknown path.",e,t)},this.removeAll=function(e){var t=this.get(e);t.splice(0,t.length)},this.set=function(){throw new Error("This method is not available for PathAdapter.Arrays")},this._traverse=function(e,t,a,n){for(var i in e)if("__values__"===i)a.call(n,e.__values__);else{var c=t.concat([i]);this._traverse(e[i],c,a,n)}}},i.inherit(a.Arrays,a),t.exports=a},{"./helpers":123,"./oo":125}],127:[function(e,t){"use strict";function a(){this.entries={},this.names=[]}var n=e("./oo");a.Prototype=function(){this.contains=function(e){return!!this.entries[e]},this.add=function(e,t){this.contains(e)&&this.remove(e),this.entries[e]=t,this.names.push(e)},this.remove=function(e){var t=this.names.indexOf(e);t>=0&&this.names.splice(t,1),delete this.entries[e]},this.get=function(e){return this.entries[e]},this.each=function(e,t){for(var a=0;a<this.names.length;a++){var n=this.names[a],i=e.call(t,this.entries[n],n);if(i===!1)break}}},n.initClass(a),t.exports=a},{"./oo":125}],128:[function(e,t){var a=function(e,t){var a,n="0123456789abcdefghijklmnopqrstuvwxyz".split(""),i=[],c=16;if(t=t||32)for(a=0;t>a;a++)i[a]=n[0|Math.random()*c];else{var r;for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",a=0;36>a;a++)i[a]||(r=0|16*Math.random(),i[a]=n[19==a?3&r|8:r])}return(e?e:"")+i.join("")};a.generator=function(e){var t=1;return e=void 0!==e?e:"uuid_",function(a){return a=a||e,a+t++}},t.exports=a},{}],129:[function(e,t){"use strict";function a(e,t){c.call(this),t=t||{},this.schema=e,this.seed=t.seed,this.didCreateNode=t.didCreateNode||function(){},this.didDeleteNode=t.didDeleteNode||function(){},this.nodes={},this.indexes={},this.init()}var n=e("../basics"),i=n.PathAdapter,c=n.EventEmitter;a.Prototype=function(){this.get=function(e){if(!e)throw new Error("Path or id required");return this.nodes.get(e)},this.getNodes=function(){return this.nodes},this.create=function(e){var t=this.schema.getNodeFactory().create(e.type,e);if(!t)throw new Error("Illegal argument: could not create node for data:",e);if(this.contains(t.id))throw new Error("Node already exists: "+t.id);if(!t.id||!t.type)throw new Error("Node id and type are mandatory.");return this.nodes[t.id]=t,this.didCreateNode(t),n.each(this.indexes,function(e){e.select(t)&&e.create(t)}),t},this.delete=function(e){var t,a;return n.isString(e)?(a=e,t=this.nodes[a]):(t=e,a=t.id),delete this.nodes[a],this.didDeleteNode(t),n.each(this.indexes,function(e){e.select(t)&&e.delete(t)}),t},this.set=function(e,t){var a=this.get(e[0]),i=this.nodes.get(e);return this.nodes.set(e,t),n.each(this.indexes,function(n){n.select(a)&&n.update(a,e,t,i)}),i},this.update=function(e,t){var a,i=this.nodes.get(e);if(t.isOperation)a=t.apply(i);else{var c,r,s,b;if(n.isString(i))if(t["delete"])c=t["delete"].start,r=t["delete"].end,a=i.split("").splice(c,r-c).join("");else{if(!t.insert)throw new Error("Diff is not supported:",JSON.stringify(t));s=t.insert.offset,b=t.insert.value,a=[i.substring(0,s),b,i.substring(s)].join("")}else{if(!n.isArray(i))throw new Error("Diff is not supported:",JSON.stringify(t));if(a=i.slice(0),t["delete"])s=t["delete"].offset,a.splice(s,1);else{if(!t.insert)throw new Error("Diff is not supported:",JSON.stringify(t));s=t.insert.offset,b=t.insert.value,a.splice(s,0,b)}}}this.nodes.set(e,a);var o=this.get(e[0]);return n.each(this.indexes,function(t){t.select(o)&&t.update(o,e,i,a)}),i},this.toJSON=function(){return{schema:[this.schema.id,this.schema.version],nodes:n.deepclone(this.nodes)}},this.contains=function(e){return!!this.nodes[e]},this.reset=function(){this.init()},this.init=function(){if(this.nodes=new i,this.seed){var e=this.seed.nodes;n.each(e,function(e){this.create(e)},this)}},this.addIndex=function(e,t){return this.indexes[e]&&console.error("Index with name %s already exists.",e),t.setGraph(this),t.initialize(),this.indexes[e]=t,t},this.getIndex=function(e){return this.indexes[e]}},n.inherit(a,c),t.exports=a},{"../basics":124}],130:[function(e,t){"use strict";var a=e("../basics"),n=e("./graph"),i=e("../operator"),c=i.ObjectOperation,r=i.ArrayOperation,s=i.TextOperation,b=function(e,t){b.super.call(this,e,t)};b.Prototype=function(){this.create=function(e){var t=c.Create([e.id],e);return this.apply(t),t},this.delete=function(e){var t=null,a=this.get(e);if(a){var n=a.toJSON();t=c.Delete([e],n),this.apply(t)}return t},this.update=function(e,t){var a=this._getDiffOp(e,t),n=c.Update(e,a);return this.apply(n),n},this.set=function(e,t){var a=this.get(e),n=c.Set(e,a,t);return this.apply(n),n},this.apply=function(e){if(e.type!==c.NOP){if(e.type===c.CREATE)this.super.create.call(this,a.clone(e.val));else if(e.type===c.DELETE)this.super.delete.call(this,e.val.id);else if(e.type===c.UPDATE){var t=this.get(e.path),n=e.diff;if("array"===e.propertyType)n instanceof r||(n=r.fromJSON(n)),n.apply(t);else{if("string"!==e.propertyType)throw new Error("Unsupported type for operational update.");n instanceof s||(n=s.fromJSON(n));var i=n.apply(t);this.super.set.call(this,e.path,i)}}else{if(e.type!==c.SET)throw new Error("Illegal state.");this.super.set.call(this,e.path,e.val)}this.emit("operation:applied",e,this)}},this._getDiffOp=function(e,t){var n=null;if(t.isOperation)n=t;else{var i,c,b,o,d=this.get(e);a.isString(d)?t["delete"]?(i=t["delete"].start,c=t["delete"].end,n=s.Delete(i,d.substring(i,c))):t.insert&&(b=t.insert.offset,o=t.insert.value,n=s.Insert(b,o)):a.isArray(d)&&(t["delete"]?(b=t["delete"].offset,n=r.Delete(b,d[b])):t.insert&&(b=t.insert.offset,o=t.insert.value,n=r.Insert(b,o)))}if(!n)throw new Error("Unsupported diff: "+JSON.stringify(t));return n}},a.inherit(b,n),t.exports=b},{"../basics":124,"../operator":161,"./graph":129}],131:[function(e,t){"use strict";var a={};a.Graph=e("./graph"),a.IncrementalGraph=e("./incremental_graph"),a.Node=e("./node"),a.Schema=e("./schema"),a.Index=e("./node_index"),t.exports=a},{"./graph":129,"./incremental_graph":130,"./node":132,"./node_index":134,"./schema":135}],132:[function(e,t){"use strict";function a(e){n.EventEmitter.call(this),this.properties=n.extend({},this.getDefaultProperties(),e),this.properties.type=this.constructor.static.name,this.properties.id=this.properties.id||n.uuid(this.properties.type)}var n=e("../basics");a.Prototype=function(){this.toJSON=function(){return this.properties},this.getDefaultProperties=function(){},this.isInstanceOf=function(e){return a.static.isInstanceOf(this.constructor,e)},this.getClassNames=function(){for(var e=[],t=this.constructor.static;t&&"node"!==t.name;)e.push(t.name),t=Object.getPrototypeOf(t);return e.join(" ")},this.getPropertyType=function(e){var t=this.constructor.static.schema;return t[e]}},n.inherit(a,n.EventEmitter),a.static.name="node",a.static.schema={type:"string",id:"string"},a.static.readOnlyProperties=["type","id"],a.static.getPropertyType=function(e){return this.schema[e]},a.static.matchFunction=function(){return!1},a.static.isInstanceOf=function(e,t){for(var a=e.static;a&&"node"!==a.name;){if(a&&a.name===t)return!0;a=Object.getPrototypeOf(a)}return!1};var i,c=function(e,t,a){var n,i;n=function(){return this.properties[t]},i=a?function(){throw new Error("Property "+t+" is readonly!")}:function(e){return this.properties[t]=e,this};var c={get:n,set:i};Object.defineProperty(e,t,c)},r=function(e){var t=e.prototype;if(e.static.schema)for(var a=Object.keys(e.static.schema),n=0;n<a.length;n++){var i=a[n];if(!t.hasOwnProperty(i)){var r=e.static.readOnlyProperties&&e.static.readOnlyProperties.indexOf(i)>0;c(t,i,r)}}},s=function(e){var t=e.static.schema,a=Object.getPrototypeOf(e.static),i=a.schema;i&&(e.static.schema=n.extend(Object.create(i),t))},b=function(e){e.extend=n.bind(i,null,e),r(e),s(e),e.type=e.static.name};i=function(e,t){var a=function(){e.apply(this,arguments)};n.inherit(a,e);for(var i in t)if(t.hasOwnProperty(i)){if("name"===i||"properties"===i)continue;a.prototype[i]=t[i]}return a.static.name=t.name,a.static.schema=t.properties,b(a),a},b(a),a.initNodeClass=b,t.exports=a},{"../basics":124}],133:[function(e,t){"use strict";function a(){c.call(this)}var n=e("../basics"),i=e("./node"),c=n.Factory;a.Prototype=function(){this.register=function(e){var t=e.static&&e.static.name;if("string"!=typeof t||""===t)throw new Error("Node names must be strings and must not be empty");if(!(e.prototype instanceof i))throw new Error("Nodes must be subclasses of Substance.Data.Node");this.add(t,e)},this.getClassForHtmlElement=function(e){for(var t=0;t<this.names.length;t++){var a=this.names[t],n=this.get(a);if(n.matchElement){var i=n.matchElement(e);if(i)return i}}return null}},n.inherit(a,c),t.exports=a},{"../basics":124,"./node":132}],134:[function(e,t){"use strict";var a=e("../basics"),n=a.PathAdapter,i=function(){this.index=new n};i.Prototype=function(){this.setGraph=function(e){this.graph=e},this.reset=function(){this.index.clear(),this.initialize()},this.initialize=function(){a.each(this.graph.getNodes(),function(e){this.select(e)&&this.create(e)},this)},this.property="id",this.select=function(e){return this.type?e.isInstanceOf(this.type):!0},this.get=function(e){this.index.get(e);return e?this.index.get(e)||{}:this.getAll()},this.getAll=function(){var e={};return a.each(this.index,function(t){a.extend(e,t)}),e},this.create=function(e){var t=e[this.property];a.isArray(t)||(t=[t]),a.each(t,function(t){this.index.set([t,e.id],e)},this)},this.delete=function(e){var t=e[this.property];a.isArray(t)||(t=[t]),a.each(t,function(t){this.index.delete([t,e.id])},this)},this.update=function(e,t,n,i){if(this.select(e)&&t[1]===this.property){var c=i;a.isArray(c)||(c=[c]),a.each(c,function(t){this.index.delete([t,e.id])},this),c=n,a.isArray(c)||(c=[c]),a.each(c,function(t){this.index.set([t,e.id],e)},this)}},this.clone=function(){var e=this.constructor,t=new e;return t}},a.initClass(i),i.create=function(e){var t=a.extend(new i,e);return t.clone=function(){return i.create(e)},t},t.exports=i},{"../basics":124}],135:[function(e,t){"use strict";function a(e,t){this.name=e,this.version=t,this.nodeFactory=new c,this.addNodes(this.getBuiltIns())}var n=e("../basics"),i=e("./node"),c=e("./node_factory");a.Prototype=function(){function e(e){var t={};return e.static.hasOwnProperty("schema")&&(t.properties=n.clone(e.static.schema)),t}this.addNodes=function(e){if(e)for(var t=0;t<e.length;t++)this.nodeFactory.register(e[t])},this.getNodeClass=function(e){return this.nodeFactory.get(e)},this.getNodeFactory=function(){return this.nodeFactory},this.toJSON=function(){var t={id:this.name,version:this.version,types:{}};return this.nodeFactory.each(function(a,n){t.types[n]=e(a)}),t},this.createNode=function(e,t){var a=this.nodeFactory.create(e,t);return a},this.getBuiltIns=function(){return[i]},this.isInstanceOf=function(e,t){var a=this.getNodeClass(e);return a?i.static.isInstanceOf(a,t):!1},this.each=function(){this.nodeFactory.each.apply(this.nodeFactory,arguments)}},n.initClass(a),t.exports=a},{"../basics":124,"./node":132,"./node_factory":133}],136:[function(e,t){"use strict";var a=e("../basics"),n=e("./node"),i=e("./selection"),c=n.extend({name:"annotation",properties:{path:["array","string"],startOffset:"number",endOffset:"number"},canSplit:function(){return!0},getSelection:function(){return i.create(this.path,this.startOffset,this.endOffset)},updateRange:function(e,t){if(!t.isPropertySelection())throw new Error("Cannot change to ContainerAnnotation.");a.isEqual(this.startPath,t.start.path)||e.set([this.id,"path"],t.start.path),this.startOffset!==t.start.offset&&e.set([this.id,"startOffset"],t.start.offset),this.endOffset!==t.end.offset&&e.set([this.id,"endOffset"],t.end.offset)}});Object.defineProperties(c.prototype,{startPath:{get:function(){return this.path}},endPath:{get:function(){return this.path}}}),t.exports=c},{"../basics":124,"./node":152,"./selection":156}],137:[function(e,t){"use strict";var a=e("../basics"),n=a.PathAdapter,i=e("../data"),c=e("./annotation"),r=function(){this.byPath=new n,this.byType=new n};r.Prototype=function(){this.property="path",this.select=function(e){return e instanceof c},this.reset=function(){this.byPath.clear(),this.byType.clear(),this.initialize()},this.get=function(e,t,n,i){var c=this.byPath.get(e)||{};if(a.isString(e)||1===e.length){var s=c;c=[],a.each(s,function(e){c=c.concat(a.map(e,function(e){return e}))})}else c=a.map(c,function(e){return e});return null!=t&&(c=a.filter(c,r.filterByRange(t,n))),i&&(c=a.filter(c,r.filterByType(i))),c},this.create=function(e){this.byType.set([e.type,e.id],e),this.byPath.set(e.path.concat([e.id]),e)},this.delete=function(e){this.byType.delete([e.type,e.id]),this.byPath.delete(e.path.concat([e.id]))},this.update=function(e,t,a,n){this.select(e)&&t[1]===this.property&&(this.delete({id:e.id,type:e.type,path:n}),this.create(e))}},a.inherit(r,i.Index),r.filterByRange=function(e,t){return function(a){var n=a.startOffset,i=a.endOffset,c=i>=e;return null!=t&&(c=c&&t>=n),c}},r.filterByType=function(e){return function(t){return t.isInstanceOf(e)}},t.exports=r},{"../basics":124,"../data":131,"./annotation":136}],138:[function(e,t){"use strict";var a=e("../basics"),n=function(e,t,n){if(n){var i=e.getIndex("annotations"),c=i.get(t.path);a.each(c,function(a){var i=t.offset,c=a.startOffset,r=a.endOffset,s=c,b=r;(c>i||i===c&&!t.after)&&(s+=n),(r>i||i===r&&!t.after)&&(b+=n),s!==c&&e.set([a.id,"startOffset"],s),b!==r&&e.set([a.id,"endOffset"],b)}),i=e.getIndex("container-annotations");var r=i.get(t.path);a.each(r,function(a){var i=t.offset,c=a.offset,r=!1;if((c>i||i===c&&!t.after)&&(c+=n,r=!0),r){var s=a.isStart?"startOffset":"endOffset";e.set([a.id,s],c)}})}},i=function(e,t,n,i){if(n!==i){var c=e.getIndex("annotations"),r=c.get(t),s=i-n;a.each(r,function(t){var a=n,c=i,r=t.startOffset,b=t.endOffset,o=r,d=b;r>=c?(o-=s,d-=s,e.set([t.id,"startOffset"],o),e.set([t.id,"endOffset"],d)):(r>=a&&(o=r-Math.min(c-a,r-a)),b>=a&&(d=b-Math.min(c-a,b-a)),r!==b&&o===d?e.delete(t.id):(r!==o&&e.set([t.id,"startOffset"],o),b!==d&&e.set([t.id,"endOffset"],d)))
}),c=e.getIndex("container-annotations");var b=c.get(t),o=[];a.each(b,function(t){o.push(t.id);var a=n,c=i,r=t.offset,b=!1;if(r>=c)r-=s,b=!0;else if(r>=a){var d=r-Math.min(c-a,r-a);r!==d&&(r=d,b=!0)}if(b){var f=t.isStart?"startOffset":"endOffset";e.set([t.id,f],r)}}),a.each(a.uniq(o),function(t){var a=e.get(t),n=a.getSelection();n.isCollapsed()&&(console.log("...deleting container annotation because it has collapsed"+t),e.delete(t))})}},c=function(e,t,n,i,c){var r=e.getIndex("annotations"),s=r.get(t,n);a.each(s,function(t){var r,s,b=n>t.startOffset&&n<t.endOffset,o=t.startOffset,d=t.endOffset;if(b){if(t.canSplit()){var f=a.clone(t.properties);f.id=a.uuid(t.type+"_"),f.startOffset=c,f.endOffset=c+t.endOffset[1]-n,f.path=i,e.create(f)}r=t.startOffset,s=n,s===r?e.delete(t.id):(r!==o&&e.set([t.id,"startOffset"],r),s!==d&&e.set([t.id,"endOffset"],s))}else t.startOffset>=n&&(r=c+t.startOffset-n,s=c+t.endOffset-n,e.set([t.id,"path"],i),e.set([t.id,"startOffset"],r),e.set([t.id,"endOffset"],s))}),r=e.getIndex("container-annotations");var b=r.get(t),o=[];a.each(b,function(t){o.push(t.id);var a=t.offset;if(a>=n){var r=t.isStart?"startPath":"endPath",s=t.isStart?"startOffset":"endOffset";e.set([t.id,r],i),e.set([t.id,s],c+t.offset-n)}}),a.each(a.uniq(o),function(t){var a=e.get(t),n=a.getSelection();n.isCollapsed()&&(console.log("...deleting container annotation because it has collapsed"+t),e.delete(t))})};t.exports={insertedText:n,deletedText:i,transferAnnotations:c}},{"../basics":124}],139:[function(e,t){"use strict";var a=e("../basics"),n=1,i=-1,c=-2,r=function(e){a.extend(this,e)};r.Prototype=function(){var e=function(e,t){if(e.pos<t.pos)return-1;if(e.pos>t.pos)return 1;if(e.id===t.id)return t.mode-e.mode;if(e.mode<t.mode)return-1;if(e.mode>t.mode)return 1;if(e.mode===n){if(e.level<t.level)return-1;if(e.level>t.level)return 1}if(e.mode===i){if(e.level>t.level)return-1;if(e.level<t.level)return 1}return 0},t=function(e){var t=[];return a.each(e,function(e){if(e.zeroWidth)t.push({pos:e.offset,mode:c,id:e.id,level:Number.MAX_VALUE,type:"anchor",node:e});else{var a=e.constructor.static.level||1e3;t.push({pos:e.startOffset,mode:n,level:a,id:e.id,type:e.type,node:e}),t.push({pos:e.endOffset,mode:i,level:a,id:e.id,type:e.type,node:e})}}),t};this.onText=function(){},this.onEnter=function(){return null},this.onExit=function(){},this.enter=function(e,t){return this.onEnter(e,t)},this.exit=function(e,t,a){this.onExit(e,t,a)},this.createText=function(e,t){t.length>0&&this.onText(e,t)},this.start=function(a,r,s){var b=this,o=t.call(this,s);o.sort(e.bind(this));for(var d=[{context:a,entry:null}],f=0,p=0;p<o.length;p++){var l=o[p];this.createText(d[d.length-1].context,r.substring(f,l.pos)),f=l.pos;var u,h;if(l.mode===n||l.mode===c){for(u=1;u<d.length&&!(l.level<d[u].entry.level);u++);for(h=u;h<d.length;h++)this.exit(d[h].entry,d[h].context,d[h-1].context);for(d.splice(u,0,{entry:l}),h=u;h<d.length;h++)d[h].context=b.enter(d[h].entry,d[h-1].context)}if(l.mode===i||l.mode===c){for(u=1;u<d.length&&d[u].entry.node!==l.node;u++);for(h=u;h<d.length;h++)this.exit(d[h].entry,d[h].context,d[h-1].context);for(d.splice(u,1),h=u;h<d.length;h++)d[h].context=b.enter(d[h].entry,d[h-1].context)}}this.createText(a,r.substring(f))}},a.initClass(r),t.exports=r},{"../basics":124}],140:[function(e,t){"use strict";function a(){c.apply(this,arguments),this.components=[],this.nodeComponents={},this.byPath=new i({})}var n=e("../basics"),i=n.PathAdapter,c=e("./node");a.Prototype=function(){this.getPosition=function(e){var t=this.nodes.indexOf(e);return t},this.show=function(e,t){var a=this.getDocument();null==t&&(t=this.nodes.length),a.update([this.id,"nodes"],{insert:{offset:t,value:e}})},this.hide=function(e){var t=this.getDocument(),a=this.nodes.indexOf(e);a>=0?t.update([this.id,"nodes"],{"delete":{offset:a}}):console.error("Could not find node with id %s.",e)},this.getComponent=function(e){var t=this.byPath.get(e);return t},this.getComponentsForRange=function(e){var t=[],a=this.byPath.get(e.start.path),n=this.byPath.get(e.end.path),i=a.getIndex(),c=n.getIndex();t.push(a);for(var r=i+1;c>=r;r++)t.push(this.getComponentAt(r));return t},this.getComponentAt=function(e){return this.components[e]},this.getFirstComponent=function(){return this.components[0]},this.getLastComponent=function(){return n.last(this.components)},this.getComponentsForNode=function(e){var t=this.nodeComponents[e];return t?t.components.slice(0):void 0},this.getAnnotationFragments=function(e){var t=[],a=e.getDocument(),i=e,c=i.getStartAnchor(),r=i.getEndAnchor();if(n.isEqual(c.path,r.path))t.push({id:i.id,path:c.path,startOffset:c.offset,endOffset:r.offset});else{var s=a.get(c.path),b=this.getComponent(c.path),o=this.getComponent(r.path);if(!b||!o)throw new Error("Could not find components of AbstractContainerAnnotation");t.push({path:c.path,id:i.id,startOffset:c.offset,endOffset:s.length});for(var d=b.idx+1;d<o.idx;d++){var f=this.getComponentAt(d);s=a.get(f.path),t.push({path:f.path,id:i.id,startOffset:0,endOffset:s.length})}t.push({path:r.path,id:i.id,startOffset:0,endOffset:r.offset})}return t},this.reset=function(){this.byPath=new n.PathAdapter;var t=this.getDocument(),a=[];n.each(this.nodes,function(n){var i=t.get(n);a=a.concat(e(i))},this),this.components=[],this.nodeComponents={},this._insertComponentsAt(0,a),this._updateComponentPositions(0)},this.update=function(e){if(e.path[0]===this.id&&"nodes"===e.path[1])if("set"===e.type)this.reset();else{var t=e.diff;if(t.isInsert()){var a=this._handleInsert(t.getValue(),t.getOffset());this._updateComponentPositions(a)}else{if(!t.isDelete())throw new Error("Illegal state");var n=this._handleDelete(t.getValue());this._updateComponentPositions(n)}}},this.updateNode=function(t){var a=this.getDocument().get(t),n=this._handleDelete(t),i=e(a);this._insertComponentsAt(n,i),this._updateComponentPositions(n)},this._insertComponentsAt=function(e,t){for(var n=this.components[e-1],i=this.components[e],c=this.nodeComponents,r=this.byPath,s=0;s<t.length;s++){var b=t[s],o=b.rootId,d=c[o];d||(d=new a.NodeComponent(o),c[o]=d),b.parentNode=d,0===s&&n?(n.next=b,b.previous=n):s>0&&(b.previous=t[s-1],t[s-1].next=b),d.components.push(b),r.set(b.path,b)}i&&(t[t.length-1].next=i,i.previous=t[t.length-1]),this.components.splice.apply(this.components,[e,0].concat(t))},this._updateComponentPositions=function(e){for(var t=e;t<this.components.length;t++)this.components[t].idx=t},this._handleInsert=function(t,a){var n,i=this.getDocument(),c=i.get(t),r=this.nodes.length;if(a===r-1)n=this.components.length;else{var s=this.nodes[a+1],b=this.nodeComponents[s].components[0];n=b.getIndex()}var o=e(c);return this._insertComponentsAt(n,o),n},this._handleDelete=function(e){var t=this.nodeComponents,a=t[e],i=a.components[0].getIndex(),c=n.last(a.components).getIndex();return this.components.splice(i,c-i+1),this.components.length>i&&(this.components[i].previous=this.components[i-1]),i>0&&(this.components[i-1].next=this.components[i]),i};var e=function(t,i){i=i||t;for(var c,r=[],s=t.getComponents(),b=0;b<s.length;b++){var o=s[b],d=t.getPropertyType(o);if("string"===d){var f=[t.id,o];r.push(new a.Component(f,i.id))}else if("id"===d){var p=t[o];c=t.getDocument().get(p),r=r.concat(e(c,i))}else{if(!n.isEqual(d,["array","id"]))throw new Error("Not yet implemented.");for(var l=t[o],u=0;u<l.length;u++)c=t.getDocument().get(l[u]),r=r.concat(e(c,i))}}return r}},n.inherit(a,c),a.static.name="container",a.static.schema={nodes:["array","string"]},c.initNodeClass(a),a.Component=function(e,t){this.path=e,this.rootId=t,this.idx=-1,this.parentNode=null,this.previous=null,this.next=null},a.Component.Prototype=function(){this.hasPrevious=function(){return!!this.previous},this.getPrevious=function(){return this.previous},this.hasNext=function(){return!!this.next},this.getNext=function(){return this.next},this.getIndex=function(){return this.idx},this.getParentNode=function(){return this.parentNode}},n.initClass(a.Component),a.NodeComponent=function(e){this.id=e,this.components=[]},n.initClass(a.NodeComponent),t.exports=a},{"../basics":124,"./node":152}],141:[function(e,t){"use strict";var a=e("../basics"),n=e("./node"),i=e("./selection"),c=n.extend({name:"container_annotation",properties:{container:"string",startPath:["array","string"],startOffset:"number",endPath:["array","string"],endOffset:"number"},getStartAnchor:function(){return this._startAnchor||(this._startAnchor=new c.Anchor(this,"isStart")),this._startAnchor},getEndAnchor:function(){return this._endAnchor||(this._endAnchor=new c.Anchor(this)),this._endAnchor},getSelection:function(){var e=this.getDocument().get(this.container);return i.create(e,this.startPath,this.startOffset,this.endPath,this.endOffset)},updateRange:function(e,t){if(!t.isContainerSelection())throw new Error("Cannot change to ContainerAnnotation.");a.isEqual(this.startPath,t.start.path)||e.set([this.id,"startPath"],t.start.path),this.startOffset!==t.start.offset&&e.set([this.id,"startOffset"],t.start.offset),a.isEqual(this.endPath,t.end.path)||e.set([this.id,"endPath"],t.end.path),this.endOffset!==t.end.offset&&e.set([this.id,"endOffset"],t.end.offset)}});c.Anchor=function(e,t){this.node=e,this.id=e.id,this.container=e.container,this.isStart=!!t,Object.freeze(this)},c.Anchor.Prototype=function(){this.zeroWidth=!0,this.getClassNames=function(){return this.node.getClassNames()+" anchor "+(this.isStart?"start-anchor":"end-anchor")}},a.initClass(c.Anchor),Object.defineProperties(c.Anchor.prototype,{path:{get:function(){return this.isStart?this.node.startPath:this.node.endPath},set:function(){throw new Error("Immutable!")}},offset:{get:function(){return this.isStart?this.node.startOffset:this.node.endOffset},set:function(){throw new Error("Immutable!")}}}),t.exports=c},{"../basics":124,"./node":152,"./selection":156}],142:[function(e,t){"use strict";var a=e("../basics"),n=a.PathAdapter,i=e("../data"),c=e("./container_annotation"),r=function(e){this.doc=e,this.byPath=new n.Arrays,this.byId={}};r.Prototype=function(){this.select=function(e){return e instanceof c},this.reset=function(){this.byPath.clear(),this.byId={},this.initialize()},this.get=function(e,t){var n=this.byPath.get(e)||[];if(!a.isArray(n)){var i=[];this.byPath._traverse(n,[],function(e){i=i.concat(e)}),n=i}return t?a.filter(n,function(e){return e.container===t}):n.slice(0)},this.create=function(e){var t=e.getStartAnchor(),a=e.getEndAnchor();this.byPath.add(t.path,t),this.byPath.add(a.path,a),this.byId[e.id]=e},this.delete=function(e){var t=e.getStartAnchor(),a=e.getEndAnchor();this.byPath.remove(t.path,t),this.byPath.remove(a.path,a),delete this.byId[e.id]},this.update=function(e,t,a,n){if(this.select(e)){var i=null;if("startPath"===t[1])i=e.getStartAnchor();else{if("endPath"!==t[1])return;i=e.getEndAnchor()}this.byPath.remove(n,i),this.byPath.add(i.path,i)}}},a.inherit(r,i.Index),t.exports=r},{"../basics":124,"../data":131,"./container_annotation":141}],143:[function(e,t){"use strict";function a(e,t,a){if(!(e instanceof r))throw new Error("Illegal argument: expected Container instance.");this.container=e,this.range=t,this.reverse=a,this.collapsed=t.start.equals(t.end),this._internal={},Object.freeze(this)}var n=e("../basics"),i=e("./property_selection"),c=e("./selection"),r=e("./container");a.Prototype=function(){this.isPropertySelection=function(){return!1},this.isContainerSelection=function(){return!0},this.toString=function(){return"ContainerSelection("+JSON.stringify(this.range.start.path)+":"+this.range.start.offset+" -> "+JSON.stringify(this.range.end.path)+":"+this.range.end.offset+(this.reverse?", reverse":"")+")"},this.expand=function(t){var a=e(this.container,this),i=e(this.container,t),c=a.start,r=i.start,s=a.end,b=i.end,o={start:{pos:c.pos,offset:c.offset},end:{pos:s.pos,offset:s.offset}};return c.pos>r.pos?(o.start.pos=r.pos,o.start.offset=r.offset):c.pos===r.pos&&(o.start.offset=Math.min(c.offset,r.offset)),s.pos<b.pos?(o.end.pos=b.pos,o.end.offset=b.offset):s.pos===b.pos&&(o.end.offset=Math.max(s.offset,b.offset)),n(this.container,o)},this.truncate=function(i){var r=e(this.container,this),s=e(this.container,i),b={};if(t(s.start,r.start,"strict"))b.start=r.start,b.end=s.end;else if(t(r.end,s.end,"strict"))b.start=s.start,b.end=r.end;else if(a(r.start,s.start)){if(a(r.end,s.end))return c.nullSelection;b.start=s.end,b.end=r.end}else a(r.end,s.end)&&(b.start=r.start,b.end=s.start);return n(this.container,b)},this.isInsideOf=function(a,n){if(a.isNull())return!1;var i=e(this.container,this),c=e(this.container,a);return t(c.start,i.start,n)&&t(i.end,c.end,n)},this.contains=function(a){var n=e(this.container,this),i=e(this.container,a);return t(n.start,i.start)&&t(i.end,n.end)},this.includesWithOneBoundary=function(n){var i=e(this.container,this),c=e(this.container,n);return a(i.start,c.start)&&t(c.end,i.end)||a(i.end,c.end)&&t(i.start,c.start)},this.overlaps=function(a){var n=e(this.container,this),i=e(this.container,a);return!(t(n.end,i.start)||t(i.end,n.start))},this.isLeftAlignedWith=function(t){var n=e(this.container,this),i=e(this.container,t);return a(n.start,i.start)},this.isRightAlignedWith=function(t){var n=e(this.container,this),i=e(this.container,t);return a(n.end,i.end)};var e=function(e,t){if(t._internal.coor)return t._internal.coor;var a,n=t.getRange(),i=e.getComponent(n.start.path).getIndex();a=t.isCollapsed()?i:e.getComponent(n.end.path).getIndex();var c={start:{pos:i,offset:n.start.offset},end:{pos:a,offset:n.end.offset},collapsed:t.isCollapsed()};return t._internal.coor=c,c},t=function(e,t,a){return a?e.pos>=t.pos?!1:e.pos==t.pos&&e.offset>=t.offset?!1:!0:e.pos>t.pos?!1:e.pos==t.pos&&e.offset>t.offset?!1:!0},a=function(e,t){return e.pos===t.pos&&e.offset===t.offset},n=function(e,t){return t.start.path=e.getComponentAt(t.start.pos).path,t.end.path=e.getComponentAt(t.end.pos).path,c.create(e,t.start.path,t.start.offset,t.end.path,t.end.offset)}},n.inherit(a,i),Object.defineProperties(a.prototype,{path:{get:function(){throw new Error("ContainerSelection has not path property. Use startPath and endPath instead")},set:function(){throw new Error("immutable.")}},startPath:{get:function(){return this.range.start.path},set:function(){throw new Error("immutable.")}},endPath:{get:function(){return this.range.end.path},set:function(){throw new Error("immutable.")}}}),t.exports=a},{"../basics":124,"./container":140,"./property_selection":154,"./selection":156}],144:[function(e,t){"use strict";function a(e,t,a){this.path=e,this.offset=t,this.after=a,Object.freeze(e),Object.freeze(this)}var n=e("../basics");a.Prototype=function(){this.equals=function(e){return e===this||n.isArrayEqual(e.path,this.path)&&e.offset===this.offset},this.withCharPos=function(e){return new a(this.path,e)},this.getNodeId=function(){return this.path[0]}},n.initClass(a),t.exports=a},{"../basics":124}],145:[function(e,t){var a=e("../basics"),n=e("./property_selection"),i=e("./container_selection"),c=e("./coordinate"),r=e("./range");t.exports=function(){var e,t,s,b,o,d,f,p,l=arguments;if(l[0]instanceof r)return a.isBoolean(l[1])&&(p=l[1]),new n(l[0],p);if(l[0]instanceof c)return a.isBoolean(l[1])&&(p=l[1]),new n(new r(l[0],l[0]),p);if(l.length<5){if(t=l[0],s=o=l[1],d=f=new c(t,s),l.length>2&&(a.isBoolean(l[2])?(o=s,p=l[2]):a.isNumber(l[2])&&(o=l[2],p=!!l[3],f=new c(t,o))),null==t||null==s||null==o)throw new Error("Illegal arguments: expected (path, offset [, reverse]) or (path, startOffset, endOffset[, reverse])");return new n(new r(d,f))}if(!(a.isArray(arguments[1])&&a.isNumber(arguments[2])&&a.isArray(arguments[3])&&a.isNumber(arguments[4])))throw new Error("Illegal arguments: expected (startPath, startOffset, endPath, endOffset)");return e=arguments[0],t=arguments[1],s=arguments[2],b=arguments[3],o=arguments[4],p=!!arguments[5],d=new c(t,s),f=a.isArrayEqual(t,b)?new c(t,o):new c(b,o),new i(e,new r(d,f))}},{"../basics":124,"./container_selection":143,"./coordinate":144,"./property_selection":154,"./range":155}],146:[function(e,t){"use strict";function a(e,t){n.EventEmitter.call(this),this.schema=e,this.seed=t,this.data=new i.IncrementalGraph(e,{seed:t,didCreateNode:n.bind(this._didCreateNode,this),didDeleteNode:n.bind(this._didDeleteNode,this)}),this.nodeIndex=this.addIndex("type",n.Data.Index.create({property:"type"})),this.annotationIndex=this.addIndex("annotations",new c),this.containerAnnotationIndex=this.addIndex("container-annotations",new r),this.stage=new s(this),this.isTransacting=!1,this.done=[],this.undone=[],this.eventProxies={path:new o(this)},this.containers=this.getIndex("type").get("container"),n.each(this.containers,function(e){e.reset()})}var n=e("../basics"),i=e("../data"),c=e("./annotation_index"),r=e("./container_annotation_index"),s=e("./transaction_document"),b=e("./document_change"),o=e("./notify_property_change");a.Prototype=function(){this.newInstance=function(){return new a(this.schema)},this.fromSnapshot=function(e){return new a(this.schema,e)},this.getSchema=function(){return this.schema},this.get=function(e){return this.data.get(e)},this.getNodes=function(){return this.data.getNodes()},this.addIndex=function(e,t){return this.data.addIndex(e,t)},this.getIndex=function(e){return this.data.getIndex(e)},this.getEventProxy=function(e){return this.eventProxies[e]},this.toJSON=function(){return{schema:[this.schema.name,this.schema.version],nodes:this.getNodes()}},this.startTransaction=function(e){if(this.isTransacting)throw new Error("Nested transactions are not supported.");return this.isTransacting=!0,this.stage.before=e||{},this.emit("transaction:started",this.stage),this.stage},this.create=function(e){if(this.isTransacting)this.stage.create(e);else{var t=this.stage.create(e);this.data.create(e),this._updateContainers(t)}return this.data.get(e.id)},this.delete=function(e){if(this.isTransacting)this.stage.delete(e);else{var t=this.stage.delete(e);this.data.delete(e),this._updateContainers(t)}},this.set=function(e,t){if(this.isTransacting)this.stage.set(e,t);else{var a=this.stage.set(e,t);this.data.set(e,t),this._updateContainers(a)}},this.update=function(e,t){if(this.isTransacting)this.stage.update(e,t);else{var a=this.stage.update(e,t);this.data.update(e,t),this._updateContainers(a)}},this._saveTransaction=function(e,t,a){if(!this.isTransacting)throw new Error("Not in a transaction.");this.isTransacting=!1;var n=this.stage.getOperations(),i=new b(n,e,t);this._apply(i,"skipStage"),this.done.push(i),this.undone=[],this._notifyChangeListeners(i,a)},this._cancelTransaction=function(){if(!this.isTransacting)throw new Error("Not in a transaction.");this.isTransacting=!1},this.undo=function(){var e=this.done.pop();if(e){var t=e.invert();this._apply(t),this.undone.push(t),this._notifyChangeListeners(t,{replay:!0})}else console.error("No change can be undone.")},this.redo=function(){var e=this.undone.pop();if(e){var t=e.invert();this._apply(t),this.done.push(t),this._notifyChangeListeners(t,{replay:!0})}else console.error("No change can be redone.")},this.getAnnotationsForSelection=function(e,t){t=t||{};var a,i,r,s;return e.isPropertySelection()?(i=e.getPath(),r=e.getStartOffset(),s=e.getEndOffset(),a=this.annotationIndex.get(i,r,s),t.type&&(a=n.filter(a,c.filterByType(t.type))),a):[]},this.getContainerAnnotationsForSelection=function(e,t,a){if(!t)return[];var i;return i=a.type?this.getIndex("type").get(a.type):this.getIndex("container-annotations").byId,i=n.filter(i,function(t){var a=t.getSelection();return e.overlaps(a)})},this._didCreateNode=function(e){e.attach(this)},this._didDeleteNode=function(e){e.detach(this)},this._updateContainers=function(e){var t=this.containers;n.each(t,function(t){t.update(e)})},this._apply=function(e,t){if(this.isTransacting)throw new Error("Can not replay a document change during transaction.");"skipStage"!==t&&this.stage.apply(e),n.each(e.ops,function(e){this.data.apply(e),this._updateContainers(e)},this)},this._notifyChangeListeners=function(e,t){t=t||{},n.each(this.eventProxies,function(a){a.onDocumentChanged(e,t)}),this.emit("document:changed",e,t)}},n.inherit(a,n.EventEmitter),Object.defineProperty(a.prototype,"id",{get:function(){return this.get("document").guid},set:function(){throw new Error("Id is an immutable property.")}}),t.exports=a},{"../basics":124,"../data":131,"./annotation_index":137,"./container_annotation_index":142,"./document_change":147,"./notify_property_change":153,"./transaction_document":158}],147:[function(e,t){"use strict";function a(e,t,a){this.id=n.uuid(),this.ops=e.slice(0),this.before=t,this.after=a,this.updated=null,this._init(),Object.freeze(this),Object.freeze(this.ops),Object.freeze(this.before),Object.freeze(this.after),Object.freeze(this.updated)}var n=e("../basics"),i=n.PathAdapter;a.Prototype=function(){this._init=function(){var e,t=this.ops,a={},n={},c=new i({});for(e=0;e<t.length;e++){var r=t[e];"create"===r.type&&(a[r.val.id]=r.val,delete n[r.val.id]),"delete"===r.type&&(delete a[r.val.id],delete c[r.val.id],n[r.val.id]=r.val),("set"===r.type||"update"===r.type)&&c.set(r.path,!0)}this.created=a,this.deleted=n,this.updated=c},this.isAffected=function(e){return!!this.updated.get(e)},this.invert=function(){for(var e=[],t=this.ops.length-1;t>=0;t--)e.push(this.ops[t].invert());var n=this.after,i=this.before;return new a(e,n,i)},this.traverse=function(e,t){this.updated.traverse(function(){e.apply(t,arguments)})}},n.initClass(a),t.exports=a},{"../basics":124}],148:[function(e,t){"use strict";function a(e,t){a.super.call(this,e,t)}var n=e("../basics"),i=e("../data"),c=e("./node"),r=e("./annotation"),s=e("./container"),b=e("./container_annotation"),o=e("./text_node");a.Prototype=function(){this.isAnnotationType=function(e){var t=this.getNodeClass(e);return t&&t.prototype instanceof r},this.getBuiltIns=function(){return[c,r,s,b,o]}},n.inherit(a,i.Schema),t.exports=a},{"../basics":124,"../data":131,"./annotation":136,"./container":140,"./container_annotation":141,"./node":152,"./text_node":157}],149:[function(e,t){"use strict";function a(e){this.config=e||{}}var n=e("../basics"),i=e("./annotator");a.Prototype=function(){this.toHtml=function(e,t){t={}||t;for(var a=t.containers||["content"],n={document:e,options:t,output:[]},i=0;i<a.length;i++){var c=e.get(a[i]);this.container(n,c)}return n.output.join("")},this.container=function(e,t){for(var a=t.nodes,n=0;n<a.length;n++){var i=e.document.get(a[n]);switch(i.type){case"heading":return this.heading(e,i);case"text":return this.text(e,i);default:console.error("Not yet implemented: ",i.type,i)}}},this.heading=function(e,t){var a="h"+t.level;e.output.push("<"+a+">"),this.annotatedText(e,[t.id,"content"]),e.output.push("</"+a+">")},this.text=function(e,t){e.output.push("<p>"),this.annotatedText(e,[t.id,"content"]),e.output.push("</p>")},this.annotatedText=function(e,t){var a=e.document,n=a.get(t),c=a.getIndex("annotations").get(t),r=new i,s=[];r.onText=function(t,a){e.output.push(a)},r.onEnter=function(t){var n=a.get(t.id);switch(n.type){case"strong":e.output.push("<b>");break;case"emphasis":e.output.push("<i>");break;case"entity_reference":e.output.push('<span class="'+n.type+'" data-target="'+n.target+'">');break;case"subject_reference":e.output.push('<span class="'+n.type+'" data-target="'+n.target.join(",")+'">');break;default:e.output.push('<span class="'+n.type),console.error("Not yet supported:",n.type,n)}return s.push(n),n},r.onExit=function(){var t=s.pop();switch(t.type){case"strong":e.output.push("</b>");break;case"emphasis":break;default:console.error("Not yet supported:",t.type,t)}},r.start(null,n,c)}},n.initClass(a),t.exports=a},{"../basics":124,"./annotator":139}],150:[function(e,t){function a(e){this.config=e||{},this.nodeTypes=[],this.blockTypes=[],this.inlineTypes=[],e.schema&&e.schema.each(function(e){e.static.matchElement&&(this.nodeTypes.push(e),e.static.blockType?this.blockTypes.push(e):this.inlineTypes.push(e))},this)}var n=e("../basics");a.Prototype=function(){this.defaultConverter=function(){console.warn("This element is not handled by the converters you provided. This is the default implementation which just skips conversion. Override HtmlImporter.defaultConverter(el, converter) to change this behavior.")},this.initialize=function(e,t){var a={doc:e,rootEl:t,inlineNodes:[],trimWhitespaces:!!this.config.trimWhitespaces,contexts:[],reentrant:null,lastChar:"",skipTypes:{},ignoreAnnotations:!1};e.get("content")||e.create({type:"container",id:"content",nodes:[]}),a.containerNode=e.get("content"),this.state=a},this.convert=function(e,t){this.initialize(t,e),this.body(e);for(var a=0;a<this.state.inlineNodes.length;a++)t.create(this.state.inlineNodes[a])},this.convertDocument=function(e,t){var a=e.getElementsByTagName("body")[0];a=this.sanitizeHtmlDoc(a),console.log("Sanitized html:",a.innerHTML),this.initialize(t,a),this.body(a);for(var n=0;n<this.state.inlineNodes.length;n++)t.create(this.state.inlineNodes[n])},this.sanitizeHtmlDoc=function(e){var t=e,a=e.querySelector("b > p");return a?a.parentNode:t},this.convertElement=function(e){var t=this.state.doc,a=this._getNodeTypeForElement(e);if(!a)throw console.error("Could not find a node class associated to element",e),new Error("Could not find a node class associated to element");var i=a.static.fromHtml(e,this);return i.type=a.static.name,i.id=i.id||n.uuid(i.type),t.create(i),i},this.body=function(e){for(var t=this.state,i=t.doc,c=t.containerNode,r=new a.ChildNodeIterator(e);r.hasNext();){var s,b=r.next(),o=this._getBlockTypeForElement(b);if(o){if(s=o.static.fromHtml(b,this),!s)throw new Error("Contract: a Node's fromHtml() method must return a node");s.type=o.static.name,s.id=s.id||n.uuid(s.type),i.create(s),c.show(s.id)}else if(b.nodeType===window.Node.COMMENT_NODE);else if(b.nodeType===window.Node.TEXT_NODE){var d=b.textContent;/\s*/.exec(d)||console.warn("Skipping text-node on block level with content:",d)}else if(b.nodeType===window.Node.ELEMENT_NODE&&(s=this.defaultConverter(b,this))){if(!s.type)throw new Error("Contract: Html.defaultConverter() must return a node with type.");s.id=s.id||n.uuid(s.type),i.create(s),c.show(s.id)}}},this.annotatedText=function(e,t,n){n=n||{};var i=this.state;if(t){if(i.reentrant)throw new Error("Contract: it is not allowed to bind a new call annotatedText to a path while the previous has not been completed.");i.contexts.push({path:t}),i.reentrant={offset:n.offset||0,text:""}}var c=new a.ChildNodeIterator(e),r=this._annotatedText(c);return t&&(i.contexts.pop(),i.reentrant=null),r},this._annotatedText=function(e){var t=this.state,a=t.contexts[t.contexts.length-1],i=t.reentrant,c="";if(!i)throw new Error("Illegal state: state.reentrant is null.");for(;e.hasNext();){var r=e.next();if(r.nodeType===window.Node.TEXT_NODE){var s=this._prepareText(t,r.textContent);s.length&&(c=c.concat(s),i.offset+=s.length)}else{if(r.nodeType===window.Node.COMMENT_NODE)continue;if(r.nodeType===window.Node.ELEMENT_NODE){var b=this._getInlineTypeForElement(r);if(!b){var o=this._getInlineTypeForElement(r);if(o)throw new Error("Expected inline element. Found block element:",r);console.warn("Unsupported inline element. We will not create an annotation for it, but process its children to extract annotated text.",r),c=c.concat(this.annotatedText(r));continue}var d,f=i.offset;if(b.static.fromHtml){if(d=b.static.fromHtml(r,this),!d)throw new Error("Contract: a Node's fromHtml() method must return a node")}else d={},c=c.concat(this.annotatedText(r));var p=i.offset;d.type=b.static.name,d.id=b.id||n.uuid(d.type),d.startOffset=f,d.endOffset=p,d.path=a.path.slice(0),t.inlineNodes.push(d)}else{console.warn("Unknown element type. Taking plain text. NodeTyp=%s",r.nodeType,r);var s=this._prepareText(t,r.textContent);c=c.concat(s)}}}return c},this.getCurrentPath=function(){var e=this.state.contexts[this.state.contexts.length-1];return e.path},this._getBlockTypeForElement=function(e){if(!e.tagName)return null;for(var t=0;t<this.blockTypes.length;t++)if(this.blockTypes[t].static.matchElement(e))return this.blockTypes[t]},this._getInlineTypeForElement=function(e){for(var t=0;t<this.inlineTypes.length;t++)if(this.inlineTypes[t].static.matchElement(e))return this.inlineTypes[t]},this._getNodeTypeForElement=function(e){for(var t=0;t<this.nodeTypes.length;t++)if(this.nodeTypes[t].static.matchElement(e))return this.nodeTypes[t]},this._getDomNodeType=function(e){if(e.nodeType===window.Node.TEXT_NODE)return"text";if(e.nodeType===window.Node.COMMENT_NODE)return"comment";if(e.tagName)return e.tagName.toLowerCase();throw new Error("Unknown node type")};var e=/^\s+/g,t=/^\s*/g,i=/\s+$/g,c=/\s+/g,r=" ",s=/[\t\n\r]+/g;this._prepareText=function(a,n){return a.trimWhitespaces?(n=n.replace(s,r),n=a.lastChar===r?n.replace(t,r):n.replace(e,r),n=n.replace(i,r),this.config.REMOVE_INNER_WS&&(n=n.replace(c,r)),a.lastChar=n[n.length-1]||a.lastChar,n):n}},a.prototype=new a.Prototype,a.ChildNodeIterator=function(e){this.nodes=e.childNodes,this.length=this.nodes.length,this.pos=-1},a.ChildNodeIterator.Prototype=function(){this.hasNext=function(){return this.pos<this.length-1},this.next=function(){return this.pos+=1,this.nodes[this.pos]},this.back=function(){return this.pos>=0&&(this.pos-=1),this}},a.ChildNodeIterator.prototype=new a.ChildNodeIterator.Prototype,t.exports=a},{"../basics":124}],151:[function(e,t){"use strict";var a=e("./document");a.Schema=e("./document_schema"),a.Node=e("./node"),a.Annotation=e("./annotation"),a.Container=e("./container"),a.ContainerAnnotation=e("./container_annotation"),a.TextNode=e("./text_node"),a.Coordinate=e("./coordinate"),a.Range=e("./range"),a.Selection=e("./selection"),a.Selection.create=e("./create_selection"),a.nullSelection=a.Selection.nullSelection,a.PropertySelection=e("./property_selection"),a.ContainerSelection=e("./container_selection"),a.Annotator=e("./annotator"),a.AnnotationUpdates=e("./annotation_updates"),a.HtmlImporter=e("./html_importer"),a.HtmlExporter=e("./html_exporter"),t.exports=a},{"./annotation":136,"./annotation_updates":138,"./annotator":139,"./container":140,"./container_annotation":141,"./container_selection":143,"./coordinate":144,"./create_selection":145,"./document":146,"./document_schema":148,"./html_exporter":149,"./html_importer":150,"./node":152,"./property_selection":154,"./range":155,"./selection":156,"./text_node":157}],152:[function(e,t){"use strict";var a=e("../data"),n=a.Node.extend({name:"node",attach:function(e){this.document=e},detach:function(){this.document=null},isAttached:function(){return null!==this.document},getDocument:function(){return this.document},hasParent:function(){return!1},getParentNode:function(){return this.document.get(this.parentId)},isResilient:function(){return!1},getComponents:function(){return this.constructor.static.components}});n.initNodeClass=a.Node.initNodeClass,t.exports=n},{"../data":131}],153:[function(e,t){"use strict";var a=e("../basics"),n=a.PathAdapter,i=function(e){this.listeners=new n,this.doc=e};i.Prototype=function(){this.onDocumentChanged=function(e,t){function n(t){e.deleted[t[0]]||c.set(t,!0)}var i=this.listeners,c=e.updated;a.each(e.ops,function(e){if("create"!==e.type&&"delete"!==e.type||!e.val.path&&!e.val.startPath)if("set"!==e.type||"path"!==e.path[1]&&"startPath"!==e.path[1]&&"endPath"!==e.path[1]){if("set"===e.type&&("startOffset"===e.path[1]||"endOffset"===e.path[1])){var t=this.doc.get(e.path[0]);t&&(t.path?n(t.path):(n(t.startPath),n(t.endPath)))}}else n(e.val),n(e.original);else e.val.path?n(e.val.path):e.val.startPath&&(n(e.val.startPath),n(e.val.endPath))},this),e.traverse(function(n){var c=n.concat(["listeners"]),r=i.get(c);a.each(r,function(a){a.method.call(a.listener,e,t)})},this)},this.add=function(e,t,a){var n=e.concat(["listeners"]),i=this.listeners.get(n);if(i||(i=[],this.listeners.set(n,i)),!a)throw new Error("Invalid argument: expected function but got "+a);i.push({method:a,listener:t})},this.remove=function(e,t){var a=e.concat(["listeners"]),n=this.listeners.get(a);if(n)for(var i=0;i<n.length;i++)if(n[i].listener===t)return void n.splice(i,1)
}},a.initClass(i),t.exports=i},{"../basics":124}],154:[function(e,t){"use strict";function a(e,t){this.range=e,this.reverse=t,this._internal={},Object.freeze(this)}var n=e("../basics"),i=e("./selection");a.Prototype=function(){n.extend(this,i.prototype),this.isNull=function(){return!1},this.getRanges=function(){return[this.range]},this.getRange=function(){return this.range},this.isCollapsed=function(){return this.range.isCollapsed()},this.isReverse=function(){return this.reverse},this.isPropertySelection=function(){return!0},this.isMultiSeletion=function(){return!1},this.equals=function(e){return i.prototype.equals.call(this,e)&&this.range.equals(e.range)},this.collapse=function(e){var t;return t="left"===e?this.range.start:this.range.end,i.create(t)},this.getPath=function(){return this.range.start.path},this.getStartOffset=function(){return this.range.start.offset},this.getEndOffset=function(){return this.range.end.offset},this.toString=function(){return["PropertySelection(",JSON.stringify(this.range.start.path),", ",this.range.start.offset," -> ",this.range.end.offset,this.reverse?", reverse":"",this.range.start.after?", after":"",")"].join("")},this.isInsideOf=function(e,t){return e.isNull()?!1:e.isContainerSelection()?e.contains(this):t?n.isEqual(this.path,e.path)&&this.start.offset>e.start.offset&&this.end.offset<e.end.offset:n.isEqual(this.path,e.path)&&this.start.offset>=e.start.offset&&this.end.offset<=e.end.offset},this.contains=function(e,t){return e.isNull()?!1:e.isContainerSelection()?e.isInsideOf(this):t?n.isEqual(this.path,e.path)&&this.start.offset<e.start.offset&&this.end.offset>e.end.offset:n.isEqual(this.path,e.path)&&this.start.offset<=e.start.offset&&this.end.offset>=e.end.offset},this.overlaps=function(e,t){return e.isNull()?!1:e.isContainerSelection()?e.overlaps(this):n.isEqual(this.getPath(),e.getPath())?t?!(this.startOffset>=e.endOffset||this.endOffset<=e.startOffset):!(this.startOffset>e.endOffset||this.endOffset<e.startOffset):!1},this.isRightAlignedWith=function(e){return e.isNull()?!1:e.isContainerSelection()?e.isRightAlignedWith(this):n.isEqual(this.getPath(),e.getPath())&&this.getEndOffset()===e.getEndOffset()},this.isLeftAlignedWith=function(e){return e.isNull()?!1:e.isContainerSelection()?e.isLeftAlignedWith(this):n.isEqual(this.getPath(),e.getPath())&&this.getStartOffset()===e.getStartOffset()},this.expand=function(e){if(e.isNull())return this;if(e.isContainerSelection())return e.expand(this);if(!n.isEqual(this.path,e.path))throw new Error("Can not expand PropertySelection to a different property.");var t=Math.min(this.startOffset,e.startOffset),a=Math.max(this.endOffset,e.endOffset);return i.create(this.getPath(),t,a)},this.truncate=function(e){if(e.isNull())return this;if(!n.isEqual(this.start.path,e.start.path)||!n.isEqual(this.end.path,e.end.path))throw new Error("Can not expand PropertySelection to a different property.");var t,a;return this.startOffset===e.startOffset?(t=e.endOffset,a=this.endOffset):this.endOffset===e.endOffset&&(t=this.startOffset,a=e.startOffset),i.create(this.getPath(),t,a)}},n.inherit(a,i),Object.defineProperties(a.prototype,{start:{get:function(){return this.range.start},set:function(){throw new Error("immutable.")}},end:{get:function(){return this.range.end},set:function(){throw new Error("immutable.")}},path:{get:function(){return this.range.start.path},set:function(){throw new Error("immutable.")}},startOffset:{get:function(){return this.range.start.offset},set:function(){throw new Error("immutable.")}},endOffset:{get:function(){return this.range.end.offset},set:function(){throw new Error("immutable.")}}}),t.exports=a},{"../basics":124,"./selection":156}],155:[function(e,t){"use strict";var a=e("../basics"),n=function(e,t){this.start=e,this.end=t,Object.freeze(this)};n.Prototype=function(){this.isCollapsed=function(){return this.start.equals(this.end)},this.equals=function(e){return this===e?!0:this.start.equals(e.start)&&this.end.equals(e.end)}},a.initClass(n),t.exports=n},{"../basics":124}],156:[function(e,t){"use strict";function a(){}var n=e("../basics");a.Prototype=function(){this.getRanges=function(){return[]},this.isNull=function(){return!0},this.isMultiSeletion=function(){return!1},this.isPropertySelection=function(){return!1},this.isContainerSelection=function(){return!1},this.isCollapsed=function(){return!0},this.isReverse=function(){return!1},this.equals=function(e){return this===e?!0:e?this.isNull()!==e.isNull()?!1:!0:!1},this.toString=function(){return"null"}},n.initClass(a);var i=function(){};i.Prototype=function(){this.isNull=function(){return!0}},n.inherit(i,a),a.nullSelection=Object.freeze(new i),a.create=null,t.exports=a},{"../basics":124}],157:[function(e,t){"use strict";var a=e("./node"),n=a.extend({name:"text",properties:{content:"string"}});n.static.components=["content"],t.exports=n},{"./node":152}],158:[function(e,t){"use strict";function a(e){this.document=e,this.schema=e.schema,this.ops=[],this.before={},this.data=new i.IncrementalGraph(e.schema,{seed:e.data.seed,didCreateNode:n.bind(this._didCreateNode,this),didDeleteNode:n.bind(this._didDeleteNode,this)}),n.each(e.data.indexes,function(e,t){this.data.addIndex(t,e.clone())},this),this.containers=this.getIndex("type").get("container"),n.each(this.containers,function(e){e.reset()})}var n=e("../basics"),i=e("../data");a.Prototype=function(){this.reset=function(){this.ops=[],this.before={},n.each(this.containers,function(e){e.reset()})},this.get=function(e){return this.data.get(e)},this.create=function(e){var t=this.data.create(e);if(t)return this.document.isTransacting&&this.ops.push(t),this.data.get(e.id)},this.delete=function(e){var t=this.data.delete(e);t&&this.document.isTransacting&&this.ops.push(t)},this.set=function(e,t){var a=this.data.set(e,t);a&&(this._updateContainers(a),this.document.isTransacting&&this.ops.push(a))},this.update=function(e,t){var a=this.data.update(e,t);a&&(this._updateContainers(a),this.document.isTransacting&&this.ops.push(a))},this._updateContainers=function(e){var t=this.containers;n.each(t,function(t){t.update(e)})},this.save=function(e,t){var a=this.before,i=n.extend({},a,e);this.document._saveTransaction(a,i,t),this.reset()},this.cancel=function(){for(var e=this.ops.length-1;e>=0;e--)this.data.apply(this.ops[e].invert());this.document._cancelTransaction(),this.reset()},this.finish=function(){this.document.isTransacting&&this.cancel()},this.cleanup=this.finish,this.getOperations=function(){return this.ops},this.apply=function(e){n.each(e.ops,function(e){this.data.apply(e),this._updateContainers(e)},this)},this.getIndex=function(e){return this.data.getIndex(e)},this._didCreateNode=function(e){e.attach(this)},this._didDeleteNode=function(e){e.detach(this)}},n.initClass(a),t.exports=a},{"../basics":124,"../data":131}],159:[function(e,t){"use strict";function a(e,t,a){e.pos===t.pos?a?t.pos+=1:e.pos+=1:e.pos<t.pos?t.pos+=1:e.pos+=1}function n(e,t){return e.pos===t.pos?(t.type=b,void(e.type=b)):void(e.pos<t.pos?t.pos-=1:e.pos-=1)}function i(e,t){if(e.type===o){var a=e;e=t,t=a}e.pos<=t.pos?t.pos+=1:e.pos-=1}var c=e("../basics"),r=e("./operation"),s=e("./conflict"),b="NOP",o="delete",d="insert",f=function(e){if(void 0===e.type)throw new Error("Illegal argument: insufficient data.");if(this.type=e.type,this.type!==b){if(this.pos=e.pos,this.val=e.val,this.type!==b&&this.type!==d&&this.type!==o)throw new Error("Illegal type.");if(this.type===d||this.type===o){if(void 0===this.pos||void 0===this.val)throw new Error("Illegal argument: insufficient data.");if(!c.isNumber(this.pos)&&this.pos<0)throw new Error("Illegal argument: expecting positive number as pos.")}}};f.fromJSON=function(e){return new f(e)},f.Prototype=function(){this.apply=function(e){if(this.type===b)return e;if(this.type===d){if(e.length<this.pos)throw new Error("Provided array is too small.");return e.splice(this.pos,0,this.val),e}if(this.type===o){if(e.length<this.pos)throw new Error("Provided array is too small.");if(!c.isEqual(e[this.pos],this.val))throw Error("Unexpected value at position "+this.pos+". Expected "+this.val+", found "+e[this.pos]);return e.splice(this.pos,1),e}throw new Error("Illegal state.")},this.clone=function(){return new f(this)},this.invert=function(){var e=this.toJSON();if(this.type===d)e.type=o;else if(this.type===o)e.type=d;else{if(this.type!==b)throw new Error("Illegal state.");e.type=b}return new f(e)},this.hasConflict=function(e){return f.hasConflict(this,e)},this.toJSON=function(){var e={type:this.type};return this.type===b?e:(e.pos=this.pos,e.val=this.val,e)},this.isInsert=function(){return this.type===d},this.isDelete=function(){return this.type===o},this.getOffset=function(){return this.pos},this.getValue=function(){return this.val},this.isNOP=function(){return this.type===b}},c.inherit(f,r);var p=0,l=1,u=2,h={};h[b]=p,h[o]=l,h[d]=u;var _=[];_[l|l]=function(e,t){return e.pos===t.pos},_[l|u]=function(){return!1},_[u|u]=function(e,t){return e.pos===t.pos};var m,v=function(e,t){if(e.type===b||t.type===b)return!1;var a=h[e.type]|h[t.type];return _[a]?_[a](e,t):!1};m=function(e,t,r){if(r=r||{},r.check&&v(e,t))throw new s(e,t);return r.inplace||(e=c.clone(e),t=c.clone(t)),e.type===b||t.type===b||(e.type===d&&t.type===d?a(e,t,!0):e.type===o&&t.type===o?n(e,t,!0):i(e,t,!0)),[e,t]},f.transform=m,f.hasConflict=v,f.Insert=function(e,t){return new f({type:d,pos:e,val:t})},f.Delete=function(e,t){return new f({type:o,pos:e,val:t})},f.NOP=b,f.DELETE=o,f.INSERT=d,t.exports=f},{"../basics":124,"./conflict":160,"./operation":163}],160:[function(e,t){"use strict";function a(e,t){Error.call(this,"Conflict: "+JSON.stringify(e)+" vs "+JSON.stringify(t)),this.a=e,this.b=t}a.prototype=Error.prototype,t.exports=a},{}],161:[function(e,t){"use strict";t.exports={Operation:e("./operation"),TextOperation:e("./text_operation"),ArrayOperation:e("./array_operation"),ObjectOperation:e("./object_operation")}},{"./array_operation":159,"./object_operation":162,"./operation":163,"./text_operation":164}],162:[function(e,t){"use strict";var a=e("../basics"),n=a.PathAdapter,i=e("./operation"),c=e("./text_operation"),r=e("./array_operation"),s=e("./conflict"),b="NOP",o="create",d="delete",f="update",p="set",l=function(e){if(this.type=e.type,this.path=e.path,this.type===o||this.type===d)this.val=e.val;else if(this.type===f){if(void 0===e.diff)throw new Error("Illegal argument: update by value or by diff must be provided");this.diff=e.diff,this.propertyType=e.propertyType}else this.type===p&&(this.val=e.val,this.original=e.original);this.data=e.data};l.fromJSON=function(e){var t=new l(e);if("update"===e.type)switch(e.propertyType){case"string":t.diff=c.fromJSON(t.diff);break;case"array":t.diff=r.fromJSON(t.diff);break;default:throw new Error("Don't know how to deserialize this operation:"+JSON.stringify(e))}return t},l.Prototype=function(){this.apply=function(e){if(this.type===b)return e;var t;if(t=e instanceof n?e:new n(e),this.type===o)return t.set(this.path,a.clone(this.val)),e;if(this.type===d)t.delete(this.path,"strict");else if(this.type===f){var i,s=this.diff,l=t.get(this.path);if("array"===this.propertyType)s instanceof r||(s=r.fromJSON(s)),i=s.apply(l);else{if("string"!==this.propertyType)throw new Error("Unsupported type for operational update.");s instanceof c||(s=c.fromJSON(s)),i=s.apply(l)}t.set(this.path,i)}else{if(this.type!==p)throw new Error("Illegal state.");t.set(this.path,a.clone(this.val))}return e},this.clone=function(){return new l(this)},this.isNOP=function(){return this.type===b?!0:this.type===f?this.diff.isNOP():void 0},this.invert=function(){if(this.type===b)return{type:b};var e=new l(this);if(this.type===o)e.type=d;else if(this.type===d)e.type=o;else if(this.type===f){var t;"string"===this.propertyType?t=c.fromJSON(this.diff).invert():"array"===this.propertyType&&(t=r.fromJSON(this.diff).invert()),e.diff=t,e.propertyType=this.propertyType}else{if(this.type!==p)throw new Error("Illegal state.");e.val=this.original,e.original=this.val}return e},this.hasConflict=function(e){return l.hasConflict(this,e)},this.toJSON=function(){if(this.type===b)return{type:b};var e={type:this.type,path:this.path,data:this.data};return this.type===o||this.type===d?e.val=this.val:this.type===f?(e.diff=this.diff,this.diff instanceof l?e.propertyType="object":this.diff instanceof r?e.propertyType="array":this.diff instanceof c&&(e.propertyType="string")):this.type===p&&(e.val=this.val,e.original=this.original),e}},a.inherit(l,i);var u=function(e,t){return e.type===b||t.type===b?!1:a.isEqual(e.path,t.path)},h=function(e,t){e.type=b,t.type=b},_=function(){throw new Error("Can not transform two concurring creates of the same property")},m=function(e,t,a){return e.type!==d?m(t,e,!0):void(a?(e.val=t.val,t.type=b):e.type=b)},v=function(e,t,a){if(e.type!==d)return v(t,e,!0);var n;"string"===t.propertyType?n=c.fromJSON(t.diff):"array"===t.propertyType&&(n=r.fromJSON(t.diff)),a?(e.val=n.apply(e.val),t.type=b):(e.type=b,t.type=o,t.val=n.apply(e.val))},g=function(){throw new Error("Can not transform a concurring create and update of the same property")},y=function(e,t){var a,n,i;"string"===t.propertyType?(a=c.fromJSON(e.diff),n=c.fromJSON(t.diff),i=c.transform(a,n,{inplace:!0})):"array"===t.propertyType?(a=r.fromJSON(e.diff),n=r.fromJSON(t.diff),i=r.transform(a,n,{inplace:!0})):"object"===t.propertyType&&(a=l.fromJSON(e.diff),n=l.fromJSON(t.diff),i=l.transform(a,n,{inplace:!0})),e.diff=i[0],t.diff=i[1]},x=function(e,t,a){return e.type!==o?x(t,e,!0):void(a?(e.type=p,e.original=t.val,t.type=b):(e.type=b,t.original=e.val))},w=function(e,t,a){return e.type!==d?w(t,e,!0):void(a?(e.val=t.val,t.type=b):(e.type=b,t.type=o,t.original=void 0))},C=function(){throw new Error("Can not transform update/set of the same property.")},S=function(e,t){e.type=b,t.original=e.val},N=0,E=1,T=2,O=4,I=8,j={};j[b]=N,j[o]=E,j[d]=T,j[f]=O,j[p]=I;var P=[];P[T|T]=h,P[T|E]=m,P[T|O]=v,P[E|E]=_,P[E|O]=g,P[O|O]=y,P[E|I]=x,P[T|I]=w,P[O|I]=C,P[I|I]=S;var D=function(e,t,n){n=n||{};var i=u(e,t);if(n.check&&i)throw new s(e,t);return n.inplace||(e=a.clone(e),t=a.clone(t)),i?(P[j[e.type]|j[t.type]](e,t),[e,t]):[e,t]};l.transform=D,l.hasConflict=u,l.Create=function(e,t){var n;if(a.isString(e))n=[e];else{if(!a.isArray(e))throw new Error("Illegal argument");n=e}return new l({type:o,path:n,val:t})},l.Delete=function(e,t){var n;if(a.isString(e))n=[e];else{if(!a.isArray(e))throw new Error("Illegal argument");n=e}return new l({type:d,path:n,val:t})},l.Update=function(e,t){var a;if(t instanceof c)a="string";else if(t instanceof r)a="array";else{if(!(t instanceof l))throw new Error("Unsupported type for operational changes");a="object"}return new l({type:f,path:e,diff:t,propertyType:a})},l.Set=function(e,t,n){return new l({type:p,path:e,val:a.clone(n),original:a.clone(t)})},l.NOP=b,l.CREATE=o,l.DELETE=d,l.UPDATE=f,l.SET=p,t.exports=l},{"../basics":124,"./array_operation":159,"./conflict":160,"./operation":163,"./text_operation":164}],163:[function(e,t){"use strict";function a(){}var n=e("../basics");a.Prototype=function(){this.isOperation=!0},n.initClass(a),t.exports=a},{"../basics":124}],164:[function(e,t){"use strict";function a(e){if(void 0===e.type||void 0===e.pos||void 0===e.str)throw new Error("Illegal argument: insufficient data.");if(this.type=e.type,this.pos=e.pos,this.str=e.str,!this.isInsert()&&!this.isDelete())throw new Error("Illegal type.");if(!r.isString(this.str))throw new Error("Illegal argument: expecting string.");if(!r.isNumber(this.pos)&&this.pos<0)throw new Error("Illegal argument: expecting positive number as pos.")}function n(e,t,a){e.pos===t.pos?a?t.pos+=e.str.length:e.pos+=t.str.length:e.pos<t.pos?t.pos+=e.str.length:e.pos+=t.str.length}function i(e,t,a){if(e.pos>t.pos)return i(t,e,!a);if(e.pos===t.pos&&e.str.length>t.str.length)return i(t,e,!a);if(t.pos<e.pos+e.str.length){var n=t.pos-e.pos,c=e.str.length-n,r=n+t.str.length;e.str=e.str.slice(0,n)+e.str.slice(r),t.str=t.str.slice(c),t.pos-=n}else t.pos-=e.str.length}function c(e,t){if(e.type===d)return c(t,e);if(e.pos<=t.pos)t.pos+=e.str.length;else if(e.pos>=t.pos+t.str.length)e.pos-=t.str.length;else{var a=e.pos-t.pos;t.str=t.str.slice(0,a)+e.str+t.str.slice(a),e.str=""}}var r=e("../basics"),s=e("./operation"),b=e("./conflict"),o="+",d="-";a.fromJSON=function(e){return new a(e)},a.Prototype=function(){this.apply=function(e){if(this.isEmpty())return e;if(this.type===o){if(e.length<this.pos)throw new Error("Provided string is too short.");return e.splice?e.splice(this.pos,0,this.str):e.slice(0,this.pos).concat(this.str).concat(e.slice(this.pos))}if(this.type===d){if(e.length<this.pos+this.str.length)throw new Error("Provided string is too short.");return e.splice?e.splice(this.pos,this.str.length):e.slice(0,this.pos).concat(e.slice(this.pos+this.str.length))}throw new Error("Illegal operation type: "+this.type)},this.clone=function(){return new a(this)},this.isNOP=function(){return"NOP"===this.type||0===this.str.length},this.isInsert=function(){return this.type===o},this.isDelete=function(){return this.type===d},this.getLength=function(){return this.str.length},this.invert=function(){var e={type:this.isInsert()?"-":"+",pos:this.pos,str:this.str};return new a(e)},this.hasConflict=function(e){return a.hasConflict(this,e)},this.isEmpty=function(){return 0===this.str.length},this.toJSON=function(){return{type:this.type,pos:this.pos,str:this.str}}},r.inherit(a,s);var f=function(e,t){if(e.type===o&&t.type===o)return e.pos===t.pos;if(e.type===d&&t.type===d)return!(e.pos>=t.pos+t.str.length||t.pos>=e.pos+e.str.length);var a,n;return e.type===d?(a=e,n=t):(a=t,n=e),n.pos>=a.pos&&n.pos<a.pos+a.str.length},p=function(e,t,a){if(a=a||{},a.check&&f(e,t))throw new b(e,t);return a.inplace||(e=r.clone(e),t=r.clone(t)),e.type===o&&t.type===o?n(e,t,!0):e.type===d&&t.type===d?i(e,t,!0):c(e,t),[e,t]};a.transform=function(){return p.apply(null,arguments)},a.Insert=function(e,t){return new a({type:o,pos:e,str:t})},a.Delete=function(e,t){return new a({type:d,pos:e,str:t})},a.INSERT=o,a.DELETE=d,t.exports=a},{"../basics":124,"./conflict":160,"./operation":163}],165:[function(e,t){function a(){}{var n=e("../basics");n.Document.Selection}a.Prototype=function(){this.disabledModes=[],this.getDocument=function(){throw new Error("Contract: an AnnotationTool must implement getDocument()")},this.getContainer=function(){throw new Error("Contract: an AnnotationTool must implement getContainer()")},this.getToolState=function(){throw new Error("Contract: an AnnotationTool must implement getToolState()")},this.setToolState=function(){throw new Error("Contract: an AnnotationTool must implement setToolState()")},this.getAnnotationType=function(){throw new Error("Contract: an AnnotationTool must implement getAnnotationType()")},this.afterCreate=function(){},this.afterFusion=function(){},this.afterRemove=function(){},this.afterTruncate=function(){},this.afterExpand=function(){},this.canCreate=function(e,t){return 0===e.length&&!t.isCollapsed()},this.canFusion=function(e){return e.length>=2},this.canRemove=function(e,t){if(1!==e.length)return!1;var a=e[0].getSelection();return t.isInsideOf(a)},this.canExpand=function(e,t){if(1!==e.length)return!1;var a=e[0].getSelection();return t.overlaps(a)},this.canTruncate=function(e,t){if(1!==e.length)return!1;var a=e[0].getSelection();return(t.isLeftAlignedWith(a)||t.isRightAlignedWith(a))&&!t.equals(a)},this.updateToolState=function(e){if(e.isNull())return this.setToolState({active:!1,selected:!1});var t,a=this.getDocument(),i=this.getAnnotationType(),c=this.isContainerAnno();if(c)t=a.getContainerAnnotationsForSelection(e,this.getContainer(),{type:i});else{if(e.isContainerSelection())return this.setToolState({active:!1,selected:!1});t=a.getAnnotationsForSelection(e,{type:i})}var r={active:!0,selected:!1,mode:null,sel:e,annos:t};return this.canCreate(t,e)?r.mode="create":this.canFusion(t,e)?r.mode="fusion":this.canTruncate(t,e)?(r.selected=!0,r.mode="truncate"):this.canRemove(t,e)?(r.selected=!0,r.mode="remove"):this.canExpand(t,e)&&(r.mode="expand"),!r.mode||n.includes(this.disabledModes,r.mode)?this.disableTool():void this.setToolState(r)},this.disableTool=function(){this.setToolState({active:!1,selected:!1})},this.performAction=function(){var e=this.getToolState();if(e.sel&&e.mode&&!e.sel.isNull())switch(e.mode){case"create":return this.handleCreate(e);case"fusion":return this.handleFusion(e);case"remove":return this.handleRemove(e);case"truncate":return this.handleTruncate(e);case"expand":return this.handleExpand(e);default:console.error("Unknown mode: %s",this.state.mode)}},this.handleCreate=function(e){var t=e.sel;if(!t.isNull()){var a=this.getDocument(),n=a.startTransaction({selection:t});try{var i=this.createAnnotationForSelection(n,t);n.save({selection:t})}finally{n.cleanup()}this.afterCreate(i)}},this.getAnnotationData=function(){return{}},this.isContainerAnno=function(){var e=this.getDocument(),t=e.getSchema();return t.isInstanceOf(this.getAnnotationType(),"container_annotation")},this.createAnnotationForSelection=function(e,t){var a=this.getAnnotationType(),i=n.extend({id:n.uuid(a),type:a},this.getAnnotationData());return this.isContainerAnno()?(i.startPath=t.start.path,i.endPath=t.end.path,i.container="content"):i.path=t.getPath(),i.startOffset=t.getStartOffset(),i.endOffset=t.getEndOffset(),e.create(i)},this.handleFusion=function(e){var t=this.getDocument(),a=e.sel,i=t.startTransaction({selection:a});try{n.each(e.annos,function(e){a=a.expand(e.getSelection())}),n.each(e.annos,function(e){i.delete(e.id)}),this.createAnnotationForSelection(i,a),i.save({selection:a}),this.afterFusion()}finally{i.cleanup()}},this.handleRemove=function(e){var t=this.getDocument(),a=e.sel,n=t.startTransaction({selection:a});try{var i=e.annos[0].id;n.delete(i),n.save({selection:a}),this.afterRemove()}finally{n.cleanup()}},this.handleTruncate=function(e){var t=this.getDocument(),a=e.sel,n=t.startTransaction({selection:a});try{var i=e.annos[0],c=i.getSelection(),r=c.truncate(a);i.updateRange(n,r),n.save({selection:a}),this.afterTruncate()}finally{n.cleanup()}},this.handleExpand=function(e){var t=this.getDocument(),a=e.sel,n=t.startTransaction({selection:a});try{var i=e.annos[0],c=i.getSelection(),r=c.expand(a);i.updateRange(n,r),n.save({selection:a}),this.afterExpand()}finally{n.cleanup()}}},n.initClass(a),t.exports=a},{"../basics":124}],166:[function(e,t){var a=(e("../basics"),e("./node_view")),n=a.extend({name:"annotation",tagName:"span",getClassNames:function(){var e=this.node.getClassNames().replace("_","-");return this.props.classNames&&(e+=" "+this.props.classNames.join(" ")),e}});t.exports=n},{"../basics":124,"./node_view":172}],167:[function(e,t){"use strict";var a=e("../basics"),n=function(e,t,n,i){this.surfaceProvider=e,this.htmlImporter=n,this.htmlExporter=i,this.el=t,this.$el=$(this.el),this.$el.prop("contentEditable","true").addClass("clipboard"),this._contentDoc=null,this._contentText="",this._onKeyDown=a.bind(this.onKeyDown,this),this._onCopy=a.bind(this.onCopy,this),this._onCut=a.bind(this.onCut,this),this.isIe=-1!=window.navigator.userAgent.toLowerCase().indexOf("msie")||-1!=window.navigator.userAgent.toLowerCase().indexOf("trident"),this.isFF=window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,this.isIe?(this._beforePasteShim=a.bind(this.beforePasteShim,this),this._pasteShim=a.bind(this.pasteShim,this)):this._onPaste=a.bind(this.onPaste,this)};n.Prototype=function(){this.attach=function(e){e.addEventListener("keydown",this._onKeyDown,!1),e.addEventListener("copy",this._onCopy,!1),e.addEventListener("cut",this._onCut,!1),this.isIe?(e.addEventListener("beforepaste",this._beforePasteShim,!1),e.addEventListener("paste",this._pasteShim,!1)):e.addEventListener("paste",this._onPaste,!1)},this.detach=function(e){e.removeEventListener("keydown",this._onKeyDown,!1),e.removeEventListener("copy",this._onCopy,!1),e.removeEventListener("cut",this._onCut,!1),this.isIe?(e.removeEventListener("beforepaste",this._beforePasteShim,!1),e.removeEventListener("paste",this._pasteShim,!1)):e.removeEventListener("paste",this._onPaste,!1)},this.getSurface=function(){return this.surfaceProvider.getSurface()},this.onCopy=function(e){if(console.log("Clipboard.onCopy",arguments),this._copySelection(),e.clipboardData&&this._contentDoc){var t=this.htmlExporter.toHtml(this._contentDoc,{containers:["content"]});console.log("Stored HTML in clipboard",t),this._contentDoc.__id__=a.uuid();var n=this._contentDoc.toJSON();n.__id__=this._contentDoc.__id__,e.clipboardData.setData("application/substance",JSON.stringify(n)),e.clipboardData.setData("text/plain",$(t).text()),e.clipboardData.setData("text/html",t),e.preventDefault()}},this.onCut=function(e){console.log("Clipboard.onCut",arguments),this.onCopy(e);var t=this.getSurface(),a=t.getEditor();a.delete(a.selection,"left"),e.preventDefault()},this.pasteSubstanceData=function(e){var t=this.getSurface(),a=t.getEditor(),n=t.getLogger(),i=a.getDocument();try{var c=i.fromSnapshot(JSON.parse(e));a.paste(a.selection,{content:c,text:""})}catch(r){console.error(r),n.error(r)}},this.pasteHtml=function(e){var t=this.getSurface(),a=t.getEditor(),n=t.getLogger(),i=a.getDocument();try{var c=i.newInstance(),r=(new window.DOMParser).parseFromString(e,"text/html");this.htmlImporter.convertDocument(r,c),a.paste(a.selection,{content:c,text:r.body.textContent})}catch(s){console.error(s),n.error(s)}},this.onPaste=function(e){for(var t=e.clipboardData,a=this.getSurface(),n=a.getEditor(),i=a.getLogger(),c={},r=0;r<t.types.length;r++)c[t.types[r]]=!0;if(this.isFF&&!c["application/substance"]&&!c["text/html"]){var s=n.selection;return this.beforePasteShim(),n.selection=s,void this.pasteShim()}if(e.preventDefault(),e.stopPropagation(),console.log("Available types",c),c["application/substance"])this.pasteSubstanceData(t.getData("application/substance"));else if(c["text/html"])this.pasteHtml(t.getData("text/html"));else try{var b=t.getData("text/plain");n.insertText(b,n.selection)}catch(o){console.error(o),i.error(o)}},this.beforePasteShim=function(){console.log("Paste before..."),this.$el.focus();var e=document.createRange();e.selectNodeContents(this.el);var t=window.getSelection();t.removeAllRanges(),t.addRange(e)},this.pasteShim=function(){this.$el.empty();var e=this,t=this.getSurface(),a=t.getEditor(),n=a.selection;setTimeout(function(){a.selection=n,e.pasteHtml(e.$el.html()),e.$el.empty()},0)},this.onKeyDown=function(e){88===e.keyCode&&(e.metaKey||e.ctrlKey)||(86===e.keyCode&&(e.metaKey||e.ctrlKey)?this.handlePaste():67===e.keyCode&&(e.metaKey||e.ctrlKey))},this.handleCut=function(){console.log("Cutting into Clipboard...");var e=window.getSelection(),t=e.getRangeAt(0),a=t.cloneContents();this.el.innerHTML="",this.el.appendChild(a),this._copySelection();var n=this.getSurface();try{console.log("...selection before deletion",n.getSelection().toString()),n.getEditor().delete()}catch(i){return console.error(i),void this.logger.error(i)}var c=window.document.createRange();c.selectNodeContents(this.el),e.removeAllRanges(),e.addRange(c),window.setTimeout(function(){n.rerenderDomSelection()},10)},this.handlePaste=function(){},this.handleCopy=function(){},this._copySelection=function(){var e=window.getSelection();this._contentText="",this._contentDoc=null;var t=this.getSurface(),a=t.getSelection(),n=t.getEditor();if(e.rangeCount>0&&!a.isCollapsed()){var i=e.getRangeAt(0);this._contentText=i.toString(),this._contentDoc=n.copy(a),console.log("Clipboard._copySelection(): created a copy",this._contentDoc)}else this._contentDoc=null,this._contentText=""}},a.initClass(n),t.exports=n},{"../basics":124}],168:[function(e,t){"use strict";function a(e){c.call(this,e.getDocument()),this.container=e,this.mergeBehavior={},this.breakBehavior={},this.deleteBehavior={},this.defineBehavior()}var n=e("../basics"),i=e("../document"),c=e("./form_editor"),r=i.AnnotationUpdates,s=i.Selection;a.Prototype=function(){this.defaultTextType="paragraph",this.defineBehavior=function(){},this.isContainerEditor=function(){return!0},this.getContainerName=function(){return this.container.id},this.break=function(e,t){t=t||{};var a=this.document.startTransaction({seleciton:e});a.selection=e;try{this.selection.isCollapsed()||this._delete(a),this._break(a),a.save({selection:a.selection},t),this.selection=a.selection}finally{a.cleanup()}},this.selectAll=function(){var e=this.container,t=e.getFirstComponent(),a=e.getLastComponent(),n=this.document.get(a.path);this.selection=s.create(this.container,t.path,0,a.path,n.length)},this.copyPropertySelection=function(e){var t=this.document.newInstance(),a=e.start.path,i=e.start.offset,c=e.end.offset,r=this.document.get(a),s=t.create({type:"container",id:"content",nodes:[]});t.create({type:"text",id:"text",content:r.substring(i,c)}),s.show("text");var b=this.document.getIndex("annotations").get(a,i,c);return n.each(b,function(e){var a=n.deepclone(e.toJSON());a.path=["text","content"],a.startOffset=Math.max(i,e.startOffset)-i,a.endOffset=Math.min(c,e.endOffset)-i,t.create(a)}),t},this._copyContainerSelection=function(e){var t,a,i=this.document,c=this.document.newInstance(),s=i.getIndex("annotations"),b=this.container,o=b.getComponent(e.start.path),d=b.getComponent(e.end.path),f=c.create({type:"container",id:"content",nodes:[]}),p={};for(t=o.getIndex();t<=d.getIndex();t++){a=b.getComponentAt(t);var l=a.parentNode.id,u=i.get(l);p[l]||(p[l]=c.create(u.toJSON()),f.show(l));for(var h=s.get(a.path),_=0;_<h.length;_++)c.create(n.clone(h[_].toJSON()))}var m,v=o.parentNode;for(t=0;t<v.components.length;t++){if(a=v.components[t],a===o){e.start.offset>0&&(m=i.get(a.path),c.update(a.path,{"delete":{start:0,end:e.start.offset}}),r.deletedText(c,a.path,0,e.start.offset));break}c.set(a.path,"")}var g=d.parentNode;for(t=0;t<g.components.length;t++){if(a=g.components[t],a===d){m=i.get(a.path),e.end.offset<m.length&&(c.update(a.path,{"delete":{start:e.end.offset,end:m.length}}),r.deletedText(c,a.path,e.end.offset,m.length));break}c.set(a.path,"")}return c},this.copy=function(e){return e.isNull()?null:e.isPropertySelection()||n.isEqual(e.start.path,e.end.path)?this.copyPropertySelection(e):e.isContainerSelection()?this._copyContainerSelection(e):void 0},this.paste=function(e,t){if(e.isNull())return void console.error("Can not paste, without selection.");if(!t.content)return this.insertText(t.text,e);var a=t.content,n=this.document.startTransaction({selection:e});n.selection=e;try{e.isCollapsed()||this._delete(n);var i=a.get("content").nodes;if(i.length>0){var c=a.get(i[0]);1===i.length&&"text"===c.type?this._pasteAnnotatedText(n,a):this._pasteDocument(n,a)}n.save({selection:n.selection}),this.selection=n.selection}finally{n.cleanup()}},this._pasteAnnotatedText=function(e,t){var a=t.get("content").nodes,i=[a[0],"content"],c=t.get(i),b=t.getIndex("annotations").get(i),o=e.selection,d=o.start.path,f=o.start.offset;e.update(d,{insert:{offset:f,value:c}}),r.insertedText(e,o.start,c.length),e.selection=s.create(o.start.path,o.start.offset,o.start.offset+c.length),n.each(b,function(t){var a=t.toJSON();a.path=d.slice(0),a.startOffset+=f,a.endOffset+=f,e.get(a.id)&&(a.id=n.uuid(a.type)),e.create(a)})},this._pasteDocument=function(e,t){var a,i=t,c=e.get(this.container.id),r=c.getComponent(e.selection.start.path),b=r.parentNode;r===n.last(b.components)&&e.get(r.path).length===e.selection.start.offset?a=c.getPosition(e.selection.start.path[0])+1:(this._break(e),a=c.getPosition(e.selection.start.path[0])),0>a&&console.error("Could not find insertion position in ContainerNode.");for(var o=i.get("content").nodes,d=i.getIndex("annotations"),f=[],p=0;p<o.length;p++){var l=o[p],u=i.get(l).toJSON();e.get(l)&&(u.id=n.uuid(u.type)),e.create(u),c.show(u.id,a++),f.push(u);for(var h=d.get(l),_=0;_<h.length;_++){var m=h[_].toJSON();u.id!==l&&(m.path[0]=u.id),e.get(m.id)&&(m.id=n.uuid(m.type)),e.create(m)}}var v=o[0],g=n.last(o),y=c.getComponentsForNode(v)[0],x=n.last(c.getComponentsForNode(g)),w=e.get(x.path).length;
e.selection=s.create(c,y.path,0,x.path,w)},this._getBreakBehavior=function(e){var t=null;return this.breakBehavior[e.type]?t=this.breakBehavior[e.type]:e.isInstanceOf("text")&&(t=this._breakTextNode),t||console.info("No breaking behavior defined for %s",e.type),t},this._break=function(e){var t=e.selection.getRange(),a=e.get(this.container.id),n=a.getComponent(t.start.path),i=e.get(n.path[0]),c=t.start.offset,r=this._getBreakBehavior(i);r&&r.call(this,e,i,n.path,c)},this._breakTextNode=function(e,t,a,i){var c=t.content,b=e.get(this.container.id),o=b.getPosition(t.id),d=n.uuid(t.type),f=[d,"content"];0===i?(e.create({id:d,type:t.type,content:""}),b.show(d,o),e.selection=s.create(a,0)):(e.create({id:d,type:this.defaultTextType,content:c.substring(i)}),i<c.length&&(r.transferAnnotations(e,a,i,[d,"content"],0),e.update(a,{"delete":{start:i,end:c.length}})),b.show(d,o+1),e.selection=s.create(f,0))},this._getMergeBehavior=function(e,t){var a=this.mergeBehavior,n=null;return a[e.type]&&a[e.type][t.type]?n=a[e.type][t.type]:e.isInstanceOf("text")&&t.isInstanceOf("text")?n=this._mergeTextNodes:e.isInstanceOf("text")&&a.text?n=a.text[t.type]:t.isInstanceOf("text")&&a[e.type]&&(n=a[e.type].text),n||console.info("No merge behavior defined for %s <- %s",e.type,t.type),n},this._merge=function(e,t,a){var n=e.get(this.container.id),i=n.getComponent(t);"right"===a&&i.next?this._mergeComponents(e,i,i.next):"left"===a&&i.previous&&this._mergeComponents(e,i.previous,i)},this._mergeComponents=function(e,t,a){var n=e.get(t.parentNode.id),i=e.get(a.parentNode.id),c=this._getMergeBehavior(n,i);c&&c.call(this,e,t,a)},this._mergeTextNodes=function(e,t,a){var n=t.path,i=e.get(n),c=i.length,b=a.path,o=e.get(b),d=e.get(this.container.id);e.update(n,{insert:{offset:c,value:o}}),r.transferAnnotations(e,b,0,n,c),d.hide(b[0]),e.delete(b[0]),e.selection=s.create(n,c)},this._getDeleteBehavior=function(e){var t=null;return this.deleteBehavior[e.type]&&(t=this.deleteBehavior[e.type]),t},this._delete=function(e,t){c.prototype._delete.call(this,e,t);var a=e.get(this.container.id);if(0===a.nodes.length){var i={type:this.defaultTextType,id:n.uuid(this.defaultTextType),content:""};e.create(i),a.show(i.id,0),e.selection=s.create([i.id,"content"],0)}},this._deleteContainerSelection=function(e){for(var t,a=e.selection.getRange(),i=this._getNodeSelection(e,a),c=i.length-1;c>=0;c--)t=i[c],t.isFully&&!t.node.isResilient()?this._deleteNode(e,t):this._deleteNodePartially(e,t);if(i[0].isFully){e.selection=n.Document.Selection.nullSelection;for(var r=1;r<i.length;r++)if(t=i[r],!t.isFully||t.node.isResilient()){e.selection=n.Document.Selection.create(t.components[0].path,0);break}}else e.selection=s.create(a.start);if(i.length>1){var b=i[0],o=i[i.length-1];if(b.isFully||o.isFully);else{var d=b.components[0],f=n.last(o.components);this._mergeComponents(e,d,f)}}},this._deleteNode=function(e,t){var a=this._getDeleteBehavior(t.node);if(a)a.call(this,e,t);else{var n=t.node.id,i=e.get(this.container.id);i.hide(n);var c,r=e.getIndex("annotations").get(n);for(c=0;c<r.length;c++)e.delete(r[c].id);var s=e.getIndex("container-annotations").get(n);for(c=0;c<s.length;c++){var b=s[c];if(e.get(b.id)){var o=i.getComponent(b.path);if(b.isStart)o.hasNext()?(e.set([b.id,"startPath"],o.next.path),e.set([b.id,"startOffset"],0)):e.delete(b.id);else if(o.hasPrevious()){var d=e.get(o.previous.path).length;e.set([b.id,"endPath"],o.previous.path),e.set([b.id,"endOffset"],d)}else e.delete(b.id)}}e.delete(t.node.id)}},this._deleteNodePartially=function(e,t){var a=this._getDeleteBehavior(t.node);if(a)a.call(this,e,t);else for(var n=t.components,i=n.length,c=0;i>c;c++){var r=n[c],s=0,b=e.get(r.path).length;0===c&&(s=t.startOffset),c===i-1&&(b=t.endOffset),this._deleteProperty(e,r.path,s,b)}},this._getNodeSelection=function(e,t){for(var a=[],n={},i=e.get(this.container.id),c=i.getComponentsForRange(t),r=0;r<c.length;r++){var s=c[r],b=e.get(s.rootId);if(!b)throw new Error("Illegal state: expecting a component to have a proper root node id set.");var o,d=b.id;n[d]||(o={node:b,isFully:!0,components:[]},n[d]=o,a.push(o)),o=n[d],o.components.push(s)}var f=c[0],p=c[c.length-1],l=a[0],u=a[a.length-1],h=e.get(f.path).length,_=e.get(p.path).length;return(t.start.offset>0||f.hasPrevious()&&e.get(f.getPrevious().rootId)!==l.node)&&(l.isFully=!1,l.startOffset=t.start.offset,l.endOffset=h),a.length>1&&(t.end.offset<_||p.hasNext()&&e.get(p.getNext().rootId)!==u.node)&&(u.isFully=!1,u.startOffset=0,u.endOffset=t.end.offset),a}},n.inherit(a,c),t.exports=a},{"../basics":124,"../document":151,"./form_editor":170}],169:[function(e,t){"use strict";function a(e,t){this.rootElement=e,this.nativeSelectionData=null,this.modelSelection=null,this.container=t}var n=e("../basics"),i=e("../document"),c=function(e,t){var a=$(e).text();if(a.length<t)return{node:null,offset:t-a.length};if(e.nodeType===document.TEXT_NODE)return{node:e,offset:t,boundary:a.length===t};if(0===a.length)return{node:e,offset:t,boundary:!0};for(var n=e.firstChild;n;n=n.nextSibling){var i=c(n,t);if(i.node)return i;t=i.offset}throw new Error("Illegal state: we should not have reached here!")},r=function(e){for(var t=[],a=e;a;){var n=$(a),i=n.attr("data-path");if(i)return t=i.split("."),{path:t,element:a};var c=n.attr("data-id");if(c){var r=n.find("*[data-path]");if(r.length>0)return i=$(r[0]).attr("data-path"),t=i.split("."),{path:t,element:r[0]}}a=n.parent()[0]}return null},s=function(e,t,a){a=a||{};var n=r(e);if(!n)return null;var c=n.path,s=n.element,b=0,o=window.document.createRange();o.setStart(s,0),o.setEnd(e,t),b=o.toString().length;a.left&&t===e.length||a.right&&0===t;return{domNode:s,coordinate:new i.Coordinate(c,b)}},b=function(e,t){var n=a.getDomNodeForPath(e,t.path);if(n){var i=c(n,t.offset);return i.node?i:null}};a.Prototype=function(){var e=function(e,t){return e.anchorNode===t.anchorNode&&e.anchorOffset===t.anchorOffset&&e.focusNode===t.focusNode&&e.focusOffset===t.focusOffset},t=function(e){var t={anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset,range:null};return e.rangeCount>0&&(t.range=e.getRangeAt(0)),t};this.get=function(n){n=n||{};var c=window.getSelection();if(this.nativeSelectionData&&e(c,this.nativeSelectionData))return this.modelSelection;var r;this.nativeSelectionData=t(c);var s=c.rangeCount;if(0===s)r=i.nullSelection;else{if(s>1)throw new Error("Multi-Selections not supported yet!");n.container=this.container,r=a.getSelectionForDomSelection(c,n)}return this.modelSelection=r,r},this.set=function(e){var t=window.getSelection();if(e.isNull())return void t.removeAllRanges();var a,n,i=e.getRanges(),c=[];for(a=0;a<i.length;a++){n=i[a];var r=b(this.rootElement,n.start);if(r){var s;s=n.isCollapsed()?r:b(this.rootElement,n.end),c.push({start:r,end:s})}}if(0!==c.length)for(t.removeAllRanges(),a=0;a<c.length;a++){var o=c[a];n=window.document.createRange(),n.setStart(o.start.node,o.start.offset),n.setEnd(o.end.node,o.end.offset),t.addRange(n)}},this.clear=function(){var e=window.getSelection();e.removeAllRanges(),this.nativeSelectionData=null},this.isInside=function(){var e=window.getSelection();if(0===e.rangeCount)return!1;var t=e.getRangeAt(0),a=t.startContainer.compareDocumentPosition(this.rootElement)&window.Node.DOCUMENT_POSITION_CONTAINS;return a&&!t.collapsed&&(a=t.endContainer.compareDocumentPosition(this.rootElement)&window.Node.DOCUMENT_POSITION_CONTAINS),a}},n.initClass(a),a.getDomNodeForPath=function(e,t){var a=e.querySelector('*[data-path="'+t.join(".")+'"]');return a?a:(console.warn("Could not find DOM element for path",t),null)},a.findDomPosition=function(e,t,n){var i=a.getDomNodeForPath(e,t);if(i){var r=c(i,n);return r.node?r:null}},a.getSelectionForDomSelection=function(e,t){t=t||{};var n=e.anchorNode,c=e.anchorOffset,r=e.focusNode,s=e.focusOffset,b=e.getRangeAt(0),o=e.isCollapsed,d=!1;if(!o&&r&&n){var f=r.compareDocumentPosition(n);d=(f&window.document.DOCUMENT_POSITION_FOLLOWING)>0||0===f&&c>s}return r&&n?a.getSelectionForDomRange(b,d,t):i.nullSelection},a.getSelectionForDomRange=function(e,t,a){a=a||{};var c,r=s(e.startContainer,e.startOffset,a);if(c=e.collapsed?r:s(e.endContainer,e.endOffset,a),r&&c){var b=new i.Range(r.coordinate,c.coordinate);if(n.isArrayEqual(b.start.path,b.end.path))return new i.PropertySelection(b,t);if(!a.container)throw new Error("No container given, but selection is a container selection");return new i.ContainerSelection(a.container,b,t)}},t.exports=a},{"../basics":124,"../document":151}],170:[function(e,t){"use strict";function a(e){this.document=e,this.selection=i.nullSelection,this.container=null}var n=e("../basics"),i=n.Document,c=i.Selection,r=e("../document/annotation_updates");a.Prototype=function(){this.isContainerEditor=function(){return!1},this.getContainer=function(){return this.container},this.setContainer=function(e){this.container=e},this.getDocument=function(){return this.document},this.insertText=function(e,t,a){var n=this.document.startTransaction({selection:t});n.selection=t;try{this.selection.isCollapsed()||this._delete(n,"right");var i=n.selection.getRange();n.update(i.start.path,{insert:{offset:i.start.offset,value:e}}),r.insertedText(n,i.start,e.length),n.selection=c.create(i.start.path,i.start.offset+e.length),n.save({selection:n.selection},a),this.selection=n.selection}finally{n.cleanup()}},this.delete=function(e,t,a){var n=this.document.startTransaction({selection:e});n.selection=e;try{this._delete(n,t),n.save({selection:n.selection},a),this.selection=n.selection}finally{n.cleanup()}},this.selectAll=function(){var e=this.selection;if(!e.isNull()&&e.isPropertySelection()){var t=e.start.path,a=this.document.get(t);this.selection=c.create(t,0,a.length)}},this._delete=function(e,t){var a,n,c=e.selection,s=c.getRange();if(c.isCollapsed()){var b=this.document.get(s.start.path);0===s.start.offset&&"left"===t||s.start.offset===b.length&&"right"===t?this._merge(e,s.start.path,t):(a="left"===t?s.start.offset-1:s.start.offset,n=a+1,e.update(s.start.path,{"delete":{start:a,end:n}}),r.deletedText(e,s.start.path,a,n),e.selection=i.Selection.create(s.start.path,a))}else c.isPropertySelection()?(this._deleteProperty(e,s.start.path,s.start.offset,s.end.offset),e.selection=i.Selection.create(s.start)):this._deleteContainerSelection(e,t)},this._deleteProperty=function(e,t,a,n){e.update(t,{"delete":{start:a,end:n}}),r.deletedText(e,t,a,n)},this._deleteContainerSelection=function(){console.info("Deleting ContainerSelections in form-editor is not supported.")},this.break=function(e){this.selection=e},this.softBreak=function(e,t){this.insertText("\n",e,t)},this.paste=function(e,t){t.text&&this.insertedText(t.text,e)},this._merge=function(e,t,a){var n=this.container.getComponent(t);if("left"===a&&n.previous){var i=e.get(n.previous.path);e.selection=c.create(n.previous.path,i.length)}}},n.initClass(a),t.exports=a},{"../basics":124,"../document/annotation_updates":138}],171:[function(e,t){"use strict";var a=e("./surface");a.DomSelection=e("./dom_selection"),a.FormEditor=e("./form_editor"),a.ContainerEditor=e("./container_editor"),a.Clipboard=e("./clipboard"),a.NodeView=e("./node_view"),a.AnnotationView=e("./annotation_view"),a.TextProperty=e("./text_property"),a.AnnotationTool=e("./annotation_tool"),a.ToolManager=e("./tool_manager"),t.exports=a},{"./annotation_tool":165,"./annotation_view":166,"./clipboard":167,"./container_editor":168,"./dom_selection":169,"./form_editor":170,"./node_view":172,"./surface":173,"./text_property":174,"./tool_manager":175}],172:[function(e,t){function a(e){this.props=e,this.doc=e.doc,this.node=e.node}var n=e("../basics");a.Prototype=function(){this.tagName="div",this.createElement=function(){var e=document.createElement(this.tagName),t=this.getClassNames();return $(e).addClass(t),e.dataset.id=this.node.id,e},this.getClassNames=function(){return[]},this.render=function(){var e=this.createElement(),t=this.props.children;if(t)for(var i=0;i<t.length;i++){var c=t[i];if(n.isString(c))e.appendChild(document.createTextNode(c));else if(c instanceof a){var r=c.render();e.appendChild(r)}}return e}},n.initClass(a),t.exports=a},{"../basics":124}],173:[function(e,t){"use strict";function a(e,t){n.EventEmitter.call(this),t=t||{},this.__id__=c++,this.element=null,this.$element=null,this.editor=e,this.domSelection=null,this.logger=t.logger||window.console,this.$=$,this.$window=this.$(window),this.$document=this.$(window.document),this.dragging=!1,this._onMouseUp=n.bind(this.onMouseUp,this),this._onMouseDown=n.bind(this.onMouseDown,this),this._onMouseMove=n.bind(this.onMouseMove,this),this._onKeyDown=n.bind(this.onKeyDown,this),this._onTextInput=n.bind(this.onTextInput,this),this._onTextInputShim=n.bind(this.onTextInputShim,this),this._onCompositionEnd=n.bind(this.onCompositionEnd,this),this._onBlur=n.bind(this.onBlur,this),this._onFocus=n.bind(this.onFocus,this),this._onDomMutations=n.bind(this.onDomMutations,this),this.domObserver=new window.MutationObserver(this._onDomMutations),this.domObserverConfig={subtree:!0,characterData:!0},this.skipNextObservation=!1,this.isIE=a.detectIE(),this.isFF=window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}var n=e("../basics"),i=e("./dom_selection"),c=0;a.Prototype=function(){this.getContainerName=function(){return this.editor.isContainerEditor()?this.editor.getContainerName():void 0},this.getContainer=function(){return this.editor.getContainer()},this.getEditor=function(){return this.editor},this.dispose=function(){this.detach()},this.attach=function(e){if(!e)throw new Error("Illegal argument: Surface element is required. was "+e);var t=this.editor.getDocument();this.element=e,this.$element=$(e),this.$element.prop("contentEditable","true"),this.domSelection=new i(e,this.editor.getContainer()),this.$element.on("keydown",this._onKeyDown),this.element.addEventListener&&this.element.addEventListener("compositionend",this._onCompositionEnd,!1),window.TextEvent&&!this.isIE?this.element.addEventListener("textInput",this._onTextInput,!1):this.$element.on("keypress",this._onTextInputShim),this.$element.on("mousemove",this._onMouseMove),this.$element.on("mousedown",this._onMouseDown),this.$element.on("blur",this._onBlur),this.$element.on("focus",this._onFocus),t.connect(this,{"document:changed":this.onDocumentChange}),this.domObserver.observe(e,this.domObserverConfig)},this.detach=function(){var e=this.editor.getDocument();this.domObserver.disconnect(),e.disconnect(this),this.$element.off("mousemove",this._onMouseMove),this.$element.off("mousedown",this._onMouseDown),this.$element.off("blur",this._onBlur),this.$element.off("focus",this._onFocus),this.$element.off("keydown",this._onKeyDown),this.element.addEventListener&&this.element.removeEventListener("compositionend",this._onCompositionEnd,!1),window.TextEvent&&!this.isIE?this.element.removeEventListener("textInput",this._onTextInput,!1):this.$element.off("keypress",this._onTextInputShim),this.editor.setContainer(null),this.element=null,this.$element=null,this.domSelection=null},this.onKeyDown=function(e){if(229!==e.which){switch(e.keyCode){case a.Keys.LEFT:case a.Keys.RIGHT:return this.handleLeftOrRightArrowKey(e);case a.Keys.UP:case a.Keys.DOWN:return this.handleUpOrDownArrowKey(e);case a.Keys.ENTER:return this.handleEnterKey(e);case a.Keys.BACKSPACE:case a.Keys.DELETE:return e.preventDefault(),this.handleDeleteKey(e)}var t=!1;if((e.ctrlKey||e.metaKey)&&65===e.keyCode){console.log("Selecting all..."),this.editor.selectAll();var n=this.editor.selection;this.setSelection(n),this.domSelection.set(n),this.emit("selection:changed",n),t=!0}t&&(e.preventDefault(),e.stopPropagation())}},this.onTextInput=function(e){if(e.data){this.skipNextObservation=!0;var t=this.editor.selection,a=t.getRange(),n=i.getDomNodeForPath(this.element,a.start.path);this.editor.insertText(e.data,t,{source:n,typing:!0}),t.isContainerSelection()&&(e.preventDefault(),e.stopPropagation())}},this.onCompositionEnd=function(e){try{var t=this.editor.selection.getRange(),a=i.getDomNodeForPath(this.element,t.start.path);this.editor.insertText(e.data,this.editor.selection,{source:a,mode:"typing"})}catch(n){console.error(n)}},this.onTextInputShim=function(e){if(!(0===e.which||0===e.charCode||e.keyCode===a.Keys.TAB||e.keyCode===a.Keys.ESCAPE||e.metaKey||!!e.ctrlKey^!!e.altKey)){var t,n,c,r=String.fromCharCode(e.which);return this.skipNextObservation=!0,t=this.editor.selection,e.shiftKey||(r=r.toLowerCase()),r.length>0?(t=this.editor.selection,n=t.getRange(),c=i.getDomNodeForPath(this.element,n.start.path),this.editor.insertText(r,t,{source:c,typing:!0}),void(t.isContainerSelection()&&(e.preventDefault(),e.stopPropagation()))):(e.preventDefault(),void e.stopPropagation())}},this.handleLeftOrRightArrowKey=function(e){var t=this;window.setTimeout(function(){t._updateModelSelection({left:e.keyCode===a.Keys.LEFT,right:e.keyCode===a.Keys.RIGHT})})},this.handleUpOrDownArrowKey=function(){var e=this;window.setTimeout(function(){e._updateModelSelection()})},this.handleEnterKey=function(e){e.preventDefault();var t=this.domSelection.get();e.shiftKey?this.editor.softBreak(t):this.editor.break(t)},this.handleDeleteKey=function(e){e.preventDefault();var t=this.domSelection.get(),n=e.keyCode===a.Keys.BACKSPACE?"left":"right";this.editor.delete(t,n)},this.onMouseDown=function(e){1===e.which&&(this.dragging=!0,this.$document.on("mouseup",this._onMouseUp))},this.onMouseUp=function(){this.$document.off("mouseup",this._onMouseUp),this.dragging=!1;var e=this;setTimeout(function(){e._setModelSelection(e.domSelection.get())})},this.onMouseMove=function(){this.dragging},this.onBlur=function(){this.isFocused=!1,this.setSelection(n.Document.nullSelection)},this.onFocus=function(){this.isFocused=!0},this.onDomMutations=function(){return this.skipNextObservation?void(this.skipNextObservation=!1):void console.info("We want to enable a DOM MutationObserver which catches all changes made by native interfaces (such as spell corrections, etc). Lookout for this message and try to set Surface.skipNextObservation=true when you know that you will mutate the DOM.")},this.onDocumentChange=function(e,t){if(this.isFocused&&!t.replay&&!t.typing){var a=this;window.setTimeout(function(){if(a.domSelection){var t=e.after.selection;a.editor.selection=t,a.domSelection.set(t),a.emit("selection:changed",t)}})}},this.getSelection=function(){return this.editor.selection},this.setSelection=function(e){this._setModelSelection(e)&&this.domSelection&&this.domSelection.set(e)},this.rerenderDomSelection=function(){this.isFocused&&this.domSelection.set(this.getSelection())},this._updateModelSelection=function(e){this._setModelSelection(this.domSelection.get(e))},this._setModelSelection=function(e){return e=e||n.Document.nullSelection,this.editor.selection.equals(e)?void 0:(this.editor.selection=e,this.emit("selection:changed",e),!0)},this.getLogger=function(){return this.logger}},n.inherit(a,n.EventEmitter),a.Keys={UNDEFINED:0,BACKSPACE:8,DELETE:46,LEFT:37,RIGHT:39,UP:38,DOWN:40,ENTER:13,END:35,HOME:36,TAB:9,PAGEUP:33,PAGEDOWN:34,ESCAPE:27,SHIFT:16,SPACE:32},a.detectIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var a=e.indexOf("Trident/");if(a>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var i=e.indexOf("Edge/");return i>0?parseInt(e.substring(i+5,e.indexOf(".",i)),10):!1},t.exports=a},{"../basics":124,"./dom_selection":169}],174:[function(e,t){function a(){}var n=e("../basics"),i=n.Document.Annotator,c=e("./node_view"),r=e("./annotation_view");a.Prototype=function(){this.getDocument=function(){throw new Error("This is abstract")},this.getPath=function(){throw new Error("This is abstract")},this.getElement=function(){throw new Error("This is abstract")},this.getAnnotations=function(){var e=this.getDocument(),t=this.getPath();return e.getIndex("annotations").get(t)},this.attach=function(){var e=this.getDocument(),t=this.getPath();e.getEventProxy("path").add(t,this,this.propertyDidChange)},this.detach=function(){var e=this.getDocument(),t=this.getPath();e.getEventProxy("path").remove(t,this)},this.renderContent=function(){var e=this.getDocument(),t=new a.ContentView({doc:e,children:this.renderChildren()}),n=t.render();n.appendChild(document.createElement("br"));var i=this.getElement();i.innerHTML="",i.appendChild(n)},this.renderChildren=function(){var e=this.getDocument(),t=this.getPath(),a=e.get(t)||"",n=this.getAnnotations(),c=new i;c.onText=function(e,t){e.children.push(t)},c.onEnter=function(t){var a=t.node,n=r,i=[];return{ViewClass:n,props:{doc:e,node:a,classNames:i},children:[]}},c.onExit=function(e,t,a){var n=t.props;n.children=t.children;var i=new t.ViewClass(n);a.children.push(i)};var s={children:[]};return c.start(s,a,n),s.children},this.propertyDidChange=function(e,t){t.source!==this.getElement()&&this.renderContent()}},n.initClass(a),a.ContentView=c.extend({createElement:function(){return document.createDocumentFragment()}}),t.exports=a},{"../basics":124,"./annotation_view":166,"./node_view":172}],175:[function(e,t){"use strict";var a=e("../basics"),n=e("../basics/helpers"),i=function(e,t){this.doc=e,this.tools={},this.isToolEnabled=t.isToolEnabled};i.Prototype=function(){this.registerTool=function(e,t){if(t=t||a.uuid(),this.tools[t]=e,e.name)throw new Error("Tool has already been registered");e.name=t},this.unregisterTool=function(e){n.each(this.tools,function(t,a){e===t&&delete this.tools[a]},this)},this.updateTools=function(e){n.each(this.tools,function(t){this.isToolEnabled(t.name)?t.updateToolState(e):t.disableTool()}.bind(this))}},a.initClass(i),t.exports=i},{"../basics":124,"../basics/helpers":123}],176:[function(e,t){var a=e("substance"),n=React.createElement,i=a.Surface,c=(e("substance/helpers"),e("./text_property"),React.createClass({displayName:"ContainerComponent",contextTypes:{componentFactory:React.PropTypes.object.isRequired,notifications:React.PropTypes.object.isRequired},childContextTypes:{surface:React.PropTypes.object},getInitialState:function(){var e=new i.ContainerEditor(this.props.doc.get("content"));e.defaultTextType="text";var t={logger:this.context.notifications};return this.surface=new i(e,t),{}},getChildContext:function(){return{surface:this.surface}},render:function(){var e=this.props.node,t=this.props.doc,a=this.props.writerCtrl,i=this.context.componentFactory,c=[];return c=c.concat(e.nodes.map(function(e){var c=t.get(e),r=i.get(c.type);if(!r)throw new Error("Could not resolve a component for type: "+c.type);return n(r,{key:c.id,doc:t,node:c,writerCtrl:a})})),n("div",{className:"content-wrapper"},n("div",{ref:"content-editor",className:"content",contentEditable:!0,"data-id":"content"},n("div",{className:"container-node "+this.props.node.id,spellCheck:!1,"data-id":this.props.node.id},n("div",{className:"nodes"},c))))},componentDidMount:function(){this.props.writerCtrl.registerSurface(this.surface,"content"),this.surface.attach(this.getDOMNode())},componentDidUpdate:function(){if(!this.surface.__prerendering__){var e=this;setTimeout(function(){e.surface.rerenderDomSelection()})}},componentWillUnmount:function(){this.props.writerCtrl.unregisterSurface(this.surface),this.surface.detach()}}));t.exports=c},{"./text_property":178,substance:110,"substance/helpers":109}],177:[function(e,t){var a=React.createElement,n=e("./text_property"),i=e("substance/helpers"),c=React.createClass({displayName:"TextComponent",shouldComponentUpdate:function(){var e=i.pluck(this.refs.textProp.getAnnotations(),"id"),t=i.intersection(e,this.refs.textProp.getHighlights()),a=!0;return this._prevTextAnnotations&&(i.isEqual(e,this._prevTextAnnotations)&&i.isEqual(t,this._prevTextHighlights)?a=!1:console.log("rerender of ",this.props.node.id)),this._prevTextAnnotations=e,this._prevTextHighlights=t,a},componentDidUpdate:function(){},render:function(){return a("div",{className:"content-node text","data-id":this.props.node.id},a(n,{ref:"textProp",doc:this.props.doc,path:[this.props.node.id,"content"],writerCtrl:this.props.writerCtrl}))}});t.exports=c},{"./text_property":178,"substance/helpers":109}],178:[function(e,t){var a=e("substance"),n=React.createElement,i=a.Surface.TextProperty,c=React.createClass(a.extend({},i.prototype,{displayName:"TextProperty",contextTypes:{surface:React.PropTypes.object.isRequired,getHighlightedNodes:React.PropTypes.func.isRequired,getHighlightsForTextProperty:React.PropTypes.func.isRequired},getInitialState:function(){return{highlights:[]}},shouldComponentUpdate:function(){return this.renderManually(),this.updateHighlights(),!1},componentDidMount:function(){var e=this.props.doc;e.getEventProxy("path").add(this.props.path,this,this.textPropertyDidChange),this.__mounted__=!0,this.renderManually()},componentWillUnmount:function(){var e=this.props.doc;e.getEventProxy("path").remove(this.props.path,this),this.__mounted__=!1},render:function(){return n(this.props.tagName||"span",{className:"text-property "+(this.props.className||""),spellCheck:!1,style:{whiteSpace:"pre-wrap"},"data-path":this.props.path.join(".")})},renderManually:function(){return this.__mounted__?(this.renderContent(),void this.updateHighlights()):void console.warn("Tried to render an unmounted TextPropertyComponent.")},getAnnotations:function(){var e=this.props.doc,t=this.context.surface,a=this.props.path,n=e.getIndex("annotations").get(a),i=t.getContainerName();if(i){var c=e.getIndex("container-annotations").get(a,i);n=n.concat(c)}var r=this.context.getHighlightsForTextProperty(this);return n=n.concat(r)},getHighlights:function(){return this.context.getHighlightedNodes()},updateHighlights:function(){if(this.context.getHighlightedNodes)for(var e=this.context.getHighlightedNodes(),t=this.getDOMNode(),a=$(t).find(".annotation, .container-annotation"),n=0;n<a.length;n++){var i=a[n],c=e.indexOf(i.dataset.id)>=0;c?$(i).addClass("active"):$(i).removeClass("active")}},_rerenderAndRecoverSelection:function(){this.renderManually(),this.context.surface.rerenderDomSelection()},textPropertyDidChange:function(e,t){if(t.source===this.getDOMNode()){if(!this._debouncedRerender){var n=200;this._debouncedRerender=a.debounce(a.bind(this._rerenderAndRecoverSelection,this),n)}return void this._debouncedRerender()}this.renderManually()},getContainer:function(){return this.context.surface.getContainer()},getDocument:function(){return this.props.doc},getPath:function(){return this.props.path},getElement:function(){return this.getDOMNode()}}));c.Highlight=function(e,t,a,n){n=n||{},this.id=n.id,this.path=e,this.startOffset=t,this.endOffset=a,this.classNames=n.classNames},a.initClass(c.Highlight),c.Highlight.prototype.getClassNames=function(){return this.classNames},c.Highlight.static.level=Number.MAX_VALUE,t.exports=c},{substance:110}],179:[function(e,t){var a=React.createElement,n=e("substance"),i=e("./scrollbar"),c=React.createClass({displayName:"ContentPanel",componentDidMount:function(){this.updateScrollbar(),$(window).on("resize",this.updateScrollbar);var e=this.props.writerCtrl.doc;e.connect(this,{"document:changed":this.onDocumentChange})},componentWillUnmount:function(){doc.disconnect(this),$(window).off("resize")},onDocumentChange:function(){setTimeout(function(){this.updateScrollbar()}.bind(this),0)},componentDidUpdate:function(){this.updateScrollbar()},updateScrollbar:function(){var e=this.refs.scrollbar,t=this.refs.panelContent.getDOMNode();n.delay(function(){e.update(t)},0),$(t).off("scroll"),$(t).on("scroll",this._onScroll)},_onScroll:function(){var e=this.refs.panelContent.getDOMNode();this.refs.scrollbar.update(e)},getContentEditor:function(){var e=this.props.writerCtrl,t=e.doc,n=e.getNodeComponentClass("container");return a(n,{writerCtrl:e,doc:t,node:t.get("content"),ref:"contentEditor"})},render:function(){var e=this.props.writerCtrl;return a("div",{className:"panel content-panel-component"},a(i,{id:"content-scrollbar",contextId:e.getState().contextId,highlights:e.getHighlightedNodes.bind(e),ref:"scrollbar"}),a("div",{className:"panel-content",ref:"panelContent"},this.getContentEditor()))}});t.exports=c},{"./scrollbar":182,substance:110}],180:[function(e,t){var a=React.createElement,n=React.createClass({displayName:"ContentTools",render:function(){var e=this.props.writerCtrl.getTools(),t={writerCtrl:this.props.writerCtrl,doc:this.props.doc,switchContext:this.props.switchContext},n=e.map(function(e,n){return t.key=n,a(e,t)});return a("div",{className:"content-tools-component"},a("div",{className:"tools"},n))}});t.exports=n},{}],181:[function(e,t){"use strict";var a=e("./writer"),n=e("./components/container_component"),i=e("./components/text_component"),c=e("./tools/save_tool"),r=e("./tools/undo_tool"),s=e("./tools/redo_tool"),b=e("./tools/strong_tool"),o=e("./tools/emphasis_tool"),d=e("./tools/annotation_tool_mixin"),f=e("./components/text_property");a.CoreModule={name:"core",components:{container:n,text:i},panels:[],stateHandlers:{},tools:[c,r,s,b,o]},a.AnnotationToolMixin=d,a.TextProperty=f,t.exports=a},{"./components/container_component":176,"./components/text_component":177,"./components/text_property":178,"./tools/annotation_tool_mixin":184,"./tools/emphasis_tool":185,"./tools/redo_tool":186,"./tools/save_tool":187,"./tools/strong_tool":188,"./tools/undo_tool":189,"./writer":190}],182:[function(e,t){"use strict";var a=React.createElement,n=(e("substance/helpers"),7),i=React.createClass({displayName:"Scrollbar",getInitialState:function(){return{thumb:{top:0,height:20},highlights:[]}},componentDidMount:function(){$(window).mousemove(this.mouseMove),$(window).mouseup(this.mouseUp)},mouseDown:function(e){this._mouseDown=!0;var t=$(this.getDOMNode()).offset().top,a=e.pageY-t,n=this.refs.thumb.getDOMNode();return e.target!==n?(this.offset=$(n).height()/2,this.mouseMove(e)):this.offset=a-$(n).position().top,!1},mouseUp:function(){this._mouseDown=!1},mouseMove:function(e){if(this._mouseDown){var t=$(this.getDOMNode()).offset().top,a=e.pageY-t,n=(a-this.offset)*this.factor;this.scrollTop=$(this.panelContentEl).scrollTop(n)}},update:function(e){var t=this;this.panelContentEl=e;var a=0;$(e).children().each(function(){a+=$(this).outerHeight()});var n=$(t.panelContentEl).height();this.factor=a/n;var c=$(t.panelContentEl).scrollTop(),r=[];this.props.highlights().forEach(function(e){var a=$(t.panelContentEl).find("*[data-id="+e+"]");if(a.length){var n=a.position().top/t.factor,c=a.outerHeight(!0)/t.factor;c<i.overlayMinHeight&&(c=i.overlayMinHeight,n-=.5*i.overlayMinHeight);var s={id:e,top:n,height:c};r.push(s)}});var s={top:c/this.factor,height:n/this.factor};this.setState({thumb:s,highlights:r})},render:function(){var e=this.state.highlights.map(function(e){return a("div",{className:"highlight",key:e.id,style:{top:e.top,height:e.height}})}),t=a("div",{ref:"thumb",className:"thumb",style:{top:this.state.thumb.top,height:Math.max(this.state.thumb.height,n)}});return a("div",{className:"scrollbar-component "+this.props.contextId,onMouseDown:this.mouseDown},t,a("div",{className:"highlights"},e))}});i.overlayMinHeight=5,t.exports=i},{"substance/helpers":109}],183:[function(e,t){var a=React.createElement,n={error:"fa-exclamation-circle",info:"fa-info",progress:"fa-exchange",success:"fa-check-circle"},i=React.createClass({contextTypes:{notifications:React.PropTypes.object.isRequired},displayName:"StatusBar",getInitialState:function(){return{message:null}},componentDidMount:function(){var e=this.context.notifications;e.connect(this,{"messages:updated":this.handleNotificationUpdate})},handleNotificationUpdate:function(e){var t=e.pop();this.setState({message:t})},render:function(){var e,t=this.state.message,i=["status-bar-component"];return t?(i.push(t.type),e=a("div",{className:"notifications"},a("div",{className:"icon",dangerouslySetInnerHTML:{__html:'<i class="fa '+n[t.type]+'"></i>'}}),a("div",{className:"message"},t.message))):e=a("div"),a("div",{className:i.join(" ")},a("div",{className:"document-status"},this.props.doc.get("document").title),e)
}});t.exports=i},{}],184:[function(e,t){var a=React.createElement,n=e("substance"),i=n.extend({},n.Surface.AnnotationTool.prototype,{getInitialState:function(){return{active:!1,selected:!1}},render:function(){var e=[this.annotationType+"-tool-component","tool"];return this.state.active&&e.push("active"),this.state.selected&&e.push("selected"),a("a",{className:e.join(" "),href:"#",title:this.annotationType,onMouseDown:this.handleMouseDown,onClick:this.handleClick,dangerouslySetInnerHTML:{__html:'<i class="fa '+this.toolIcon+'"></i>'}})},componentWillMount:function(){var e=this.props.writerCtrl.toolManager;e.registerTool(this,this.annotationType)},componentWillUnmount:function(){var e=this.props.writerCtrl.toolManager;e.unregisterTool(this)},getDocument:function(){return this.props.writerCtrl.doc},getContainer:function(){var e=this.props.writerCtrl.getSurface();return e.getContainer()},getToolState:function(){return this.state},setToolState:function(e){return this.replaceState(e)},getAnnotationType:function(){return this.annotationType},handleClick:function(e){e.preventDefault(e)},handleMouseDown:function(e){e.preventDefault(),this.performAction()}});t.exports=i},{substance:110}],185:[function(e,t){var a=e("./annotation_tool_mixin"),n=React.createClass({mixins:[a],displayName:"EmphasisTool",annotationType:"emphasis",toolIcon:"fa-italic"});t.exports=n},{"./annotation_tool_mixin":184}],186:[function(e,t){var a=React.createElement,n=React.createClass({displayName:"SaveTool",contextTypes:{backend:React.PropTypes.object.isRequired},getDocument:function(){return this.props.writerCtrl.doc},componentDidMount:function(){var e=this.getDocument();e.connect(this,{"document:changed":this.handleDocumentChange})},handleClick:function(e){e.preventDefault()},handleMouseDown:function(e){if(e.preventDefault(),this.state.active){var t=this.getDocument();t.redo()}},shouldComponentUpdate:function(e,t){return this.state.active!==t.active},handleDocumentChange:function(){this.setState({active:this.getDocument().undone.length>0})},getInitialState:function(){return{active:!1}},render:function(){var e=["redo-tool-component","tool"];return this.state.active&&e.push("active"),a("a",{className:e.join(" "),href:"#",dangerouslySetInnerHTML:{__html:'<i class="fa fa-rotate-right"></i>'},title:"Undo",onMouseDown:this.handleMouseDown,onClick:this.handleClick})}});t.exports=n},{}],187:[function(e,t){var a=React.createElement,n=React.createClass({displayName:"SaveTool",contextTypes:{backend:React.PropTypes.object.isRequired,notifications:React.PropTypes.object.isRequired},componentDidMount:function(){var e=this.props.writerCtrl,t=e.doc;t.connect(this,{"document:changed":this.handleDocumentChange,"document:saved":this.handleDocumentSaved})},handleMouseDown:function(e){e.preventDefault();var t=this.context.backend,a=this.context.notifications,n=this.props.writerCtrl,i=n.doc;this.state.active&&!i.__isSaving&&(i.__isSaving=!0,a.addMessage({type:"progress",message:"Saving document ..."}),t.saveDocument(i,function(e){i.__isSaving=!1,e?a.addMessage({type:"error",message:e.message}):(a.addMessage({type:"info",message:"No changes"}),this.setState({active:!1}))}.bind(this)))},shouldComponentUpdate:function(e,t){return this.state.active!==t.active},handleDocumentSaved:function(){this.setState({active:!1})},handleDocumentChange:function(){this.setState({active:!0})},getInitialState:function(){return{active:!1}},render:function(){var e=["save-tool-component","tool"];return this.state.active&&e.push("active"),a("a",{className:e.join(" "),href:"#",dangerouslySetInnerHTML:{__html:'<i class="fa fa-save"></i>'},title:"Save document",onMouseDown:this.handleMouseDown})}});t.exports=n},{}],188:[function(e,t){var a=e("./annotation_tool_mixin"),n=React.createClass({mixins:[a],displayName:"StrongTool",annotationType:"strong",toolIcon:"fa-bold"});t.exports=n},{"./annotation_tool_mixin":184}],189:[function(e,t){var a=React.createElement,n=React.createClass({displayName:"SaveTool",contextTypes:{backend:React.PropTypes.object.isRequired},getDocument:function(){return this.props.writerCtrl.doc},componentDidMount:function(){var e=this.getDocument();e.connect(this,{"document:changed":this.handleDocumentChange})},handleClick:function(e){e.preventDefault()},handleMouseDown:function(e){if(e.preventDefault(),e.stopPropagation(),this.state.active){var t=this.getDocument();t.undo()}},shouldComponentUpdate:function(e,t){return this.state.active!==t.active},handleDocumentChange:function(){this.setState({active:this.getDocument().done.length>0})},getInitialState:function(){return{active:!1}},render:function(){var e=["undo-tool-component","tool"];return this.state.active&&e.push("active"),a("a",{className:e.join(" "),href:"#",dangerouslySetInnerHTML:{__html:'<i class="fa fa-undo"></i>'},title:"Undo",onMouseDown:this.handleMouseDown,onClick:this.handleClick})}});t.exports=n},{}],190:[function(e,t){var a=React.createElement,n=e("substance"),i=e("./content_tools"),c=e("./content_panel"),r=e("./writer_controller"),s=e("./status_bar"),b=React.createClass({displayName:"Writer",contextTypes:{backend:React.PropTypes.object.isRequired,notifications:React.PropTypes.object.isRequired,htmlImporter:React.PropTypes.object.isRequired,htmlExporter:React.PropTypes.object.isRequired},childContextTypes:{getHighlightedNodes:React.PropTypes.func,getHighlightsForTextProperty:React.PropTypes.func},getChildContext:function(){return{getHighlightedNodes:this.getHighlightedNodes,getHighlightsForTextProperty:this.getHighlightsForTextProperty}},getInitialState:function(){return{contextId:"metadata"}},componentWillMount:function(){this.writerCtrl=new r({doc:this.props.doc,writerComponent:this,config:this.props.config})},componentWillUnmount:function(){this.clipboard.detach(this.getDOMNode())},shouldComponentUpdate:function(e,t){var a=JSON.stringify(this.state),i=JSON.stringify(t);return n.isEqual(a,i)?!1:!0},componentDidMount:function(){window.devMode||setInterval(function(){this.requestAutoSave()}.bind(this),1e4);var e=this.getDOMNode(),t=$(e).find(".clipboard");this.clipboard=new n.Surface.Clipboard(this.writerCtrl,t[0],this.context.htmlImporter,this.context.htmlExporter),this.clipboard.attach(e)},requestAutoSave:function(){var e=this.props.doc,t=this.context.backend,a=this.context.notifications;e.__dirty&&!e.__isSaving&&(a.addMessage({type:"info",message:"Autosaving ..."}),e.__isSaving=!0,t.saveDocument(e,function(t){e.__isSaving=!1,t?(a.addMessage({type:"error",message:t.message||t.toString()}),console.error("saving of document failed")):(e.emit("document:saved"),a.addMessage({type:"info",message:"No changes"}),e.__dirty=!1)}))},handleContextSwitch:function(e){this.replaceState({contextId:e})},handleCloseDialog:function(e){e.preventDefault(),console.log("handling close"),this.replaceState(this.getInitialState())},handleContextToggle:function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-id");this.handleContextSwitch(t)},createContextToggles:function(){var e=this.writerCtrl.getPanels(),t=this.state.contextId,i=this,c=e.map(function(e){if(e.isDialog&&e.contextId!==t)return null;var n=["toggle-context"];return e.contextId===t&&n.push("active"),e.isDialog?a("div"):a("a",{className:n.join(" "),href:"#",key:e.contextId,"data-id":e.contextId,onClick:i.handleContextToggle,dangerouslySetInnerHTML:{__html:'<i class="fa '+e.icon+'"></i> '+e.displayName}})}.bind(this));return a("div",{className:"context-toggles"},n.compact(c))},createContextPanel:function(){for(var e=null,t=this.writerCtrl.getModules(),n=0;n<t.length&&!e;n++){var i=t[n].stateHandlers;i&&i.handleContextPanelCreation&&(e=i.handleContextPanelCreation(this.writerCtrl))}return e?e:a("div",null,"No panels are registered")},render:function(){return a("div",{className:"writer-component",onKeyDown:this.handleApplicationKeyCombos},a("div",{className:"main-container"},a(i,{writerCtrl:this.writerCtrl}),a(c,{writerCtrl:this.writerCtrl})),a("div",{className:"resource-container"},this.createContextToggles(),this.createContextPanel(this)),a(s,{doc:this.props.doc}),a("div",{className:"clipboard"}))},getHighlightedNodes:function(){return this.writerCtrl.getHighlightedNodes()},getHighlightsForTextProperty:function(){return this.writerCtrl.getHighlightsForTextProperty.apply(this.writerCtrl,arguments)},handleApplicationKeyCombos:function(e){var t=!1;90===e.keyCode&&(e.metaKey||e.ctrlKey)?(e.shiftKey?this.writerCtrl.redo():this.writerCtrl.undo(),t=!0):27===e.keyCode?(this.replaceState(this.getInitialState()),t=!0):83===e.keyCode&&(e.metaKey||e.ctrlKey)&&(this.requestAutoSave(),t=!0),t&&(e.preventDefault(),e.stopPropagation())}});t.exports=b},{"./content_panel":179,"./content_tools":180,"./status_bar":183,"./writer_controller":191,substance:110}],191:[function(e,t){"use strict";var a=e("substance"),n=a.Document,i=n.Selection,c=e("substance/helpers"),r=e("substance").Surface.ToolManager,s=e("./components/text_property").Highlight,b=function(e){a.EventEmitter.call(this),this.config=e.config,this.doc=e.doc,this.writerComponent=e.writerComponent,this.surfaces={},this.doc.connect(this,{"transaction:started":this.transactionStarted,"document:changed":this.onDocumentChanged}),this.toolManager=new r(this.doc,{isToolEnabled:this.isToolEnabled.bind(this)})};b.Prototype=function(){this.replaceState=function(e){this.writerComponent.replaceState(e)},this.transactionStarted=function(e){e.before.state=this.writerComponent.state,e.before.selection=this.getSelection(),this.activeSurface&&(e.before.surfaceName=this.activeSurface.name)},this.isToolEnabled=function(e){var t=this.getSurface(),a=t.enabledTools;return c.includes(a,e)},this.registerSurface=function(e,t,n){if(t=t||a.uuid(),n=n||{},this.surfaces[t]=e,e.name)throw new Error("Surface has already been attached");e.name=t,e.enabledTools=n.enabledTools||[],e.connect(this,{"selection:changed":function(t){this.updateSurface(e),this.onSelectionChanged(t),this.emit("selection:changed",t)}})},this.onSelectionChanged=function(e){for(var t=this.getModules(),a=!1,n=0;n<t.length&&!a;n++){var i=t[n].stateHandlers;i&&i.handleSelectionChange&&(a=i.handleSelectionChange(this,e))}this.toolManager.updateTools(e)},this.onDocumentChanged=function(e,t){this.doc.__dirty=!0;var a=this.writerComponent.context.notifications;if(a.addMessage({type:"info",message:"Unsaved changes"}),t.replay){this.replaceState(e.after.state);var n=this;window.setTimeout(function(){if(e.after.surfaceName){var t=n.surfaces[e.after.surfaceName];t.setSelection(e.after.selection)}})}},this.updateSurface=function(e){this.activeSurface=e},this.getSurface=function(){return this.activeSurface},this.getSelection=function(){return this.activeSurface?this.activeSurface.getSelection():n.nullSelection},this.unregisterSurface=function(e){a.each(this.surfaces,function(t,a){e===t&&delete this.surfaces[a]},this),e.disconnect(this)},this.getState=function(){return this.writerComponent.state},this.getModules=function(){return this.config.modules},this.getNodeComponentClass=function(e){for(var t,a=this.config.modules,n=0;n<a.length;n++){var i=a[n];i.components&&i.components[e]&&(t=i.components[e])}if(!t)throw new Error("No component found for "+e);return t},this.getPanels=function(){for(var e=this.config.modules,t=[],a=0;a<e.length;a++){var n=e[a];t=t.concat(n.panels)}return t},this.getTools=function(){for(var e=this.config.modules,t=[],a=0;a<e.length;a++){var n=e[a];n.tools&&(t=t.concat(n.tools))}return t},this.getHighlightedNodes=function(){for(var e=this.getModules(),t=null,a=0;a<e.length&&!t;a++){var n=e[a].stateHandlers;n&&n.getHighlightedNodes&&(t=n.getHighlightedNodes(this))}return t||[]},this.getHighlightsForTextProperty=function(e){var t=this.doc,n=e.getContainer(),i=new a.PathAdapter.Arrays;if(n){var r=this.getActiveContainerAnnotations();return c.each(r,function(e){var a=t.get(e);if(a){var r=n.getAnnotationFragments(a);c.each(r,function(e){i.add(e.path,new s(e.path,e.startOffset,e.endOffset,{id:a.id,classNames:a.getClassNames().replace(/_/g,"-")+" annotation-fragment"}))})}}),i.get(e.props.path)||[]}return[]},this.getActiveContainerAnnotations=function(){for(var e=this.getModules(),t=null,a=0;a<e.length&&!t;a++){var n=e[a].stateHandlers;n&&n.getActiveContainerAnnotations&&(t=n.getActiveContainerAnnotations(this))}return t||[]},this.deleteAnnotation=function(e){var t=this.doc.get(e),a=this.doc.startTransaction({selection:this.getSelection()});a.delete(e),a.save({selection:i.create(t.path,t.startOffset,t.endOffset)})},this.annotate=function(e){var t=this.getSelection(),n=e.path,i=e.startOffset,c=e.endOffset;if(!n){if(t.isNull())throw new Error("Selection is null");if(!t.isPropertySelection())throw new Error("Selection is not a PropertySelection");n=t.getPath(),i=t.getStartOffset(),c=t.getEndOffset()}var r=a.extend({},e);r.id=e.id||e.type+"_"+a.uuid(),r.path=n,r.startOffset=i,r.endOffset=c;var s=this.doc.startTransaction({selection:this.getSelection()});return r=s.create(r),s.save({selection:t}),r},this.undo=function(){this.doc.done.length>0&&this.doc.undo()},this.redo=function(){this.doc.undone.length>0&&this.doc.redo()}},a.inherit(b,a.EventEmitter),Object.defineProperty(b.prototype,"state",{get:function(){return this.writerComponent.state},set:function(){throw new Error("Immutable property. Use replaceState")}}),t.exports=b},{"./components/text_property":178,substance:110,"substance/helpers":109}],192:[function(e,t){"use strict";var a=e("./src/writer");t.exports=a},{"./src/writer":181}],193:[function(e,t){"use strict";var a=e("substance"),n=React.createElement,i=e("substance/writer"),c=e("./backend"),r=e("./local_backend"),s=e("./interview"),b=e("./notification_service"),o=e("./writer_modules");window.cache={};var d=new a.Factory;a.each(o,function(e){a.each(e.components,function(e,t){d.add(t,e)})});var f;f=window.devMode?new r:new c;var p=new b,l=new a.Document.HtmlImporter({schema:s.schema,trimWhitespaces:!0,REMOVE_INNER_WS:!0});l.defaultConverter=function(e){return{type:"text",content:e.textContent}};var u=new a.Document.HtmlExporter({}),h={componentFactory:d,backend:f,notifications:p,htmlImporter:l,htmlExporter:u},_=React.createClass({displayName:"Composer",childContextTypes:{componentFactory:React.PropTypes.object,backend:React.PropTypes.object,notifications:React.PropTypes.object,htmlImporter:React.PropTypes.object,htmlExporter:React.PropTypes.object},getChildContext:function(){return h},componentDidMount:function(){f.getDocument(this.props.documentId||"example_document",function(e,t){this.setState({doc:t})}.bind(this))},getInitialState:function(){return{doc:null}},render:function(){return this.state.doc?n(i,{config:{modules:o},doc:this.state.doc,id:"writer"}):n("div",null,"Loading document...")}}),m={start:function(){React.render(n(_,{documentId:window.location.hash.slice(1)}),document.getElementById("container"))}};t.exports=m},{"./backend":194,"./interview":195,"./local_backend":214,"./notification_service":215,"./writer_modules":232,substance:110,"substance/writer":192}],194:[function(e,t){"use strict";var a=e("substance"),n=e("./interview"),i=e("substance/helpers"),c=function(){this.cache={entities:{}}};c.Prototype=function(){this.getDocument=function(e,t){$.getJSON("/api/documents/"+e,function(e){var a=new n(e);a.version=e.__v,window.doc=a,t(null,a)})},this.saveDocument=function(e,t){var a=e.toJSON();a.__v=e.version,console.log("saving doc, current version is",e.version),$.ajax({type:"PUT",url:"/api/documents/"+e.id,contentType:"application/json",data:JSON.stringify(a),success:function(a){e.version=a.documentVersion,console.log("new doc version",e.version);var n=(this.getSubjectDBVersion(),a.subjectDBVersion);this.cache.subjects&&this.cache.subjectDBVersion!==n?this.fetchSubjects():t(null)}.bind(this),error:function(e){t(e.responseText)}})},this.getEntities=function(e,t){var a=[],n=[];i.each(e,function(e){var t=this.cache.entities[e];t?n.push(t):a.push(e)}.bind(this)),this.fetchEntities(a,function(e,a){i.each(a,function(e){this.cache.entities[e.id]=e,n.push(e)},this),t(null,n)}.bind(this))},this.fetchEntities=function(e,t){return 0===e.length?t(null,[]):(console.log("Fetching entities",e),void $.getJSON("/api/entities?entityIds="+e.join(","),function(e){t(null,e.results)}))},this.getSuggestedEntities=function(e){$.getJSON("/api/search",function(t){e(null,t)})},this.searchEntities=function(e,t,a){var n;2==arguments.length?(a=t,n="/api/search?query="+encodeURIComponent(e)):n="/api/search?query="+encodeURIComponent(e)+"&type="+encodeURIComponent(t),$.getJSON(n,function(e){a(null,e)})},this.fetchSubjects=function(e){$.getJSON("/api/subjects",function(t){this.cache.subjectDB=t,e(null,t.subjects)}.bind(this))},this.getSubjects=function(e){return this.cache.subjectDB?e(null,this.cache.subjectDB.subjects):void this.fetchSubjects(e)},this.getSubjectDBVersion=function(){return this.cache.subjectDB?this.cache.subjectDB.subjectDBVersion:null}},a.initClass(c),t.exports=c},{"./interview":195,substance:110,"substance/helpers":109}],195:[function(e,t){var a=e("./interview");t.exports=a},{"./interview":196}],196:[function(e,t){"use strict";var a=e("substance"),n=a.Document,i=e("substance/article").CoreModule,c=e("./modules/base"),r=e("./modules/subjects"),s=e("./modules/entities"),b=e("./modules/timecodes"),o=e("./modules/remarks"),d=[i,c,r,s,b,o],f=new n.Schema("substance-interview","0.1.0");a.each(d,function(e){f.addNodes(e.nodes)});var p=function(e){n.call(this,f,e),a.each(d,function(e){e.initialize&&e.initialize(this)},this)};p.Prototype=function(){},a.inherit(p,n),p.schema=f,t.exports=p},{"./modules/base":198,"./modules/entities":203,"./modules/remarks":205,"./modules/subjects":208,"./modules/timecodes":211,substance:110,"substance/article":108}],197:[function(e,t){var a=e("substance"),n=a.Document.Node.extend({name:"document",properties:{guid:"string",creator:"string",title:"string","abstract":"string",abstract_en:"string",created_at:"string",updated_at:"string",published_on:"string",project_name:"string",project_location:"string",conductor:"string",operator:"string",sound_operator:"string",record_type:"string",interview_location:"string",interview_date:"string",persons_present:"string",interview_duration:"number",interviewee_bio:"string",interviewee_category:"string",interviewee_forced_labor_type:"string",interviewee_prisons:["array","string"],interviewee_waypoints:["array","waypoint"]},getWaypoints:function(){return this.interviewee_waypoints.map(function(e){return this.getDocument().get(e)}.bind(this))}});t.exports=n},{substance:110}],198:[function(e,t){var a=e("./document_node"),n=e("./text_node"),i=e("./waypoint"),c=e("./initialize");t.exports={nodes:[a,n,i],initialize:c}},{"./document_node":197,"./initialize":199,"./text_node":200,"./waypoint":201}],199:[function(e,t){function a(){}e("substance");t.exports=a},{substance:110}],200:[function(e,t){var a=e("substance/article"),n=a.Paragraph,i=n.extend({name:"text"});t.exports=i},{"substance/article":108}],201:[function(e,t){var a=e("substance"),n=a.Document.Node.extend({name:"waypoint",properties:{entityId:"string",density:"string"}});t.exports=n},{substance:110}],202:[function(e,t){var a=e("substance/article").nodes.Reference,n=a.extend({name:"entity_reference",properties:{target:"string"}});t.exports=n},{"substance/article":108}],203:[function(e,t){var a=e("./entity_reference"),n=e("./initialize");t.exports={nodes:[a],initialize:n}},{"./entity_reference":202,"./initialize":204}],204:[function(e,t){function a(e){e.entityReferencesIndex=e.addIndex("entityReferencesIndex",n.Data.Index.create({type:"entity_reference",property:"target"}))}var n=e("substance");t.exports=a},{substance:110}],205:[function(e,t){var a=e("./remark"),n=e("./initialize");t.exports={nodes:[a],initialize:n}},{"./initialize":206,"./remark":207}],206:[function(e,t){function a(e){e.remarksIndex=e.addIndex("remarksIndex",n.Data.Index.create({type:"remark",property:"id"}))}var n=e("substance");t.exports=a},{substance:110}],207:[function(e,t){var a=e("substance").Document.ContainerAnnotation,n=a.extend({name:"remark",properties:{content:"string"}});t.exports=n},{substance:110}],208:[function(e,t){var a=e("./subject_reference"),n=e("./initialize");t.exports={nodes:[a],initialize:n}},{"./initialize":209,"./subject_reference":210}],209:[function(e,t){function a(e){e.subjectReferencesIndex=e.addIndex("subjectReferencesIndex",n.Data.Index.create({type:"subject_reference",property:"target"}))}var n=e("substance");t.exports=a},{substance:110}],210:[function(e,t){var a=e("substance").Document.ContainerAnnotation,n=a.extend({name:"subject_reference",properties:{target:["array","string"]}});t.exports=n},{substance:110}],211:[function(e,t){var a=e("./timecode"),n=e("./initialize");t.exports={nodes:[a],initialize:n}},{"./initialize":212,"./timecode":213}],212:[function(e,t){function a(e){e.timecodesIndex=e.addIndex("timecodesIndex",n.Data.Index.create({type:"timecode"}))}var n=e("substance");t.exports=a},{substance:110}],213:[function(e,t){var a=e("substance"),n=a.Document.Annotation.extend({name:"timecode"});t.exports=n},{substance:110}],214:[function(e,t){var a=e("substance"),n=e("./interview"),i=e("../data/sample_doc"),c=(e("substance/helpers"),[{id:"54ef1331afda2d3c024e4818",type:"prison",name:"неизвестно /Австрия",nearest_locality:"неизвестно",country:"Австрия",description:"Респондент В. В. Щебетюк (ID 40) не помнит название села, куда был доставлен в сотаве 20 остарбайтеров. Жили в специальном охраняемым помещении, откуда их выводили на работы. Щебетюк был занят на полевых работах. В селе в том числе содержались поляки-военнопленные. ",__v:0,prison_type:["частная сельскохозяйственная ферма"],synonyms:["неизвестно /Австрия",'"работали в Австрии"; "не помню даже село"; "большой бауэр'," который имел более сто гектаров земли",' ферму большую и в деревне шоколадную фабрику"; "В селе'," значит"," там были военнопленные",'\nвоеннопленные – польские"; "Работали у этого бауэра на полю"'],id:"54ef1331afda2d3c024e4818"},{id:"54ef1331afda2d3c024e4817",type:"prison",name:"Гоппенраде",nearest_locality:"Гоппенраде",country:"Германия",description:"город в земле Мекленбург-Передняя Померания",point:[12.2736937,53.73019069999999],__v:0,prison_type:["частная сельскохозяйственная ферма"],synonyms:["Гоппенраде"],id:"54ef1331afda2d3c024e4817"},{id:"54ef1331afda2d3c024e4816",type:"prison",name:"Нахтигаль",nearest_locality:"Виттенберг",country:"Германия",description:"",point:[12.6279659,51.8739831],__v:0,prison_type:["рабочий лагерь"],synonyms:["Нахтигаль"],id:"54ef1331afda2d3c024e4816"},{id:"54ef1331afda2d3c024e4815",type:"prison",name:"неизвестно",nearest_locality:"Франкфурт-на-Маней",country:"Германия",description:"",point:[8.6821267,50.1109221],__v:0,prison_type:[""],synonyms:["неизвестно",'"распределение',' дезинфекция"'],id:"54ef1331afda2d3c024e4815"},{_id:"54ef1e26f505ed9a022fdacd",type:"toponym",name:"село Васильевское ",current_name:"",country:"Россия",description:"",point:[36.58472200000001,55.61],__v:0,prison_type:[],synonyms:[],id:"54ef1e26f505ed9a022fdacd"},{_id:"54ef1e26f505ed9a022fdacc",type:"toponym",name:"Копьевка",current_name:"",country:"Украина",description:"",__v:0,prison_type:[],synonyms:["Копиевка","укр. Копіївка"],id:"54ef1e26f505ed9a022fdacc"},{_id:"54ef1e26f505ed9a022fdacb",type:"toponym",name:"село Рукшин ",current_name:"",country:"Украина",description:"",point:[26.405833,48.4875],__v:0,prison_type:[],synonyms:["укр. Рукшин"],id:"54ef1e26f505ed9a022fdacb"},{_id:"54ef1e26f505ed9a022fdaca",type:"toponym",name:"Рухотин",current_name:"",country:"Украина",description:"",point:[26.205,48.517222],__v:0,prison_type:[],synonyms:["укр. Рухотин"],id:"54ef1e26f505ed9a022fdaca"},{_id:"54ef1e26f505ed9a022fdac9",type:"toponym",name:"Черновцы",current_name:"",country:"Украина",description:"",point:[25.9358367,48.2920787],__v:0,prison_type:[],synonyms:["укр. Чернівці́"],id:"54ef1e26f505ed9a022fdac9"},{_id:"54ef1e26f505ed9a022fdac8",type:"toponym",name:"Негин (село Каменец-Подольского района Хмельницкой области)",current_name:"",country:"Украина",description:"",point:[26.566944,48.8375],__v:0,prison_type:[],synonyms:[],id:"54ef1e26f505ed9a022fdac8"},{_id:"54f48370cdc4e45004d97ca6",type:"definition",title:"управдом",description:"управляющий домом, домами - прежнее название должностного лица, возглавляющего домоуправление",__v:0,id:"54f48370cdc4e45004d97ca6"},{_id:"54f48370cdc4e45004d97ca5",type:"definition",title:"домком",description:"домовый комитет - общественная организация жильцов",__v:0,id:"54f48370cdc4e45004d97ca5"},{_id:"54f476ba973cfcef0354adab",type:"person",name:"Мария",description:"Мария, младшая сестра О.Г. Головиной",__v:0,id:"54f476ba973cfcef0354adab"},{_id:"54f476ba973cfcef0354adac",type:"person",name:"Головина Анна Терентьевна",description:"",__v:0,id:"54f476ba973cfcef0354adac"}]),r={state:"1 item matching you query",results:[{id:"54ef1331afda2d3c024e4818",type:"prison",name:"неизвестно /Австрия",nearest_locality:"неизвестно",country:"Австрия",description:"Респондент В. В. Щебетюк (ID 40) не помнит название села, куда был доставлен в сотаве 20 остарбайтеров. Жили в специальном охраняемым помещении, откуда их выводили на работы. Щебетюк был занят на полевых работах. В селе в том числе содержались поляки-военнопленные. ",__v:0,prison_type:["частная сельскохозяйственная ферма"],synonyms:["неизвестно /Австрия",'"работали в Австрии"; "не помню даже село"; "большой бауэр'," который имел более сто гектаров земли",' ферму большую и в деревне шоколадную фабрику"; "В селе'," значит"," там были военнопленные",'\nвоеннопленные – польские"; "Работали у этого бауэра на полю"'],id:"54ef1331afda2d3c024e4818"},{id:"54ef1331afda2d3c024e4817",type:"prison",name:"Гоппенраде",nearest_locality:"Гоппенраде",country:"Германия",description:"город в земле Мекленбург-Передняя Померания",point:[12.2736937,53.73019069999999],__v:0,prison_type:["частная сельскохозяйственная ферма"],synonyms:["Гоппенраде"],id:"54ef1331afda2d3c024e4817"},{id:"54ef1331afda2d3c024e4816",type:"prison",name:"Нахтигаль",nearest_locality:"Виттенберг",country:"Германия",description:"",point:[12.6279659,51.8739831],__v:0,prison_type:["рабочий лагерь"],synonyms:["Нахтигаль"],id:"54ef1331afda2d3c024e4816"},{id:"54ef1331afda2d3c024e4815",type:"prison",name:"неизвестно",nearest_locality:"Франкфурт-на-Маней",country:"Германия",description:"",point:[8.6821267,50.1109221],__v:0,prison_type:[""],synonyms:["неизвестно",'"распределение',' дезинфекция"'],id:"54ef1331afda2d3c024e4815"}]},s={state:"4 items matching you query",results:[{id:"54ef1331afda2d3c024e4818",type:"prison",name:"неизвестно /Австрия",nearest_locality:"неизвестно",country:"Австрия",description:"Респондент В. В. Щебетюк (ID 40) не помнит название села, куда был доставлен в сотаве 20 остарбайтеров. Жили в специальном охраняемым помещении, откуда их выводили на работы. Щебетюк был занят на полевых работах. В селе в том числе содержались поляки-военнопленные. ",__v:0,prison_type:["частная сельскохозяйственная ферма"],synonyms:["неизвестно /Австрия",'"работали в Австрии"; "не помню даже село"; "большой бауэр'," который имел более сто гектаров земли",' ферму большую и в деревне шоколадную фабрику"; "В селе'," значит"," там были военнопленные",'\nвоеннопленные – польские"; "Работали у этого бауэра на полю"'],id:"54ef1331afda2d3c024e4818"},{id:"54ef1331afda2d3c024e4817",type:"prison",name:"Гоппенраде",nearest_locality:"Гоппенраде",country:"Германия",description:"город в земле Мекленбург-Передняя Померания",point:[12.2736937,53.73019069999999],__v:0,prison_type:["частная сельскохозяйственная ферма"],synonyms:["Гоппенраде"],id:"54ef1331afda2d3c024e4817"},{id:"54ef1331afda2d3c024e4816",type:"prison",name:"Нахтигаль",nearest_locality:"Виттенберг",country:"Германия",description:"",point:[12.6279659,51.8739831],__v:0,prison_type:["рабочий лагерь"],synonyms:["Нахтигаль"],id:"54ef1331afda2d3c024e4816"},{id:"54ef1331afda2d3c024e4815",type:"prison",name:"неизвестно",nearest_locality:"Франкфурт-на-Маней",country:"Германия",description:"",point:[8.6821267,50.1109221],__v:0,prison_type:[""],synonyms:["неизвестно",'"распределение',' дезинфекция"'],id:"54ef1331afda2d3c024e4815"},{_id:"54ef1e26f505ed9a022fdacd",type:"toponym",name:"село Васильевское ",current_name:"",country:"Россия",description:"",point:[36.58472200000001,55.61],__v:0,prison_type:[],synonyms:[],id:"54ef1e26f505ed9a022fdacd"},{_id:"54ef1e26f505ed9a022fdacc",type:"toponym",name:"Копьевка",current_name:"",country:"Украина",description:"",__v:0,prison_type:[],synonyms:["Копиевка","укр. Копіївка"],id:"54ef1e26f505ed9a022fdacc"},{_id:"54ef1e26f505ed9a022fdacb",type:"toponym",name:"село Рукшин ",current_name:"",country:"Украина",description:"",point:[26.405833,48.4875],__v:0,prison_type:[],synonyms:["укр. Рукшин"],id:"54ef1e26f505ed9a022fdacb"},{_id:"54ef1e26f505ed9a022fdaca",type:"toponym",name:"Рухотин",current_name:"",country:"Украина",description:"",point:[26.205,48.517222],__v:0,prison_type:[],synonyms:["укр. Рухотин"],id:"54ef1e26f505ed9a022fdaca"},{_id:"54ef1e26f505ed9a022fdac9",type:"toponym",name:"Черновцы",current_name:"",country:"Украина",description:"",point:[25.9358367,48.2920787],__v:0,prison_type:[],synonyms:["укр. Чернівці́"],id:"54ef1e26f505ed9a022fdac9"},{_id:"54ef1e26f505ed9a022fdac8",type:"toponym",name:"Негин (село Каменец-Подольского района Хмельницкой области)",current_name:"",country:"Украина",description:"",point:[26.566944,48.8375],__v:0,prison_type:[],synonyms:[],id:"54ef1e26f505ed9a022fdac8"},{_id:"54f48370cdc4e45004d97ca6",type:"definition",title:"управдом",description:"управляющий домом, домами - прежнее название должностного лица, возглавляющего домоуправление",__v:0,id:"54f48370cdc4e45004d97ca6"},{_id:"54f48370cdc4e45004d97ca5",type:"definition",title:"домком",description:"домовый комитет - общественная организация жильцов",__v:0,id:"54f48370cdc4e45004d97ca5"},{_id:"54f476ba973cfcef0354adab",type:"person",name:"Мария",description:"Мария, младшая сестра О.Г. Головиной",__v:0,id:"54f476ba973cfcef0354adab"},{_id:"54f476ba973cfcef0354adac",type:"person",name:"Головина Анна Терентьевна",description:"",__v:0,id:"54f476ba973cfcef0354adac"}]},b=[{_id:"54bae4cda868bc6fab4bcd0e",name:"Казни (в том числе потенциальные)",parent:"54bae4cda868bc6fab4bcd0d",__v:0,id:"54bae4cda868bc6fab4bcd0e"},{_id:"54bae4d0a868bc6fab4bcd16",name:"Лагеря  военнопленных",parent:"54bae493a868bc6fab4bcc30",__v:0,id:"54bae4d0a868bc6fab4bcd16"},{_id:"54bae4cda868bc6fab4bcd0f",name:"экзекуции, издевательства",parent:"54bae4cda868bc6fab4bcd0d",__v:0,id:"54bae4cda868bc6fab4bcd0f"},{_id:"54bae4d1a868bc6fab4bcd1b",name:"офлаг /Offizierslager /Oflag— лагерь для офицеров",parent:"54bae4d0a868bc6fab4bcd17",__v:0,id:"54bae4d1a868bc6fab4bcd1b"},{_id:"54bae4d5a868bc6fab4bcd24",name:"вербовочный пункт",parent:"54bae4d4a868bc6fab4bcd22",__v:0,id:"54bae4d5a868bc6fab4bcd24"},{_id:"54bae4d0a868bc6fab4bcd18",name:"приемные лагеря / Aufgangslager (дивизионные и корпусные)",parent:"54bae4d0a868bc6fab4bcd17",__v:0,id:"54bae4d0a868bc6fab4bcd18"},{_id:"54bae4caa868bc6fab4bcd05",name:"несовершеннолетний респондент (введено с ID10)",parent:"54bae4caa868bc6fab4bcd04",__v:0,id:"54bae4caa868bc6fab4bcd05"},{_id:"54bae4cfa868bc6fab4bcd14",name:"одиночный протест",parent:"54bae4cea868bc6fab4bcd12",__v:0,id:"54bae4cfa868bc6fab4bcd14"},{_id:"54bae4d4a868bc6fab4bcd21",name:"Неустановленный тип",parent:"54bae4d0a868bc6fab4bcd17",__v:0,id:"54bae4d4a868bc6fab4bcd21"},{_id:"54bae4cfa868bc6fab4bcd15",name:"организации заключенных, саботаж",parent:"54bae4cea868bc6fab4bcd12",__v:0,id:"54bae4cfa868bc6fab4bcd15"},{_id:"54bae4cea868bc6fab4bcd10",name:"помещение в карцер (бункер)",parent:"54bae4cda868bc6fab4bcd0d",__v:0,id:"54bae4cea868bc6fab4bcd10"},{_id:"54bae4d2a868bc6fab4bcd1d",name:'лагерь при заводе для рабочей команды"',parent:"54bae4d0a868bc6fab4bcd17",__v:0,id:"54bae4d2a868bc6fab4bcd1d"},{_id:"54bae4d6a868bc6fab4bcd29",name:"Топография лагеря и окрестностей",parent:"54bae4d0a868bc6fab4bcd16",__v:0,id:"54bae4d6a868bc6fab4bcd29"},{_id:"54bae4d3a868bc6fab4bcd1f",name:'лагерь при заводе для штрафной команды"',parent:"54bae4d0a868bc6fab4bcd17",__v:0,id:"54bae4d3a868bc6fab4bcd1f"},{_id:"54bae4d5a868bc6fab4bcd25",name:"Администрация и обслуживание лагеря:",parent:"54bae4d0a868bc6fab4bcd16",__v:0,id:"54bae4d5a868bc6fab4bcd25"},{_id:"54bae4d7a868bc6fab4bcd2a",name:"лагерь и окрестности",parent:"54bae4d6a868bc6fab4bcd29",__v:0,id:"54bae4d7a868bc6fab4bcd2a"},{_id:"54bae4dba868bc6fab4bcd35",name:"самостоятельная добыча пропитания (способы выживания: грабеж, сдача крови за паек )",parent:"54bae4daa868bc6fab4bcd33",__v:0,id:"54bae4dba868bc6fab4bcd35"},{_id:"54bae4d8a868bc6fab4bcd2e",name:"Режим (распорядок, банные дни)",parent:"54bae4d8a868bc6fab4bcd2d",__v:0,id:"54bae4d8a868bc6fab4bcd2e"},{_id:"54bae4d8a868bc6fab4bcd2d",name:"Регламентация лагерной жизни:",parent:"54bae4d0a868bc6fab4bcd16",__v:0,id:"54bae4d8a868bc6fab4bcd2d"},{_id:"54bae4dca868bc6fab4bcd3a",name:"Условия жизни (санитарные, обустройство барака и пр.)",parent:"54bae4d9a868bc6fab4bcd31",__v:0,id:"54bae4dca868bc6fab4bcd3a"},{_id:"54bae4d7a868bc6fab4bcd2b",name:'зоны (бараки, комнаты) иных категорий заключенных, в том числе "смертников"',parent:"54bae4d6a868bc6fab4bcd29",__v:0,id:"54bae4d7a868bc6fab4bcd2b"},{_id:"54bae4dda868bc6fab4bcd3b",name:"Иное   (игра в карты, смена фамилии)",parent:"54bae4d9a868bc6fab4bcd31",__v:0,id:"54bae4dda868bc6fab4bcd3b"},{_id:"54bae4dba868bc6fab4bcd36",name:"Переписка, посылки",parent:"54bae4d9a868bc6fab4bcd31",__v:0,id:"54bae4dba868bc6fab4bcd36"},{_id:"54bae4dfa868bc6fab4bcd41",name:"Отношения между пленными:",parent:"54bae4d0a868bc6fab4bcd16",__v:0,id:"54bae4dfa868bc6fab4bcd41"},{_id:"54bae4daa868bc6fab4bcd34",name:" лагерный паек и добавки (в том числе помощь от немцев)",parent:"54bae4daa868bc6fab4bcd33",__v:0,id:"54bae4daa868bc6fab4bcd34"},{_id:"54bae4dea868bc6fab4bcd3e",name:"Деятельность Красного Креста",parent:"54bae4d0a868bc6fab4bcd16",__v:0,id:"54bae4dea868bc6fab4bcd3e"},{_id:"54bae50ea868bc6fab4bcdb3",name:"чехи",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae50ea868bc6fab4bcdb3"},{_id:"54bae50fa868bc6fab4bcdb5",name:"сербы (югославы)",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae50fa868bc6fab4bcdb5"},{_id:"54bae50ea868bc6fab4bcdb4",name:"словаки",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae50ea868bc6fab4bcdb4"},{_id:"54bae50da868bc6fab4bcdb1",name:"датчане",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae50da868bc6fab4bcdb1"},{_id:"54bae50fa868bc6fab4bcdb6",name:"англичане",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae50fa868bc6fab4bcdb6"},{_id:"54bae511a868bc6fab4bcdba",name:"евреи",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae511a868bc6fab4bcdba"},{_id:"54bae510a868bc6fab4bcdb8",name:"итальянцы",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae510a868bc6fab4bcdb8"},{_id:"54bae515a868bc6fab4bcdc1",name:"туркмены",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae515a868bc6fab4bcdc1"},{_id:"54bae512a868bc6fab4bcdbc",name:"цыгане",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae512a868bc6fab4bcdbc"},{_id:"54bae513a868bc6fab4bcdbd",name:"армяне",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae513a868bc6fab4bcdbd"},{_id:"54bae323a868bc6fab4bcc08",name:"рабочая команда концлагеря",parent:"54bae0f5a868bc91280a8329",__v:0,id:"54bae323a868bc6fab4bcc08"},{_id:"54bae3a0a868bc6fab4bcc1c",name:"Сапожная мастерская",parent:"54bae39fa868bc6fab4bcc18",__v:0,id:"54bae3a0a868bc6fab4bcc1c"},{_id:"54bae1f5a868bc96bdab8392",name:"необозначенные",parent:"54bae0f7a868bc91280a8337",description:"",__v:0,id:"54bae1f5a868bc96bdab8392"},{_id:"54bae39ea868bc6fab4bcc15",name:"Описание места работы, режима",parent:"54bae39da868bc6fab4bcc0f",__v:0,id:"54bae39ea868bc6fab4bcc15"},{_id:"54bae39ea868bc6fab4bcc11",name:"другие категории заключенных (в т.ч.военнопленные,  по национальному признаку)",parent:"54bae39da868bc6fab4bcc0f",__v:0,id:"54bae39ea868bc6fab4bcc11"},{_id:"54bae0faa868bc91280a834c",name:"очистка русла реки (в частности, Эльбы)",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0faa868bc91280a834c"},{_id:"54bae39fa868bc6fab4bcc1b",name:"Работы временные по дому (дезинфектор)",parent:"54bae39fa868bc6fab4bcc18",__v:0,id:"54bae39fa868bc6fab4bcc1b"},{_id:"54bae40ca868bc6fab4bcc29",name:"школа (общественная сфера), уборщица",parent:"54bae40ba868bc6fab4bcc23",__v:0,id:"54bae40ca868bc6fab4bcc29"},{_id:"54bae40da868bc6fab4bcc2e",name:"кухня, столовая, ресторан",parent:"54bae40ba868bc6fab4bcc23",__v:0,id:"54bae40da868bc6fab4bcc2e"},{_id:"54bae40da868bc6fab4bcc2d",name:"разминирование после бомбёжек",parent:"54bae40ba868bc6fab4bcc23",__v:0,id:"54bae40da868bc6fab4bcc2d"},{_id:"54bae494a868bc6fab4bcc34",name:"Внутрилагерные работы",parent:"54bae493a868bc6fab4bcc31",__v:0,id:"54bae494a868bc6fab4bcc34"},{_id:"54bae497a868bc6fab4bcc42",name:"зоны (бараки) иных категорий заключенных",parent:"54bae496a868bc6fab4bcc40",__v:0,id:"54bae497a868bc6fab4bcc42"},{_id:"54bae499a868bc6fab4bcc4c",name:"самостоятельная добыча пропитания (способы выживания: грабеж, сдача крови за паек )",parent:"54bae498a868bc6fab4bcc4a",__v:0,id:"54bae499a868bc6fab4bcc4c"},{_id:"54bae499a868bc6fab4bcc4d",name:"Переписка, посылки",parent:"54bae498a868bc6fab4bcc48",__v:0,id:"54bae499a868bc6fab4bcc4d"},{_id:"54bae49aa868bc6fab4bcc52",name:"Иное (игра в карты, смена фамилии)",parent:"54bae498a868bc6fab4bcc48",__v:0,id:"54bae49aa868bc6fab4bcc52"},{_id:"54bae49ba868bc6fab4bcc57",name:"Отношения между заключенными:",parent:"54bae495a868bc6fab4bcc3b",__v:0,id:"54bae49ba868bc6fab4bcc57"},{_id:"54bae494a868bc6fab4bcc35",name:"сбор опилок (детский труд)",parent:"54bae494a868bc6fab4bcc34",__v:0,id:"54bae494a868bc6fab4bcc35"},{_id:"54bae496a868bc6fab4bcc40",name:"Топография лагеря и окрестностей",parent:"54bae495a868bc6fab4bcc3b",__v:0,id:"54bae496a868bc6fab4bcc40"},{_id:"54bae494a868bc6fab4bcc32",name:"Распределение на работу (перераспределение, сортировка в сборном лагере)",parent:"54bae493a868bc6fab4bcc31",__v:0,id:"54bae494a868bc6fab4bcc32"},{_id:"54bae495a868bc6fab4bcc3b",name:"Рабочие лагеря (трудовые)",parent:"54bae493a868bc6fab4bcc30",__v:0,id:"54bae495a868bc6fab4bcc3b"},{_id:"54bae49ba868bc6fab4bcc56",name:"Внутрилагерные работы",parent:"54bae495a868bc6fab4bcc3b",__v:0,id:"54bae49ba868bc6fab4bcc56"},{_id:"54bae495a868bc6fab4bcc37",name:"несовершеннолетний респондент (введено с ID10)",parent:"54bae494a868bc6fab4bcc36",__v:0,id:"54bae495a868bc6fab4bcc37"},{_id:"54bae497a868bc6fab4bcc45",name:"Режим (распорядок, банные дни)",parent:"54bae497a868bc6fab4bcc44",__v:0,id:"54bae497a868bc6fab4bcc45"},{_id:"54bae497a868bc6fab4bcc44",name:"Регламентация лагерной жизни:",parent:"54bae495a868bc6fab4bcc3b",__v:0,id:"54bae497a868bc6fab4bcc44"},{_id:"54bae49ba868bc6fab4bcc58",name:"дружба и переписка",parent:"54bae49ba868bc6fab4bcc57",__v:0,id:"54bae49ba868bc6fab4bcc58"},{_id:"54bae499a868bc6fab4bcc4f",name:"Свободное время, праздники (бывший досуг)",parent:"54bae498a868bc6fab4bcc48",__v:0,id:"54bae499a868bc6fab4bcc4f"},{_id:"54bae496a868bc6fab4bcc3c",name:"Администрация и обслуживание лагеря:",parent:"54bae495a868bc6fab4bcc3b",__v:0,id:"54bae496a868bc6fab4bcc3c"},{_id:"54bae49ba868bc6fab4bcc59",name:"любовь, разлука, сексуальные отношения",parent:"54bae49ba868bc6fab4bcc57",__v:0,id:"54bae49ba868bc6fab4bcc59"},{_id:"54bae497a868bc6fab4bcc41",name:"лагерь и окрестности",parent:"54bae496a868bc6fab4bcc40",__v:0,id:"54bae497a868bc6fab4bcc41"},{_id:"54bae4a1a868bc6fab4bcc73",name:"несовершеннолетний респондент (введено с ID10)",parent:"54bae4a1a868bc6fab4bcc72",__v:0,id:"54bae4a1a868bc6fab4bcc73"},{_id:"54bae49ca868bc6fab4bcc5e",name:"межнациональные отношения (в том числе упоминание национальностей)",parent:"54bae49ba868bc6fab4bcc57",__v:0,id:"54bae49ca868bc6fab4bcc5e"},{_id:"54bae49ca868bc6fab4bcc5c",name:"воровство (друг у друга), доносы, предательство",parent:"54bae49ba868bc6fab4bcc57",__v:0,id:"54bae49ca868bc6fab4bcc5c"},{_id:"54bae498a868bc6fab4bcc4b",name:" лагерный паек и добавки (в том числе помощь благотворительная от немцев)",parent:"54bae498a868bc6fab4bcc4a",__v:0,id:"54bae498a868bc6fab4bcc4b"},{_id:"54bae49fa868bc6fab4bcc68",name:"западные украинцы",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae49fa868bc6fab4bcc68"},{_id:"54bae49aa868bc6fab4bcc51",name:"Условия жизни (санитарные, обустройство барака и пр.)",parent:"54bae498a868bc6fab4bcc48",__v:0,id:"54bae49aa868bc6fab4bcc51"},{_id:"54bae4a4a868bc6fab4bcc7e",name:"экзекуции, издевательства",parent:"54bae4a3a868bc6fab4bcc7c",__v:0,id:"54bae4a4a868bc6fab4bcc7e"},{_id:"54bae4a1a868bc6fab4bcc71",name:"чернокожие узники",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae4a1a868bc6fab4bcc71"},{_id:"54bae4a3a868bc6fab4bcc79",name:"психические травмы",parent:"54bae4a2a868bc6fab4bcc75",__v:0,id:"54bae4a3a868bc6fab4bcc79"},{_id:"54bae49ba868bc6fab4bcc55",name:"Деятельность Красного Креста",parent:"54bae495a868bc6fab4bcc3b",__v:0,id:"54bae49ba868bc6fab4bcc55"},{_id:"54bae4a4a868bc6fab4bcc7f",name:"помещение в карцер (бункер)",parent:"54bae4a3a868bc6fab4bcc7c",__v:0,id:"54bae4a4a868bc6fab4bcc7f"},{_id:"54bae4a9a868bc6fab4bcc92",name:"соседние фермы /дома  и лагеря, ",parent:"54bae4a8a868bc6fab4bcc8f",__v:0,id:"54bae4a9a868bc6fab4bcc92"},{_id:"54bae49da868bc6fab4bcc5f",name:"немцы (заключенные)",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae49da868bc6fab4bcc5f"},{_id:"54bae4a7a868bc6fab4bcc8b",name:"Общение с гражданскими, военнопленными и пр.",parent:"54bae4a5a868bc6fab4bcc85",__v:0,id:"54bae4a7a868bc6fab4bcc8b"},{_id:"54bae4a9a868bc6fab4bcc94",name:"Режим (распорядок, банные дни)",parent:"54bae4a9a868bc6fab4bcc93",__v:0,id:"54bae4a9a868bc6fab4bcc94"},{_id:"54bae4a7a868bc6fab4bcc8a",name:"свободное время, праздники",parent:"54bae4a6a868bc6fab4bcc86",__v:0,id:"54bae4a7a868bc6fab4bcc8a"},{_id:"54bae4a5a868bc6fab4bcc83",name:"одиночный протест",parent:"54bae4a4a868bc6fab4bcc81",__v:0,id:"54bae4a5a868bc6fab4bcc83"},{_id:"54bae4a5a868bc6fab4bcc85",name:"Проживание по месту работы (например, на аэродроме в бараке)",parent:"54bae493a868bc6fab4bcc30",__v:0,id:"54bae4a5a868bc6fab4bcc85"},{_id:"54bae4a5a868bc6fab4bcc84",name:"организации заключенных, саботаж",parent:"54bae4a4a868bc6fab4bcc81",__v:0,id:"54bae4a5a868bc6fab4bcc84"},{_id:"54bae4a8a868bc6fab4bcc91",name:"зоны (бараки) иных категорий заключенных /депортированных",parent:"54bae4a8a868bc6fab4bcc8f",__v:0,id:"54bae4a8a868bc6fab4bcc91"},{_id:"54bae4a4a868bc6fab4bcc7d",name:"Казни (в том числе потенциальные)",parent:"54bae4a3a868bc6fab4bcc7c",__v:0,id:"54bae4a4a868bc6fab4bcc7d"},{_id:"54bae4aaa868bc6fab4bcc97",name:"Питание ( в том числе добыча пищи)",parent:"54bae4a9a868bc6fab4bcc95",__v:0,id:"54bae4aaa868bc6fab4bcc97"},{_id:"54bae4aaa868bc6fab4bcc98",name:" хозяйский паек и добавки (в том числе помощь от немцев)",parent:"54bae4aaa868bc6fab4bcc97",__v:0,id:"54bae4aaa868bc6fab4bcc98"},{_id:"54bae4a9a868bc6fab4bcc93",name:"Регламентация жизни на ферме /доме:",parent:"54bae4a7a868bc6fab4bcc8d",__v:0,id:"54bae4a9a868bc6fab4bcc93"},{_id:"54bae4a8a868bc6fab4bcc8f",name:"Топография фермы / дома и окрестностей ",parent:"54bae4a7a868bc6fab4bcc8d",__v:0,id:"54bae4a8a868bc6fab4bcc8f"},{_id:"54bae4aba868bc6fab4bcc9c",name:"Свободное время, праздники",parent:"54bae4a9a868bc6fab4bcc95",__v:0,id:"54bae4aba868bc6fab4bcc9c"},{_id:"54bae4aba868bc6fab4bcc99",name:"самостоятельная добыча пропитания (способы выживания: грабеж, сдача крови за паек )",parent:"54bae4aaa868bc6fab4bcc97",__v:0,id:"54bae4aba868bc6fab4bcc99"},{_id:"54bae4aea868bc6fab4bcca6",name:"любовь, разлука, сексуальные отношения",parent:"54bae4ada868bc6fab4bcca4",__v:0,id:"54bae4aea868bc6fab4bcca6"},{_id:"54bae4aca868bc6fab4bcc9f",name:"Иное (игра в карты, смена фамилии)",parent:"54bae4a9a868bc6fab4bcc95",__v:0,id:"54bae4aca868bc6fab4bcc9f"},{_id:"54bae4ada868bc6fab4bcca2",name:"смена национальности",parent:"54bae4aca868bc6fab4bcc9f",__v:0,id:"54bae4ada868bc6fab4bcca2"},{_id:"54bae4afa868bc6fab4bccac",name:"немцы (заключенные)",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4afa868bc6fab4bccac"},{_id:"54bae4a8a868bc6fab4bcc90",name:"ферма / дом и окрестности",parent:"54bae4a8a868bc6fab4bcc8f",__v:0,id:"54bae4a8a868bc6fab4bcc90"},{_id:"54bae4aba868bc6fab4bcc9a",name:"Переписка, посылки",parent:"54bae4a9a868bc6fab4bcc95",__v:0,id:"54bae4aba868bc6fab4bcc9a"},{_id:"54bae4ada868bc6fab4bcca4",name:"Отношения между депортированными",parent:"54bae4a7a868bc6fab4bcc8d",__v:0,id:"54bae4ada868bc6fab4bcca4"},{_id:"54bae4afa868bc6fab4bccab",name:"межнациональные отношения (в том числе упоминание национальностей)",parent:"54bae4ada868bc6fab4bcca4",__v:0,id:"54bae4afa868bc6fab4bccab"},{_id:"54bae4b7a868bc6fab4bccc7",name:"экзекуции, издевательства",parent:"54bae4b6a868bc6fab4bccc5",__v:0,id:"54bae4b7a868bc6fab4bccc7"},{_id:"54bae4b4a868bc6fab4bccbd",name:"несовершеннолетний респондент (введено с ID10)",parent:"54bae4b4a868bc6fab4bccbc",__v:0,id:"54bae4b4a868bc6fab4bccbd"},{_id:"54bae4aca868bc6fab4bcc9e",name:"Условия жизни (санитарные, обустройство барака/сарая и пр.)",parent:"54bae4a9a868bc6fab4bcc95",__v:0,id:"54bae4aca868bc6fab4bcc9e"},{_id:"54bae4ada868bc6fab4bcca5",name:"дружба и переписка ",parent:"54bae4ada868bc6fab4bcca4",__v:0,id:"54bae4ada868bc6fab4bcca5"},{_id:"54bae4b7a868bc6fab4bccc8",name:"помещение в карцер (бункер)",parent:"54bae4b6a868bc6fab4bccc5",__v:0,id:"54bae4b7a868bc6fab4bccc8"},{_id:"54bae4b9a868bc6fab4bcccf",name:"Тюрьмы Гестапо, СС, гауптвахты, директория полиции (сюда Головину в Венгрии)",parent:"54bae493a868bc6fab4bcc30",__v:0,id:"54bae4b9a868bc6fab4bcccf"},{_id:"54bae4bba868bc6fab4bccd6",name:"Топография лагеря и окрестностей",parent:"54bae4baa868bc6fab4bccd1",__v:0,id:"54bae4bba868bc6fab4bccd6"},{_id:"54bae4b8a868bc6fab4bcccc",name:"одиночный протест",parent:"54bae4b8a868bc6fab4bccca",__v:0,id:"54bae4b8a868bc6fab4bcccc"},{_id:"54bae4b9a868bc6fab4bcccd",name:"организации заключенных, саботаж",parent:"54bae4b8a868bc6fab4bccca",__v:0,id:"54bae4b9a868bc6fab4bcccd"},{_id:"54bae4afa868bc6fab4bcca9",name:"воровство (друг у друга), доносы, предательство",parent:"54bae4ada868bc6fab4bcca4",__v:0,id:"54bae4afa868bc6fab4bcca9"},{_id:"54bae4bca868bc6fab4bccd8",name:"зоны (бараки) иных категорий заключенных",parent:"54bae4bba868bc6fab4bccd6",__v:0,id:"54bae4bca868bc6fab4bccd8"},{_id:"54bae4b9a868bc6fab4bccce",name:"Общение с гражданскими, военнопленными и пр.",parent:"54bae4a7a868bc6fab4bcc8d",__v:0,id:"54bae4b9a868bc6fab4bccce"},{_id:"54bae4baa868bc6fab4bccd2",name:"Администрация и обслуживание лагеря:",parent:"54bae4baa868bc6fab4bccd1",__v:0,id:"54bae4baa868bc6fab4bccd2"},{_id:"54bae4b6a868bc6fab4bccc3",name:"психические травмы",parent:"54bae4b5a868bc6fab4bccbf",__v:0,id:"54bae4b6a868bc6fab4bccc3"},{_id:"54bae4bda868bc6fab4bccdb",name:"Режим (распорядок, банные дни)",parent:"54bae4bda868bc6fab4bccda",__v:0,id:"54bae4bda868bc6fab4bccdb"},{_id:"54bae4b4a868bc6fab4bccbc",name:"Дети (депортированные) в фермерском хозяйстве",parent:"54bae4a7a868bc6fab4bcc8d",__v:0,id:"54bae4b4a868bc6fab4bccbc"},{_id:"54bae4b7a868bc6fab4bccc6",name:"Казни (в том числе потенциальные)",parent:"54bae4b6a868bc6fab4bccc5",__v:0,id:"54bae4b7a868bc6fab4bccc6"},{_id:"54bae4bfa868bc6fab4bcce2",name:"самостоятельная добыча пропитания (способы выживания: грабеж, сдача крови за паек )",parent:"54bae4bea868bc6fab4bcce0",__v:0,id:"54bae4bfa868bc6fab4bcce2"},{_id:"54bae4bda868bc6fab4bccda",name:"Регламентация лагерной жизни:",parent:"54bae4baa868bc6fab4bccd1",__v:0,id:"54bae4bda868bc6fab4bccda"},{_id:"54bae4bca868bc6fab4bccd7",name:"лагерь и окрестности",parent:"54bae4bba868bc6fab4bccd6",__v:0,id:"54bae4bca868bc6fab4bccd7"},{_id:"54bae4c0a868bc6fab4bcce5",name:"Свободное время, праздники (бывший досуг)",parent:"54bae4bea868bc6fab4bccde",__v:0,id:"54bae4c0a868bc6fab4bcce5"},{_id:"54bae4bfa868bc6fab4bcce3",name:"Переписка, посылки",parent:"54bae4bea868bc6fab4bccde",__v:0,id:"54bae4bfa868bc6fab4bcce3"},{_id:"54bae4c1a868bc6fab4bcce7",name:"Условия жизни (санитарные, обустройство барака и пр.)",parent:"54bae4bea868bc6fab4bccde",__v:0,id:"54bae4c1a868bc6fab4bcce7"},{_id:"54bae4c1a868bc6fab4bcce8",name:"Иное   (игра в карты, смена фамилии)",parent:"54bae4bea868bc6fab4bccde",__v:0,id:"54bae4c1a868bc6fab4bcce8"},{_id:"54bae4c3a868bc6fab4bccef",name:"любовь, разлука, сексуальные отношения",parent:"54bae4c3a868bc6fab4bcced",__v:0,id:"54bae4c3a868bc6fab4bccef"},{_id:"54bae4bfa868bc6fab4bcce1",name:" лагерный паек и добавки (в том числе помощь от немцев)",parent:"54bae4bea868bc6fab4bcce0",__v:0,id:"54bae4bfa868bc6fab4bcce1"},{_id:"54bae4bea868bc6fab4bcce0",name:"Питание ( в том числе добыча пищи)",parent:"54bae4bea868bc6fab4bccde",__v:0,id:"54bae4bea868bc6fab4bcce0"},{_id:"54bae4c3a868bc6fab4bcced",name:"Отношения между заключенными:",parent:"54bae4baa868bc6fab4bccd1",__v:0,id:"54bae4c3a868bc6fab4bcced"},{_id:"54bae4c5a868bc6fab4bccf4",name:"межнациональные отношения (в том числе упоминание национальностей)",parent:"54bae4c3a868bc6fab4bcced",__v:0,id:"54bae4c5a868bc6fab4bccf4"},{_id:"54bae4c2a868bc6fab4bccec",name:"Внутрилагерные работы",parent:"54bae4baa868bc6fab4bccd1",__v:0,id:"54bae4c2a868bc6fab4bccec"},{_id:"54bae4c2a868bc6fab4bcceb",name:"Деятельность Красного Креста",parent:"54bae4baa868bc6fab4bccd1",__v:0,id:"54bae4c2a868bc6fab4bcceb"},{_id:"54bae4c5a868bc6fab4bccf5",name:"немцы (заключенные)",parent:"54bae4c5a868bc6fab4bccf4",__v:0,id:"54bae4c5a868bc6fab4bccf5"},{_id:"54bae4c4a868bc6fab4bccf2",name:"воровство (друг у друга), доносы, предательство",parent:"54bae4c3a868bc6fab4bcced",__v:0,id:"54bae4c4a868bc6fab4bccf2"},{_id:"54bae4c3a868bc6fab4bccee",name:"дружба и переписка",parent:"54bae4c3a868bc6fab4bcced",__v:0,id:"54bae4c3a868bc6fab4bccee"},{_id:"54bae4cca868bc6fab4bcd0b",name:"психические травмы",parent:"54bae4cba868bc6fab4bcd07",__v:0,id:"54bae4cca868bc6fab4bcd0b"},{_id:"54bae4e1a868bc6fab4bcd47",name:'иерархия заключенных (капо, штубовые, старосты, старшие по бараку, блоковые , разница в режимах содержания, категории по винкелями с конкретными правами, "дно")',parent:"54bae4dfa868bc6fab4bcd41",__v:0,id:"54bae4e1a868bc6fab4bcd47"},{_id:"54bae4dca868bc6fab4bcd39",name:"Несоблюдение режима (самоволки, хождение без винкеля и прочие непротестные для выживания нарушения)",parent:"54bae4d9a868bc6fab4bcd31",__v:0,id:"54bae4dca868bc6fab4bcd39"},{_id:"54bae4e9a868bc6fab4bcd5c",name:"Дети в лагере",parent:"54bae4d0a868bc6fab4bcd16",__v:0,id:"54bae4e9a868bc6fab4bcd5c"},{_id:"54bae4e7a868bc6fab4bcd57",name:"татары",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e7a868bc6fab4bcd57"},{_id:"54bae4eca868bc6fab4bcd64",name:"Наказания",parent:"54bae4d0a868bc6fab4bcd16",__v:0,id:"54bae4eca868bc6fab4bcd64"},{_id:"54bae4f1a868bc6fab4bcd70",name:"Надзиратели",parent:"54bae4f0a868bc6fab4bcd6e",__v:0,id:"54bae4f1a868bc6fab4bcd70"},{_id:"54bae4f1a868bc6fab4bcd6f",name:"Администрация",parent:"54bae4f0a868bc6fab4bcd6e",__v:0,id:"54bae4f1a868bc6fab4bcd6f"},{_id:"54bae4eba868bc6fab4bcd61",name:"общие болезни",parent:"54bae4eaa868bc6fab4bcd5f",__v:0,id:"54bae4eba868bc6fab4bcd61"},{_id:"54bae4f7a868bc6fab4bcd7e",name:"Одежда, обувь",parent:"54bae4f6a868bc6fab4bcd7d",__v:0,id:"54bae4f7a868bc6fab4bcd7e"},{_id:"54bae4f9a868bc6fab4bcd85",name:"футбол, бокс",parent:"54bae4f9a868bc6fab4bcd84",__v:0,id:"54bae4f9a868bc6fab4bcd85"},{_id:"54bae4eea868bc6fab4bcd69",name:"Сопротивление:",parent:"54bae4d0a868bc6fab4bcd16",__v:0,id:"54bae4eea868bc6fab4bcd69"},{_id:"54bae4f1a868bc6fab4bcd71",name:"Вольнонаёмные",parent:"54bae4f0a868bc6fab4bcd6e",__v:0,id:"54bae4f1a868bc6fab4bcd71"},{_id:"54bae4eea868bc6fab4bcd68",name:"Публичный дом",parent:"54bae4d0a868bc6fab4bcd16",__v:0,id:"54bae4eea868bc6fab4bcd68"},{_id:"54bae4f3a868bc6fab4bcd75",name:"соседние лагеря",parent:"54bae4f2a868bc6fab4bcd72",__v:0,id:"54bae4f3a868bc6fab4bcd75"},{_id:"54bae4f9a868bc6fab4bcd83",name:"Обмен",parent:"54bae4f6a868bc6fab4bcd7d",__v:0,id:"54bae4f9a868bc6fab4bcd83"},{_id:"54bae4fea868bc6fab4bcd8f",name:"парник",parent:"54bae4fda868bc6fab4bcd8e",__v:0,id:"54bae4fea868bc6fab4bcd8f"},{_id:"54bae4f6a868bc6fab4bcd7d",name:"Повседневность:",parent:"54bae4f0a868bc6fab4bcd6d",__v:0,id:"54bae4f6a868bc6fab4bcd7d"},{_id:"54bae4fba868bc6fab4bcd89",name:"игра в карты",parent:"54bae4fba868bc6fab4bcd88",__v:0,id:"54bae4fba868bc6fab4bcd89"},{_id:"54bae502a868bc6fab4bcd9a",name:"штрафкоманда",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae502a868bc6fab4bcd9a"},{_id:"54bae4ffa868bc6fab4bcd92",name:"крематорий",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae4ffa868bc6fab4bcd92"},{_id:"54bae4fca868bc6fab4bcd8a",name:"смена фамилии",parent:"54bae4fba868bc6fab4bcd88",__v:0,id:"54bae4fca868bc6fab4bcd8a"},{_id:"54bae501a868bc6fab4bcd98",name:"прачечная",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae501a868bc6fab4bcd98"},{_id:"54bae4faa868bc6fab4bcd86",name:"Несоблюдение режима (самоволки, хождение без винкеля и прочие непротестные для выживания нарушения или намерения к тому)",parent:"54bae4f6a868bc6fab4bcd7d",__v:0,id:"54bae4faa868bc6fab4bcd86"},{_id:"54bae4fea868bc6fab4bcd90",name:"работа в поле",parent:"54bae4fda868bc6fab4bcd8e",__v:0,id:"54bae4fea868bc6fab4bcd90"},{_id:"54bae4ffa868bc6fab4bcd93",name:"медпункт",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae4ffa868bc6fab4bcd93"},{_id:"54bae503a868bc6fab4bcd9b",name:"переводчик",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae503a868bc6fab4bcd9b"},{_id:"54bae501a868bc6fab4bcd96",name:"оркестр",parent:"54bae4fda868bc6fab4bcd8d",__v:0,description:"",id:"54bae501a868bc6fab4bcd96"},{_id:"54bae502a868bc6fab4bcd99",name:"транспорт (принятие при прибытии, при бане, сбор одежды прибывших, умерщвленных в бане / не в крематории/, доставка ослабевших с места работы и т.п.)",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae502a868bc6fab4bcd99"},{_id:"54bae503a868bc6fab4bcd9c",name:"банщик-мойщик",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae503a868bc6fab4bcd9c"},{_id:"54bae505a868bc6fab4bcda1",name:"вывоз трупов",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae505a868bc6fab4bcda1"},{_id:"54bae509a868bc6fab4bcdaa",name:'иерархия заключенных (капо, штубовые, старосты, старшие по бараку, блоковые , разница в режимах содержания, категории по винкелями с конкретными правами, "дно")',parent:"54bae506a868bc6fab4bcda3",__v:0,id:"54bae509a868bc6fab4bcdaa"},{_id:"54bae4fea868bc6fab4bcd91",name:"развоз еды",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae4fea868bc6fab4bcd91"},{_id:"54bae508a868bc6fab4bcda7",name:"взаимопомощь",parent:"54bae506a868bc6fab4bcda3",__v:0,id:"54bae508a868bc6fab4bcda7"},{_id:"54bae507a868bc6fab4bcda6",name:"землячества",parent:"54bae506a868bc6fab4bcda3",__v:0,id:"54bae507a868bc6fab4bcda6"},{_id:"54bae50ca868bc6fab4bcdaf",name:"бельгийцы",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae50ca868bc6fab4bcdaf"},{_id:"54bae50ca868bc6fab4bcdb0",name:"голландцы",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae50ca868bc6fab4bcdb0"},{_id:"54bae510a868bc6fab4bcdb7",name:"французы",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae510a868bc6fab4bcdb7"},{_id:"54bae51fa868bc6fab4bcdd7",name:"при экзекуциях, работах, в бане (при прибытии транспорта -газ, но не крематорий), в прачечных, при этапировании ( но не марш смерти)",parent:"54bae51fa868bc6fab4bcdd5",__v:0,id:"54bae51fa868bc6fab4bcdd7"},{_id:"54baea7da868bc81751d8adb",name:"Проверки НКВД, МГБ",parent:"54baea7ca868bc81751d8ad9",__v:0,id:"54baea7da868bc81751d8adb"},{_id:"54baea7ba868bc81751d8ad8",name:"Перемена места жительства",parent:"54baea7aa868bc81751d8ad6",__v:0,id:"54baea7ba868bc81751d8ad8"},{_id:"54baea7fa868bc81751d8ae0",name:"Отношения с родственниками после возвращения",parent:"54baea7ea868bc81751d8add",__v:0,id:"54baea7fa868bc81751d8ae0"},{_id:"54baea82a868bc81751d8ae5",name:"Организация повседневной жизни",parent:"54baea79a868bc81751d8ad4",__v:0,id:"54baea82a868bc81751d8ae5"},{_id:"54baea85a868bc81751d8aea",name:"В сельской местности",parent:"54baea84a868bc81751d8ae8",__v:0,id:"54baea85a868bc81751d8aea"},{_id:"54bae9a2a868bc3ec7fb5ae2",name:"в группе советских войск в Европе  (с ID10)",parent:"54bae9a1a868bc3ec7fb5ae1",__v:0,id:"54bae9a2a868bc3ec7fb5ae2"},{_id:"54baea83a868bc81751d8ae7",name:"В сельской местности",parent:"54baea82a868bc81751d8ae5",__v:0,id:"54baea83a868bc81751d8ae7"},{_id:"54baea80a868bc81751d8ae1",name:"Отношения с земляками, соседями, коллегами (в том числе гонения)",parent:"54baea79a868bc81751d8ad4",__v:0,id:"54baea80a868bc81751d8ae1"},{_id:"54baea7ea868bc81751d8add",name:"Семейные отношения",parent:"54baea79a868bc81751d8ad4",__v:0,id:"54baea7ea868bc81751d8add"},{_id:"54baea84a868bc81751d8ae8",name:"Снабжение, карточная система",parent:"54baea79a868bc81751d8ad4",__v:0,id:"54baea84a868bc81751d8ae8"},{_id:"54baeaafa868bc81751d8af8",name:"иные формы антисоветской деятельности",parent:"54baeaaca868bc81751d8af3",__v:0,id:"54baeaafa868bc81751d8af8"},{_id:"54baea89a868bc81751d8af1",name:"формы дискриминации в условиях послевоенной жизни",parent:"54baea86a868bc81751d8aec",__v:0,id:"54baea89a868bc81751d8af1"},{_id:"54baeab0a868bc81751d8afa",name:"социализация (участие в различных комитетах, сюда же отношение к религии)",parent:"54bae9e6a868bc3ec7fb5ae6",__v:0,id:"54baeab0a868bc81751d8afa"},{_id:"54baeaaca868bc81751d8af3",name:"Сопротивление советскому режиму",parent:"54bae9e6a868bc3ec7fb5ae6",__v:0,id:"54baeaaca868bc81751d8af3"},{_id:"54baeab6a868bc81751d8b04",name:"в настоящее время",parent:"54baeab4a868bc81751d8b02",__v:0,id:"54baeab6a868bc81751d8b04"},{_id:"54baeab2a868bc81751d8afe",name:"память о союзниках",parent:"54baeab0a868bc81751d8afb",__v:0,id:"54baeab2a868bc81751d8afe"},{_id:"54baea86a868bc81751d8aed",name:"реабилитация",parent:"54baea86a868bc81751d8aec",__v:0,id:"54baea86a868bc81751d8aed"},{_id:"54baea88a868bc81751d8aef",name:"ГУЛаг",parent:"54baea86a868bc81751d8aec",__v:0,id:"54baea88a868bc81751d8aef"},{_id:"54baeaada868bc81751d8af5",name:"РОА (январь-май 1945)",parent:"54baeaaca868bc81751d8af4",__v:0,id:"54baeaada868bc81751d8af5"},{_id:"54baeab4a868bc81751d8b01",name:"личные архивы",parent:"54bae9e6a868bc3ec7fb5ae6",__v:0,id:"54baeab4a868bc81751d8b01"},{_id:"54baea7ea868bc81751d8ade",name:"Судьбы семей во время войны",parent:"54baea7ea868bc81751d8add",__v:0,id:"54baea7ea868bc81751d8ade"},{_id:"54baea88a868bc81751d8af0",name:"депортации",parent:"54baea86a868bc81751d8aec",__v:0,id:"54baea88a868bc81751d8af0"},{_id:"54baeab3a868bc81751d8aff",name:"последствия принудительного труда и пребывания в концлагерях Германии",parent:"54bae9e6a868bc3ec7fb5ae6",__v:0,id:"54baeab3a868bc81751d8aff"},{_id:"54baeab5a868bc81751d8b03",name:"во время пребывания в Германии",parent:"54baea79a868bc81751d8ad4",__v:0,id:"54baeab5a868bc81751d8b03"},{_id:"54baeab3a868bc81751d8b00",name:"эмиграция (современность)",parent:"54bae9e6a868bc3ec7fb5ae6",__v:0,id:"54baeab3a868bc81751d8b00"},{_id:"54baeab2a868bc81751d8afd",name:"память о Германии, отношение к немцам, к немецкому языку",parent:"54baeab0a868bc81751d8afb",__v:0,id:"54baeab2a868bc81751d8afd"},{_id:"54baeaada868bc81751d8af6",name:"участие в национально-освободительных военнизированных формированиях",parent:"54baeaaca868bc81751d8af3",__v:0,id:"54baeaada868bc81751d8af6"},{_id:"54baeaafa868bc81751d8af9",name:"выплата компенсаций, льготы; сбор свидетельских показаний",parent:"54bae9e6a868bc3ec7fb5ae6",__v:0,id:"54baeaafa868bc81751d8af9"},{_id:"54baeab4a868bc81751d8b02",name:"Сновидения",parent:"54bae9e6a868bc3ec7fb5ae6",__v:0,id:"54baeab4a868bc81751d8b02"},{_id:"54baeaaea868bc81751d8af7",name:"помощь участникам национально-освободительных формирований",parent:"54baeaaca868bc81751d8af3",__v:0,id:"54baeaaea868bc81751d8af7"},{_id:"54baeab0a868bc81751d8afb",name:"оценка прошлого",parent:"54bae9e6a868bc3ec7fb5ae6",__v:0,id:"54baeab0a868bc81751d8afb"},{_id:"54c6b4c5a868bc5ffc71bfba",name:"ccccc",parent:"54c90609451f25f4d943a04f",__v:0,id:"54c6b4c5a868bc5ffc71bfba"},{_id:"54c79270451f25da9c2930f5",name:"hahaha",parent:"54bad419a868bca4e8cc65ca",__v:0,id:"54c79270451f25da9c2930f5"},{_id:"54bae4e0a868bc6fab4bcd43",name:"любовь, разлука, сексуальные отношения",parent:"54bae4dfa868bc6fab4bcd41",__v:0,id:"54bae4e0a868bc6fab4bcd43"},{_id:"54bae4eaa868bc6fab4bcd5d",name:"несовершеннолетний респондент (введено с ID10)",parent:"54bae4e9a868bc6fab4bcd5c",__v:0,id:"54bae4eaa868bc6fab4bcd5d"},{_id:"54bae4eda868bc6fab4bcd66",name:"экзекуции, издевательства",parent:"54bae4eca868bc6fab4bcd64",__v:0,id:"54bae4eda868bc6fab4bcd66"},{_id:"54bae4f5a868bc6fab4bcd7b",name:"Лагерь при заводе для учебной команды",parent:"54bae4f3a868bc6fab4bcd76",__v:0,id:"54bae4f5a868bc6fab4bcd7b"},{_id:"54bae4f0a868bc6fab4bcd6e",name:"Администрация и обслуживание лагеря:",parent:"54bae4f0a868bc6fab4bcd6d",__v:0,id:"54bae4f0a868bc6fab4bcd6e"},{_id:"54bae4f7a868bc6fab4bcd7f",name:"Питание ( в том числе добыча пищи, сигарет)",parent:"54bae4f6a868bc6fab4bcd7d",__v:0,id:"54bae4f7a868bc6fab4bcd7f"},{_id:"54bae4fba868bc6fab4bcd88",name:"Иное  (игра в карты, смена фамилии)",parent:"54bae4f6a868bc6fab4bcd7d",__v:0,id:"54bae4fba868bc6fab4bcd88"},{_id:"54bae4faa868bc6fab4bcd87",name:"Условия жизни (санитарные, обустройство барака и пр.)",parent:"54bae4f6a868bc6fab4bcd7d",__v:0,id:"54bae4faa868bc6fab4bcd87"},{_id:"54bae504a868bc6fab4bcd9f",name:"уборка территории",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae504a868bc6fab4bcd9f"},{_id:"54bae509a868bc6fab4bcda9",name:"убийства, расправы",parent:"54bae506a868bc6fab4bcda3",__v:0,id:"54bae509a868bc6fab4bcda9"},{_id:"54bae50ba868bc6fab4bcdad",name:"немцы (заключенные)",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae50ba868bc6fab4bcdad"},{_id:"54bae512a868bc6fab4bcdbb",name:"украинцы",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae512a868bc6fab4bcdbb"},{_id:"54bae4daa868bc6fab4bcd33",name:"Питание ( в том числе добыча пищи)",parent:"54bae4d9a868bc6fab4bcd31",__v:0,id:"54bae4daa868bc6fab4bcd33"},{_id:"54bae4e2a868bc6fab4bcd49",name:"немцы (заключенные)",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e2a868bc6fab4bcd49"},{_id:"54bae4efa868bc6fab4bcd6a",name:"побеги ( в том числе замысел)",parent:"54bae4eea868bc6fab4bcd69",__v:0,id:"54bae4efa868bc6fab4bcd6a"},{_id:"54bae4f3a868bc6fab4bcd76",name:"Регламентация лагерной жизни:",parent:"54bae4f0a868bc6fab4bcd6d",__v:0,id:"54bae4f3a868bc6fab4bcd76"},{_id:"54bae4f0a868bc6fab4bcd6d",name:"Концентрационный лагерь",parent:"54bae493a868bc6fab4bcc30",__v:0,id:"54bae4f0a868bc6fab4bcd6d"},{_id:"54bae4f4a868bc6fab4bcd77",name:"Режим (распорядок, банные дни)",parent:"54bae4f3a868bc6fab4bcd76",__v:0,id:"54bae4f4a868bc6fab4bcd77"},{_id:"54bae500a868bc6fab4bcd94",name:"иное (делать новые рубрики по мере надобности)",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae500a868bc6fab4bcd94"},{_id:"54bae4f8a868bc6fab4bcd81",name:"самостоятельная добыча пропитания (способы выживания: грабеж, сдача крови за паек )",parent:"54bae4f7a868bc6fab4bcd7f",__v:0,id:"54bae4f8a868bc6fab4bcd81"},{_id:"54bae504a868bc6fab4bcd9e",name:"плетение верёвок, маскировочных сеток, сумок",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae504a868bc6fab4bcd9e"},{_id:"54bae505a868bc6fab4bcda0",name:"уборка территории у стены расстрелов",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae505a868bc6fab4bcda0"},{_id:"54bae508a868bc6fab4bcda8",name:"воровство (друг у друга), доносы, предательство",parent:"54bae506a868bc6fab4bcda3",__v:0,id:"54bae508a868bc6fab4bcda8"},{_id:"54bae4dea868bc6fab4bcd3f",name:"Внутрилагерные работы",parent:"54bae4d0a868bc6fab4bcd16",__v:0,id:"54bae4dea868bc6fab4bcd3f"},{_id:"54bae516a868bc6fab4bcdc3",name:"греки",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae516a868bc6fab4bcdc3"},{_id:"54bae4dfa868bc6fab4bcd42",name:"дружба и переписка",parent:"54bae4dfa868bc6fab4bcd41",__v:0,id:"54bae4dfa868bc6fab4bcd42"},{_id:"54bae4eda868bc6fab4bcd65",name:"Казни (в том числе потенциальные)",parent:"54bae4eca868bc6fab4bcd64",__v:0,id:"54bae4eda868bc6fab4bcd65"},{_id:"54bae513a868bc6fab4bcdbe",name:"хорваты",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae513a868bc6fab4bcdbe"},{_id:"54bae514a868bc6fab4bcdbf",name:"белорусы",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae514a868bc6fab4bcdbf"},{_id:"54bae4efa868bc6fab4bcd6b",name:"одиночный протест",parent:"54bae4eea868bc6fab4bcd69",__v:0,id:"54bae4efa868bc6fab4bcd6b"},{_id:"54bae4f7a868bc6fab4bcd80",name:"лагерный паек и добавки (в том числе помощь от немцев)",parent:"54bae4f7a868bc6fab4bcd7f",__v:0,id:"54bae4f7a868bc6fab4bcd80"},{_id:"54bae4f2a868bc6fab4bcd73",name:"лагерь и окрестности ",parent:"54bae4f2a868bc6fab4bcd72",__v:0,id:"54bae4f2a868bc6fab4bcd73"},{_id:"54bae4f9a868bc6fab4bcd84",name:"Свободное время, праздники (бывший досуг)",parent:"54bae4f6a868bc6fab4bcd7d",__v:0,id:"54bae4f9a868bc6fab4bcd84"},{_id:"54bae504a868bc6fab4bcd9d",name:"табуретки, козлы (сидячее производство для доходяг)",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae504a868bc6fab4bcd9d"},{_id:"54bae4fca868bc6fab4bcd8b",name:"Магазин, киоск на территории лагеря",parent:"54bae4f6a868bc6fab4bcd7d",__v:0,id:"54bae4fca868bc6fab4bcd8b"},{_id:"54bae506a868bc6fab4bcda3",name:"Отношения между заключенными:",parent:"54bae4f0a868bc6fab4bcd6d",__v:0,id:"54bae506a868bc6fab4bcda3"},{_id:"54bae506a868bc6fab4bcda2",name:"уборка бараков, блоков",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae506a868bc6fab4bcda2"},{_id:"54bae50da868bc6fab4bcdb2",name:"чернокожие узники",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae50da868bc6fab4bcdb2"},{_id:"54bae511a868bc6fab4bcdb9",name:"поляки",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae511a868bc6fab4bcdb9"},{_id:"54bae519a868bc6fab4bcdc9",name:"Болезни, медицина",parent:"54bae4f0a868bc6fab4bcd6d",__v:0,id:"54bae519a868bc6fab4bcdc9"},{_id:"54bd6ba7a868bc5c03693032",name:"История семьи (предки) (в том числе жизнь,быт и пр.)",parent:"54b8f267a868bc4fd8ca4a49",description:"",__v:0,id:"54bd6ba7a868bc5c03693032"},{_id:"54bae4dca868bc6fab4bcd38",name:"Свободное время, праздники (бывший досуг)",parent:"54bae4d9a868bc6fab4bcd31",__v:0,id:"54bae4dca868bc6fab4bcd38"},{_id:"54bae4eca868bc6fab4bcd63",name:"психические травмы",parent:"54bae4eaa868bc6fab4bcd5f",__v:0,id:"54bae4eca868bc6fab4bcd63"},{_id:"54bae51da868bc6fab4bcdd1",name:"Наказания",parent:"54bae4f0a868bc6fab4bcd6d",__v:0,id:"54bae51da868bc6fab4bcdd1"},{_id:"54bae960a868bc3ec7fb5ad0",name:"самостоятельное перемещение по освобожденной союзниками территории",parent:"54bae95ea868bc3ec7fb5acd",__v:0,id:"54bae960a868bc3ec7fb5ad0"},{_id:"54bae4e1a868bc6fab4bcd46",name:"воровство (друг у друга), доносы, предательство",parent:"54bae4dfa868bc6fab4bcd41",__v:0,id:"54bae4e1a868bc6fab4bcd46"},{_id:"54bae4e1a868bc6fab4bcd48",name:"межнациональные отношения (в том числе упоминание национальностей)",parent:"54bae4dfa868bc6fab4bcd41",__v:0,id:"54bae4e1a868bc6fab4bcd48"},{_id:"54bae4efa868bc6fab4bcd6c",name:"организации заключенных, саботаж, , распространение антинемецкой новостной информации",parent:"54bae4eea868bc6fab4bcd69",__v:0,id:"54bae4efa868bc6fab4bcd6c"},{_id:"54bae4f5a868bc6fab4bcd79",name:"Дезинфекция, карантин",parent:"54bae4f3a868bc6fab4bcd76",__v:0,id:"54bae4f5a868bc6fab4bcd79"},{_id:"54bae4f2a868bc6fab4bcd72",name:"Топография лагеря и окрестностей",parent:"54bae4f0a868bc6fab4bcd6d",__v:0,id:"54bae4f2a868bc6fab4bcd72"},{_id:"54bae4f6a868bc6fab4bcd7c",name:"Пересыльный  лагерь",parent:"54bae4f3a868bc6fab4bcd76",__v:0,id:"54bae4f6a868bc6fab4bcd7c"},{_id:"54bae4f8a868bc6fab4bcd82",name:"Переписка, посылки",parent:"54bae4f6a868bc6fab4bcd7d",__v:0,id:"54bae4f8a868bc6fab4bcd82"},{_id:"54bae4fca868bc6fab4bcd8c",name:"Деятельность Красного Креста",parent:"54bae4f0a868bc6fab4bcd6d",__v:0,id:"54bae4fca868bc6fab4bcd8c"},{_id:"54bae507a868bc6fab4bcda4",name:"дружба и переписка",parent:"54bae506a868bc6fab4bcda3",__v:0,id:"54bae507a868bc6fab4bcda4"},{_id:"54bae50aa868bc6fab4bcdab",name:"межнациональные отношения (в том числе упоминание национальностей)",parent:"54bae506a868bc6fab4bcda3",__v:0,id:"54bae50aa868bc6fab4bcdab"},{_id:"54bae518a868bc6fab4bcdc7",name:"несовершеннолетний респондент, пребывание (введено с ID10)",parent:"54bae517a868bc6fab4bcdc6",__v:0,id:"54bae518a868bc6fab4bcdc7"},{_id:"54bae50ba868bc6fab4bcdae",name:"австрийцы (заключенные)",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae50ba868bc6fab4bcdae"},{_id:"54bae516a868bc6fab4bcdc4",name:"русские",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae516a868bc6fab4bcdc4"},{_id:"54bae51ba868bc6fab4bcdce",name:"Медицинские опыты (селекция)",parent:"54bae4f0a868bc6fab4bcd6d",__v:0,id:"54bae51ba868bc6fab4bcdce"},{_id:"54bae95ea868bc3ec7fb5acc",name:"Освобождение советскими войсками",parent:"54bae95da868bc3ec7fb5acb",__v:0,id:"54bae95ea868bc3ec7fb5acc"},{_id:"54bae51ca868bc6fab4bcdd0",name:"в целом без конкретики",parent:"54bae51ba868bc6fab4bcdce",__v:0,id:"54bae51ca868bc6fab4bcdd0"},{_id:"54bae51ea868bc6fab4bcdd3",name:"экзекуции, издевательства",parent:"54bae51da868bc6fab4bcdd1",__v:0,id:"54bae51ea868bc6fab4bcdd3"},{_id:"54bae523a868bc6fab4bcdde",name:"организации заключенных, саботаж",parent:"54bae522a868bc6fab4bcddb",__v:0,id:"54bae523a868bc6fab4bcdde"},{_id:"54bae8cfa868bc291f123781",name:"Отношение немцев к войне, политическому режиму в Германии и пр.",parent:"54bad419a868bca4e8cc65ca",__v:0,id:"54bae8cfa868bc291f123781"},{_id:"54bae517a868bc6fab4bcdc5",name:"советские",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae517a868bc6fab4bcdc5"},{_id:"54bae8d0a868bc291f123782",name:"Переходный период, безвластие, самоосвобождение, при помощи немцев",parent:"54bad419a868bca4e8cc65ca",__v:0,id:"54bae8d0a868bc291f123782"},{_id:"54bae51da868bc6fab4bcdd2",name:"Казни (в том числе потенциальные)",parent:"54bae51da868bc6fab4bcdd1",__v:0,id:"54bae51da868bc6fab4bcdd2"},{_id:"54bae99fa868bc3ec7fb5add",name:"работа в воинских частях (в том числе детей)",parent:"54bae99ca868bc3ec7fb5ad8",__v:0,id:"54bae99fa868bc3ec7fb5add"},{_id:"54bae519a868bc6fab4bcdca",name:"гинекология",parent:"54bae519a868bc6fab4bcdc9",__v:0,id:"54bae519a868bc6fab4bcdca"},{_id:"54bae51ba868bc6fab4bcdcf",name:'донорская команда ("лимфа")',parent:"54bae51ba868bc6fab4bcdce",__v:0,id:"54bae51ba868bc6fab4bcdcf"},{_id:"54bae51fa868bc6fab4bcdd5",name:'Уничтожение"',parent:"54bae4f0a868bc6fab4bcd6d",__v:0,id:"54bae51fa868bc6fab4bcdd5"},{_id:"54bae518a868bc6fab4bcdc8",name:"другие дети",parent:"54bae517a868bc6fab4bcdc6",__v:0,id:"54bae518a868bc6fab4bcdc8"},{_id:"54bae523a868bc6fab4bcddd",name:"одиночный протест (в том числе самоубийства)",parent:"54bae522a868bc6fab4bcddb",__v:0,id:"54bae523a868bc6fab4bcddd"},{_id:"54bae95fa868bc3ec7fb5acf",name:"бывшие немецкие рабочие и прочие лагеря под охраной союзников",parent:"54bae95ea868bc3ec7fb5acd",__v:0,id:"54bae95fa868bc3ec7fb5acf"},{_id:"54bae51aa868bc6fab4bcdcb",name:"общие болезни",parent:"54bae519a868bc6fab4bcdc9",__v:0,id:"54bae51aa868bc6fab4bcdcb"},{_id:"54bae99da868bc3ec7fb5ada",name:"воинская часть",parent:"54bae99ca868bc3ec7fb5ad8",__v:0,id:"54bae99da868bc3ec7fb5ada"},{_id:"54bae522a868bc6fab4bcddc",name:"побеги ( в том числе замышляемые)",parent:"54bae522a868bc6fab4bcddb",__v:0,id:"54bae522a868bc6fab4bcddc"},{_id:"54bae4eda868bc6fab4bcd67",name:"помещение в карцер (бункер)",parent:"54bae4eca868bc6fab4bcd64",__v:0,id:"54bae4eda868bc6fab4bcd67"},{_id:"54bae962a868bc3ec7fb5ad3",name:"эмиграция в другие страны (в том числе «вербовка»)",parent:"54bae95ea868bc3ec7fb5acd",__v:0,id:"54bae962a868bc3ec7fb5ad3"},{_id:"54bae4f3a868bc6fab4bcd74",name:"зоны (бараки) иных категорий заключенных",parent:"54bae4f2a868bc6fab4bcd72",__v:0,id:"54bae4f3a868bc6fab4bcd74"},{_id:"54bae99ca868bc3ec7fb5ad8",name:"Фильтрация",parent:"54bad419a868bca4e8cc65ca",__v:0,id:"54bae99ca868bc3ec7fb5ad8"},{_id:"54bae961a868bc3ec7fb5ad1",name:"встреча с советскими войсками",parent:"54bae960a868bc3ec7fb5ad0",__v:0,id:"54bae961a868bc3ec7fb5ad1"},{_id:"54bae4f5a868bc6fab4bcd7a",name:"Лагерь при заводе (или ином объекте)  для рабочей команды",parent:"54bae4f3a868bc6fab4bcd76",__v:0,id:"54bae4f5a868bc6fab4bcd7a"},{_id:"54bae99ea868bc3ec7fb5adb",name:"пересыльные пункты советские В ДАЛЬНЕЙШЕМ ОБЪЕДИНИТЬ С фильтрационными лагерями",parent:"54bae99ca868bc3ec7fb5ad8",__v:0,id:"54bae99ea868bc3ec7fb5adb"},{_id:"54bae4f4a868bc6fab4bcd78",name:"Сортировка (по физ состоянию, отсылка в ревир, крематорий и т.д.)",parent:"54bae4f3a868bc6fab4bcd76",__v:0,id:"54bae4f4a868bc6fab4bcd78"},{_id:"54bae9a1a868bc3ec7fb5ae0",name:"справки (выдача документов о пребывании в Германии, проверены, сожгли документы, назначения и пр.)",parent:"54bae99fa868bc3ec7fb5ade",__v:0,id:"54bae9a1a868bc3ec7fb5ae0"},{_id:"54bae4fda868bc6fab4bcd8d",name:"Внутрилагерные работы (в т.ч. крематорий)",parent:"54bae4f0a868bc6fab4bcd6d",__v:0,id:"54bae4fda868bc6fab4bcd8d"},{_id:"54bae521a868bc6fab4bcdda",name:"Публичный дом, принудительная проституция",parent:"54bae4f0a868bc6fab4bcd6d",__v:0,id:"54bae521a868bc6fab4bcdda"},{_id:"54bae4fda868bc6fab4bcd8e",name:"общее - хозяйственно-земляные работы",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae4fda868bc6fab4bcd8e"},{_id:"54bae964a868bc3ec7fb5ad7",name:"День Победы, 8-9 мая 1945",parent:"54bae95da868bc3ec7fb5acb",__v:0,id:"54bae964a868bc3ec7fb5ad7"},{_id:"54bae500a868bc6fab4bcd95",name:"погрузка угля, песка, строительство дорог",parent:"54bae4fda868bc6fab4bcd8d",__v:0,id:"54bae500a868bc6fab4bcd95"},{_id:"54bae522a868bc6fab4bcddb",name:"Сопротивление:",parent:"54bae4f0a868bc6fab4bcd6d",__v:0,id:"54bae522a868bc6fab4bcddb"},{_id:"54bae9a3a868bc3ec7fb5ae4",name:"демобилизация из армии  (с ID10)",parent:"54bae9a1a868bc3ec7fb5ae1",__v:0,id:"54bae9a3a868bc3ec7fb5ae4"},{_id:"54bae507a868bc6fab4bcda5",name:"любовь, разлука, сексуальные отношения",parent:"54bae506a868bc6fab4bcda3",__v:0,id:"54bae507a868bc6fab4bcda5"},{_id:"54bae520a868bc6fab4bcdd8",name:"крематорий (введено 15.10.2014 для ID19) и сжигание в ямах",parent:"54bae51fa868bc6fab4bcdd5",__v:0,id:"54bae520a868bc6fab4bcdd8"},{_id:"54bae50aa868bc6fab4bcdac",name:"всякие национальности (без вычленения)",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae50aa868bc6fab4bcdac"},{_id:"54bae517a868bc6fab4bcdc6",name:"Дети в лагере",parent:"54bae4f0a868bc6fab4bcd6d",__v:0,id:"54bae517a868bc6fab4bcdc6"},{_id:"54baea79a868bc81751d8ad5",name:"Транспортировка в СССР (отправка, отъезд)",parent:"54baea79a868bc81751d8ad4",__v:0,id:"54baea79a868bc81751d8ad5"},{_id:"54bae99da868bc3ec7fb5ad9",name:"Передача в советскую зону (в том числе случайный самостоятельный переход)",parent:"54bae99ca868bc3ec7fb5ad8",__v:0,id:"54bae99da868bc3ec7fb5ad9"},{_id:"54bae514a868bc6fab4bcdc0",name:"латыши",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae514a868bc6fab4bcdc0"},{_id:"54bae99fa868bc3ec7fb5ade",name:"СМЕРШ",parent:"54bae99ca868bc3ec7fb5ad8",__v:0,id:"54bae99fa868bc3ec7fb5ade"},{_id:"54bae515a868bc6fab4bcdc2",name:"татары",parent:"54bae50aa868bc6fab4bcdab",__v:0,id:"54bae515a868bc6fab4bcdc2"},{_id:"54baea7ba868bc81751d8ad7",name:"Получение документов, прописки",parent:"54baea7aa868bc81751d8ad6",__v:0,id:"54baea7ba868bc81751d8ad7"},{_id:"54bae963a868bc3ec7fb5ad6",name:"Отношение  бывших узников и OSTов с немцами /и прочими после освобождения, по пути транспортировки/ - гражданским населением",parent:"54bae95da868bc3ec7fb5acb",__v:0,id:"54bae963a868bc3ec7fb5ad6"},{_id:"54bae9a1a868bc3ec7fb5ae1",name:"служба в советской армии",parent:"54bae99ca868bc3ec7fb5ad8",__v:0,id:"54bae9a1a868bc3ec7fb5ae1"},{_id:"54baea7ca868bc81751d8ad9",name:"Контакты с НКВД (МВД), МГБ и советскими партийными органами",parent:"54baea79a868bc81751d8ad4",__v:0,id:"54baea7ca868bc81751d8ad9"},{_id:"54bae963a868bc3ec7fb5ad5",name:"Отношение советских войск к освобожденным узникам и OSTам",parent:"54bae95da868bc3ec7fb5acb",__v:0,id:"54bae963a868bc3ec7fb5ad5"},{_id:"54bae9a3a868bc3ec7fb5ae5",name:"переписка после освобождения до возвращения",parent:"54bae99ca868bc3ec7fb5ad8",__v:0,id:"54bae9a3a868bc3ec7fb5ae5"},{_id:"54baea7da868bc81751d8adc",name:"Помощь НКВД, МГБ, советских партийных органов",parent:"54baea7ca868bc81751d8ad9",__v:0,id:"54baea7da868bc81751d8adc"},{_id:"54baea79a868bc81751d8ad4",name:"Репатриация",parent:"54bae9e6a868bc3ec7fb5ae6",__v:0,id:"54baea79a868bc81751d8ad4"},{_id:"54baea82a868bc81751d8ae4",name:"работа и карьера",parent:"54baea80a868bc81751d8ae2",__v:0,id:"54baea82a868bc81751d8ae4"},{_id:"54baea80a868bc81751d8ae2",name:"Социализация",parent:"54baea79a868bc81751d8ad4",__v:0,id:"54baea80a868bc81751d8ae2"},{_id:"54bae493a868bc6fab4bcc30",name:"Проживание / место проживания",parent:"54bad419a868bca4e8cc65ca",__v:0,id:"54bae493a868bc6fab4bcc30"},{_id:"54bae99ea868bc3ec7fb5adc",name:"фильтрационные лагеря",parent:"54bae99ca868bc3ec7fb5ad8",__v:0,id:"54bae99ea868bc3ec7fb5adc"},{_id:"54baea7aa868bc81751d8ad6",name:"Устройство жизни на новом месте",parent:"54baea79a868bc81751d8ad4",__v:0,id:"54baea7aa868bc81751d8ad6"},{_id:"54baea7ca868bc81751d8ada",name:"Вступление в партию, комсомол (в том числе попытки или неприятие)",parent:"54baea7ca868bc81751d8ad9",__v:0,id:"54baea7ca868bc81751d8ada"},{_id:"54baea7fa868bc81751d8adf",name:"Семейные отношения (брак, вдовство, одиночество, сексуальные отношения)",parent:"54baea7ea868bc81751d8add",__v:0,id:"54baea7fa868bc81751d8adf"},{_id:"54baea83a868bc81751d8ae6",name:"В городе",parent:"54baea82a868bc81751d8ae5",__v:0,id:"54baea83a868bc81751d8ae6"},{_id:"54baea87a868bc81751d8aee",name:"арест",parent:"54baea86a868bc81751d8aec",__v:0,id:"54baea87a868bc81751d8aee"},{_id:"54baea85a868bc81751d8aeb",name:"Голод 1946—1947",parent:"54baea79a868bc81751d8ad4",__v:0,id:"54baea85a868bc81751d8aeb"},{_id:"54b8f2c3a868bc4fd8ca4a4d",name:"Город (если сельский быт на окраине города — то в деревню)",description:"",parent:"54b8f28aa868bc4fd8ca4a4b",__v:0,id:"54b8f2c3a868bc4fd8ca4a4d"},{_id:"54baeaaca868bc81751d8af4",name:"Упоминание о действующих национально-освободительных и военных формированиях  (например, упоминание про бандеровцев, но не участие, сюда же упоминаемое отношение)",parent:"54baeaaca868bc81751d8af3",__v:0,id:"54baeaaca868bc81751d8af4"},{_id:"54baea84a868bc81751d8ae9",name:"В городе",parent:"54baea84a868bc81751d8ae8",__v:0,id:"54baea84a868bc81751d8ae9"},{_id:"54baeab1a868bc81751d8afc",name:"отношение к  власти / оценка, переоценка/ ( к войне, репрессиям, деятельности руководящих и партийных органов, политическим деятелям)",parent:"54baeab0a868bc81751d8afb",__v:0,id:"54baeab1a868bc81751d8afc"},{_id:"54b8f28aa868bc4fd8ca4a4b",name:"Организация повседневной жизни",description:"",parent:"54b8f267a868bc4fd8ca4a49",__v:0,id:"54b8f28aa868bc4fd8ca4a4b"},{_id:"54baea8aa868bc81751d8af2",name:"иное (принудительный труд как последствие фильтрации) например, на восстановлении шахт Донбасса, с лишением документов ; при  попытке побега как дезертиры оказывались в лагерях",parent:"54baea86a868bc81751d8aec",__v:0,id:"54baea8aa868bc81751d8af2"},{_id:"54b8f2b2a868bc4fd8ca4a4c",name:"Снабжение продовольствием, в т.ч. карточная система",description:"",parent:"54b8f267a868bc4fd8ca4a49",__v:0,id:"54b8f2b2a868bc4fd8ca4a4c"},{_id:"54bae51aa868bc6fab4bcdcc",name:"травматология",parent:"54bae519a868bc6fab4bcdc9",__v:0,id:"54bae51aa868bc6fab4bcdcc"},{_id:"54bae521a868bc6fab4bcdd9",name:"затопление барж с узниками и пр.; при подходе советских войск",parent:"54bae51fa868bc6fab4bcdd5",__v:0,id:"54bae521a868bc6fab4bcdd9"},{_id:"54bae51aa868bc6fab4bcdcd",name:"психические травмы",parent:"54bae519a868bc6fab4bcdc9",__v:0,id:"54bae51aa868bc6fab4bcdcd"},{_id:"54bae95ea868bc3ec7fb5acd",name:"Освобождение союзническими войсками",parent:"54bae95da868bc3ec7fb5acb",__v:0,id:"54bae95ea868bc3ec7fb5acd"},{_id:"54b8f46fa868bc7ce1755372",name:"Образование и воспитание",description:"",parent:"54b8f267a868bc4fd8ca4a49",__v:0,id:"54b8f46fa868bc7ce1755372"},{_id:"54b8f2d4a868bc4fd8ca4a4e",name:"Сельская местность",description:"",parent:"54b8f28aa868bc4fd8ca4a4b",__v:0,id:"54b8f2d4a868bc4fd8ca4a4e"},{_id:"54b8f75da868bc87881bb786",name:"Комсомол",description:"",parent:"54b8f74ba868bc87881bb784",__v:0,id:"54b8f75da868bc87881bb786"},{_id:"54bae962a868bc3ec7fb5ad4",name:"Отношение советских войск к местному населению",parent:"54bae95da868bc3ec7fb5acb",__v:0,id:"54bae962a868bc3ec7fb5ad4"},{_id:"54bae95fa868bc3ec7fb5ace",name:"встреча с союзниками",parent:"54bae95ea868bc3ec7fb5acd",__v:0,id:"54bae95fa868bc3ec7fb5ace"},{_id:"54bae95da868bc3ec7fb5acb",name:"Освобождение",parent:"54bad419a868bca4e8cc65ca",__v:0,id:"54bae95da868bc3ec7fb5acb"},{_id:"54bae51ea868bc6fab4bcdd4",name:"помещение в карцер (бункер)",parent:"54bae51da868bc6fab4bcdd1",__v:0,id:"54bae51ea868bc6fab4bcdd4"},{_id:"54bae961a868bc3ec7fb5ad2",name:"сборно-пересыльные лагеря перемещенных лиц (союзнические) (американские и т. п.; в том  числе русские финской войны - «шведы»)",parent:"54bae95ea868bc3ec7fb5acd",__v:0,id:"54bae961a868bc3ec7fb5ad2"},{_id:"54bae9a0a868bc3ec7fb5adf",name:"допросы",parent:"54bae99fa868bc3ec7fb5ade",__v:0,id:"54bae9a0a868bc3ec7fb5adf"},{_id:"54bae9a2a868bc3ec7fb5ae3",name:"на территории СССР (с ID10)",parent:"54bae9a1a868bc3ec7fb5ae1",__v:0,id:"54bae9a2a868bc3ec7fb5ae3"},{_id:"54bae9e6a868bc3ec7fb5ae6",name:"Возвращение в СССР, современность",parent:"",description:"laljalskdfjalsdf",__v:0,id:"54bae9e6a868bc3ec7fb5ae6"},{_id:"54baea81a868bc81751d8ae3",name:"образование",parent:"54baea80a868bc81751d8ae2",__v:0,id:"54baea81a868bc81751d8ae3"},{_id:"54baea86a868bc81751d8aec",name:"Репрессии",parent:"54baea79a868bc81751d8ad4",__v:0,id:"54baea86a868bc81751d8aec"},{_id:"54b8f32ca868bc2304d90677",name:"Город",description:"",parent:"54b8f2b2a868bc4fd8ca4a4c",__v:0,id:"54b8f32ca868bc2304d90677"},{_id:"54b8f74ba868bc87881bb784",name:"Молодежные организации",description:"",parent:"54b8f46fa868bc7ce1755372",__v:0,id:"54b8f74ba868bc87881bb784"},{_id:"54b8f423a868bc7ce1755370",name:"Коллективизация, колхозы",description:"",parent:"54b8f267a868bc4fd8ca4a49",__v:0,id:"54b8f423a868bc7ce1755370"},{_id:"54b8f33aa868bc2304d90678",name:"Сельская местность",description:"",parent:"54b8f2b2a868bc4fd8ca4a4c",__v:0,id:"54b8f33aa868bc2304d90678"},{_id:"54b8f43fa868bc7ce1755371",name:"Голод в 20-30-е годы",description:"",parent:"54b8f267a868bc4fd8ca4a49",__v:0,id:"54b8f43fa868bc7ce1755371"},{_id:"54b8fb41a868bcacb1e16992",name:"Воспитание в семье",description:"",parent:"54b8f46fa868bc7ce1755372",__v:0,id:"54b8fb41a868bcacb1e16992"},{_id:"54b8fb20a868bcacb1e16990",name:"Идеологическое воспитание",description:"",parent:"54b8f46fa868bc7ce1755372",__v:0,id:"54b8fb20a868bcacb1e16990"},{_id:"54b90358a868bcb9a6c11bea",name:"Политические репрессии",description:"",parent:"54b8f267a868bc4fd8ca4a49",__v:0,id:"54b90358a868bcb9a6c11bea"},{_id:"54b90337a868bcb9a6c11be7",name:"Религия",description:"",parent:"54b8f267a868bc4fd8ca4a49",__v:0,id:"54b90337a868bcb9a6c11be7"},{_id:"54b984f5a868bc8ef1307b4c",name:"Депортации",parent:"54b984b2a868bcf41d8fa713",description:"",__v:0,id:"54b984f5a868bc8ef1307b4c"},{_id:"54b8f485a868bc7ce1755373",name:"Школа",description:"",parent:"54b8f46fa868bc7ce1755372",__v:0,id:"54b8f485a868bc7ce1755373"},{_id:"54b985c8a868bc7952ea751a",name:"Паника",parent:"54b98512a868bc8ef1307b4f",description:"",__v:0,id:"54b985c8a868bc7952ea751a"},{_id:"54b986b4a868bc31dfb76071",name:"Военные действия (армия)",parent:"54b984b2a868bcf41d8fa713",description:"",__v:0,id:"54b986b4a868bc31dfb76071"},{_id:"54b98602a868bc70829a8561",name:"Государственных учреждений",parent:"54b985e7a868bc7952ea751d",description:"",__v:0,id:"54b98602a868bc70829a8561"},{_id:"54b9850fa868bc8ef1307b4e",name:"Начало войны, 22 июня 1941 г.",parent:"54b984b2a868bcf41d8fa713",description:"",__v:0,id:"54b9850fa868bc8ef1307b4e"},{_id:"54b98771a868bc12403f2b01",name:'В "регулярных" войсках',parent:"54b986b4a868bc31dfb76070",description:"",__v:0,id:"54b98771a868bc12403f2b01"},{_id:"54ba9bf4a868bc317a7aff07",name:"евреев (в том числе расстрелы)",parent:"54ba9bc9a868bc317a7aff04",description:"",__v:0,id:"54ba9bf4a868bc317a7aff07"},{_id:"54ba9baca868bc317a7aff02",name:"западные украинцы",parent:"54ba9b5fa868bc317a7afefb",description:"",__v:0,id:"54ba9baca868bc317a7aff02"},{_id:"54ba9b80a868bc317a7afefd",name:"Итальянцы",parent:"54ba9b5fa868bc317a7afefb",description:"",__v:0,id:"54ba9b80a868bc317a7afefd"},{_id:"54ba9c11a868bc317a7aff0c",name:"Расстрелы, повешения",parent:"54ba9bf4a868bc317a7aff07",description:"",__v:0,id:"54ba9c11a868bc317a7aff0c"},{_id:"54b8f41ca868bc7ce175536f",name:"Болезни, медицина",description:"",parent:"54b8f267a868bc4fd8ca4a49",__v:0,id:"54b8f41ca868bc7ce175536f"},{_id:"54b8facea868bc2b8276ad2a",name:"Прочие",description:"",parent:"54b8f74ba868bc87881bb784",__v:0,id:"54b8facea868bc2b8276ad2a"},{_id:"54b903aca868bcb9a6c11bec",name:"раскулачивание и высылка ",description:"",parent:"54b90358a868bcb9a6c11bea",__v:0,id:"54b903aca868bcb9a6c11bec"},{_id:"54b9000ba868bcfde92a36eb",name:"Национальная политика, русификация, русский язык",description:"",parent:"54b8f267a868bc4fd8ca4a49",__v:0,id:"54b9000ba868bcfde92a36eb"},{_id:"54b984b2a868bcf41d8fa713",name:"Война и оккупация",parent:"",description:"",__v:0,id:"54b984b2a868bcf41d8fa713"},{_id:"54b98616a868bc70829a8563",name:"Партийных органов",parent:"54b985e7a868bc7952ea751d",description:"",__v:0,id:"54b98616a868bc70829a8563"},{_id:"54b9864fa868bc70829a8566",name:"Бомбежки, военные действия (упоминание, описание стороннее)",parent:"54b98512a868bc8ef1307b4f",description:"",__v:0,id:"54b9864fa868bc70829a8566"},{_id:"54b9855aa868bc7952ea7516",name:"Изменения в быту с началом войны",parent:"54b98512a868bc8ef1307b4f",description:"",__v:0,id:"54b9855aa868bc7952ea7516"},{_id:"54b8f49fa868bc7ce1755375",name:"ВУЗы",description:"",parent:"54b8f46fa868bc7ce1755372",__v:0,id:"54b8f49fa868bc7ce1755375"},{_id:"54ba9ba1a868bc317a7aff01",name:"словаки",parent:"54ba9b5fa868bc317a7afefb",description:"",__v:0,id:"54ba9ba1a868bc317a7aff01"},{_id:"54b984e8a868bc8ef1307b4b",name:"Вооруженные конфликты с Японией (Халкин-Гол; оз. Хасан) и в 1945",parent:"54b984b2a868bcf41d8fa713",description:"",__v:0,id:"54b984e8a868bc8ef1307b4b"},{_id:"54b9877da868bc12403f2b03",name:"Самостоятельный выход из окружения (в том числе в гражданской одежде)",parent:"54b986b4a868bc31dfb76070",description:"",__v:0,id:"54b9877da868bc12403f2b03"},{_id:"54b90362a868bcb9a6c11beb",name:"Чистки, аресты, расстрелы",description:"",parent:"54b90358a868bcb9a6c11bea",__v:0,id:"54b90362a868bcb9a6c11beb"},{_id:"54ba9bcda868bc317a7aff06",name:"казни неназванных категорий населения",parent:"54ba9bbaa868bc317a7aff03",description:"",__v:0,id:"54ba9bcda868bc317a7aff06"},{_id:"54ba9b72a868bc317a7afefc",name:"Немцы",parent:"54ba9b5fa868bc317a7afefb",description:"",__v:0,id:"54ba9b72a868bc317a7afefc"},{_id:"54b903d0a868bc4c5cf78a0a",name:"депортация",description:"",parent:"54b90358a868bcb9a6c11bea",__v:0,id:"54b903d0a868bc4c5cf78a0a"},{_id:"54b98615a868bc70829a8562",name:"Промышленности",parent:"54b985e7a868bc7952ea751d",description:"",__v:0,id:"54b98615a868bc70829a8562"},{_id:"54b9856ca868bc7952ea7517",name:"Снабжение продовольствием, Карточная система 1941-1945",parent:"54b98512a868bc8ef1307b4f",description:"",__v:0,id:"54b9856ca868bc7952ea7517"},{_id:"54b985dba868bc7952ea751c",name:"Учеба в тылу",parent:"54b98512a868bc8ef1307b4f",description:"",__v:0,id:"54b985dba868bc7952ea751c"},{_id:"54b984caa868bc8ef1307b4a",name:"Финская война, мобилизация",parent:"54b984b2a868bcf41d8fa713",description:"",__v:0,id:"54b984caa868bc8ef1307b4a"},{_id:"54b8f751a868bc87881bb785",name:"Пионерская организация",description:"",parent:"54b8f74ba868bc87881bb784",__v:0,id:"54b8f751a868bc87881bb785"},{_id:"54b90351a868bcb9a6c11be9",name:"Настроения общества перед войной",description:"",parent:"54b8f267a868bc4fd8ca4a49",__v:0,id:"54b90351a868bcb9a6c11be9"},{_id:"54b98616a868bc70829a8564",name:"Гражданского населения",parent:"54b985e7a868bc7952ea751d",description:"",__v:0,id:"54b98616a868bc70829a8564"},{_id:"54b98512a868bc8ef1307b4f",name:"Тыловая повседневность",parent:"54b984b2a868bcf41d8fa713",description:"",__v:0,id:"54b98512a868bc8ef1307b4f"},{_id:"54b9877da868bc12403f2b02",name:"Участие в ополчении",parent:"54b986b4a868bc31dfb76070",description:"",__v:0,id:"54b9877da868bc12403f2b02"},{_id:"54ba9b81a868bc317a7afeff",name:"румыны",parent:"54ba9b5fa868bc317a7afefb",description:"",__v:0,id:"54ba9b81a868bc317a7afeff"},{_id:"54ba9bf4a868bc317a7aff08",name:"коммунистов и активистов, членов их семей (в том числе казни)",parent:"54ba9bc9a868bc317a7aff04",description:"",__v:0,id:"54ba9bf4a868bc317a7aff08"},{_id:"54b985c0a868bc7952ea7519",name:"Грабежи",parent:"54b98512a868bc8ef1307b4f",description:"",__v:0,id:"54b985c0a868bc7952ea7519"},{_id:"54ba9b30a868bc317a7afefa",name:"Оккупация",parent:"54b984b2a868bcf41d8fa713",description:"",__v:0,id:"54ba9b30a868bc317a7afefa"},{_id:"54b903dfa868bc4c5cf78a0b",name:"Сотрудничество с НКВД (или уклонение от такового)",description:"",parent:"54b90358a868bcb9a6c11bea",__v:0,id:"54b903dfa868bc4c5cf78a0b"},{_id:"54b986b4a868bc31dfb76070",name:"Участие в военных действиях (не только респондента, но других героев рассказа)",parent:"54b986b4a868bc31dfb76071",description:"",__v:0,id:"54b986b4a868bc31dfb76070"},{_id:"54b8fb4aa868bcacb1e16993",name:"Детский дом",description:"",parent:"54b8f46fa868bc7ce1755372",__v:0,id:"54b8fb4aa868bcacb1e16993"},{_id:"54b9875ea868bc98a53dfc2a",name:"Пленение",parent:"54b986b4a868bc31dfb76071",description:"",__v:0,id:"54b9875ea868bc98a53dfc2a"},{_id:"54b985d5a868bc7952ea751b",name:"Работа в тылу",parent:"54b98512a868bc8ef1307b4f",description:"",__v:0,id:"54b985d5a868bc7952ea751b"},{_id:"54ba9bbaa868bc317a7aff03",name:"Репрессии оккупационных властей",parent:"54ba9b30a868bc317a7afefa",description:"",__v:0,id:"54ba9bbaa868bc317a7aff03"},{_id:"54ba9b80a868bc317a7afefe",name:"Венгры",parent:"54ba9b5fa868bc317a7afefb",description:"",__v:0,id:"54ba9b80a868bc317a7afefe"},{_id:"54ba9c70a868bc317a7aff13",name:"карательные операции",parent:"54ba9c45a868bc317a7aff0e",description:"",__v:0,id:"54ba9c70a868bc317a7aff13"},{_id:"54ba9bf4a868bc317a7aff09",name:"гражданских лиц без документов",parent:"54ba9bc9a868bc317a7aff04",description:"",__v:0,id:"54ba9bf4a868bc317a7aff09"},{_id:"54ba9c3fa868bc317a7aff0d",name:"военнопленные",parent:"54ba9bcda868bc317a7aff05",description:"",__v:0,id:"54ba9c3fa868bc317a7aff0d"},{_id:"54ba9bc9a868bc317a7aff04",name:"Против мирного населения:",parent:"54ba9bbaa868bc317a7aff03",description:"",__v:0,id:"54ba9bc9a868bc317a7aff04"},{_id:"54b8fac0a868bc2b8276ad29",name:"Военно-спортивные, военная подготовка",description:"",parent:"54b8f74ba868bc87881bb784",__v:0,id:"54b8fac0a868bc2b8276ad29"},{_id:"54ba9c45a868bc317a7aff0e",name:"партизаны и участники сопротивления ( в том числе гестапо, избиения)",parent:"54ba9bcda868bc317a7aff05",description:"",__v:0,id:"54ba9c45a868bc317a7aff0e"},{_id:"54ba9c5ba868bc317a7aff10",name:"карательные операции (например, против десанта)",parent:"54ba9c3fa868bc317a7aff0d",description:"",__v:0,id:"54ba9c5ba868bc317a7aff10"},{_id:"54ba9c11a868bc317a7aff0b",name:"Гетто",parent:"54ba9bf4a868bc317a7aff07",description:"",__v:0,id:"54ba9c11a868bc317a7aff0b"},{_id:"54ba9c70a868bc317a7aff12",name:" тюрьмы, Гестапо, наказания  (в том числе аресты, избиения, пытки, режим, казни)",parent:"54ba9c45a868bc317a7aff0e",description:"",__v:0,id:"54ba9c70a868bc317a7aff12"},{_id:"54b8fff8a868bcfde92a36ea",name:"Иное",description:"",parent:"54b8f46fa868bc7ce1755372",__v:0,id:"54b8fff8a868bcfde92a36ea"},{_id:"54b903e7a868bc4c5cf78a0c",name:"ГУЛАГ",description:"",parent:"54b90358a868bcb9a6c11bea",__v:0,id:"54b903e7a868bc4c5cf78a0c"},{_id:"54ba9ceea868bc317a7aff17",name:"надзиратели",parent:"54ba9ce7a868bc317a7aff15",description:"",__v:0,id:"54ba9ceea868bc317a7aff17"},{_id:"54b984f9a868bc8ef1307b4d",name:"Трудармия",parent:"54b984b2a868bcf41d8fa713",description:"",__v:0,id:"54b984f9a868bc8ef1307b4d"},{_id:"54b9033ca868bcb9a6c11be8",name:"Работа, профессия",description:"",parent:"54b8f267a868bc4fd8ca4a49",__v:0,id:"54b9033ca868bcb9a6c11be8"},{_id:"54b985e7a868bc7952ea751d",name:"Эвакуация",parent:"54b98512a868bc8ef1307b4f",description:"",__v:0,id:"54b985e7a868bc7952ea751d"},{_id:"54b98616a868bc70829a8565",name:"Мобилизация",parent:"54b98512a868bc8ef1307b4f",description:"",__v:0,id:"54b98616a868bc70829a8565"},{_id:"54b98755a868bc98a53dfc29",name:"Этапирование задержанных (воннопленных, гражданских без документов и т.п.) до сборного пункта",parent:"54b986b4a868bc31dfb76071",description:"",__v:0,id:"54b98755a868bc98a53dfc29"},{_id:"54ba9c5ba868bc317a7aff11",name:"евреи военнопленные (издевательства, казни)",parent:"54ba9c3fa868bc317a7aff0d",description:"",__v:0,id:"54ba9c5ba868bc317a7aff11"},{_id:"54ba9b5fa868bc317a7afefb",name:"Образ оккупанта (т. е. военных, хотя бы венгры армейские действовали на территории Венгрии)",parent:"54ba9b30a868bc317a7afefa",description:"",__v:0,id:"54ba9b5fa868bc317a7afefb"},{_id:"54ba9bcda868bc317a7aff05",name:"Против военных:",parent:"54ba9bbaa868bc317a7aff03",description:"",__v:0,id:"54ba9bcda868bc317a7aff05"},{_id:"54ba9bf7a868bc317a7aff0a",name:"цыган",parent:"54ba9bc9a868bc317a7aff04",description:"",__v:0,id:"54ba9bf7a868bc317a7aff0a"},{_id:"54b98572a868bc7952ea7518",name:"Хаос начала войны",parent:"54b98512a868bc8ef1307b4f",description:"",__v:0,id:"54b98572a868bc7952ea7518"},{_id:"54ba9ceba868bc317a7aff16",name:"администрация",parent:"54ba9ce7a868bc317a7aff15",description:"",__v:0,id:"54ba9ceba868bc317a7aff16"},{_id:"54ba9c55a868bc317a7aff0f",name:"тюрьмы, Гестапо, наказания  (в том числе избиения, пытки, режим, казни)",parent:"54ba9c3fa868bc317a7aff0d",description:"",__v:0,id:"54ba9c55a868bc317a7aff0f"},{_id:"54ba9d63a868bc317a7aff24",name:"лазарет",parent:"54ba9d59a868bc317a7aff21",description:"",__v:0,id:"54ba9d63a868bc317a7aff24"},{_id:"54ba9b81a868bc317a7aff00",name:"чехи",parent:"54ba9b5fa868bc317a7afefb",description:"",__v:0,id:"54ba9b81a868bc317a7aff00"},{_id:"54ba9d29a868bc317a7aff1d",name:"дезинфекция",parent:"54ba9d02a868bc317a7aff19",description:"",__v:0,id:"54ba9d29a868bc317a7aff1d"},{_id:"54ba9ce7a868bc317a7aff15",name:"Администрация и обслуживание лагеря",parent:"54ba9ccba868bc317a7aff14",description:"",__v:0,id:"54ba9ce7a868bc317a7aff15"},{_id:"54ba9d94a868bc317a7aff28",name:"мусульмане (в прямом смысле)",parent:"54ba9d78a868bc317a7aff26",description:"",__v:0,id:"54ba9d94a868bc317a7aff28"},{_id:"54ba9d0ba868bc317a7aff1b",name:"лагерь и окрестности",parent:"54ba9d01a868bc317a7aff18",description:"",__v:0,id:"54ba9d0ba868bc317a7aff1b"},{_id:"54ba9df2a868bc317a7aff2e",name:"побеги",parent:"54ba9ddba868bc317a7aff2c",description:"",__v:0,id:"54ba9df2a868bc317a7aff2e"},{_id:"54ba9da3a868bc317a7aff29",name:"общие болезни",parent:"54ba9d59a868bc317a7aff23",description:"",__v:0,id:"54ba9da3a868bc317a7aff29"},{_id:"54ba9d78a868bc317a7aff27",name:"евреи",parent:"54ba9d78a868bc317a7aff26",description:"",__v:0,id:"54ba9d78a868bc317a7aff27"},{_id:"54ba9e39a868bc317a7aff33",name:"помощь евреям",parent:"54ba9e1da868bc317a7aff2f",description:"",__v:0,id:"54ba9e39a868bc317a7aff33"},{_id:"54ba9d43a868bc317a7aff1f",name:"лагерный паек",parent:"54ba9d39a868bc317a7aff1e",description:"",__v:0,id:"54ba9d43a868bc317a7aff1f"},{_id:"54ba9eaaa868bc317a7aff3d",name:"Работа на оккупированной территории (в том числе биржа труда)",parent:"54ba9b30a868bc317a7afefa",description:"",__v:0,id:"54ba9eaaa868bc317a7aff3d"},{_id:"54ba9f29a868bc317a7aff47",name:"церковь",parent:"54ba9eaaa868bc317a7aff3e",description:"",__v:0,id:"54ba9f29a868bc317a7aff47"},{_id:"54ba9f45a868bc317a7aff4c",name:"иное ",parent:"54ba9eaaa868bc317a7aff3e",description:"",__v:0,id:"54ba9f45a868bc317a7aff4c"},{_id:"54ba9eeaa868bc317a7aff43",name:"полиция (в т.ч. Доброволец в немецкой одежде)",parent:"54ba9eaaa868bc317a7aff3e",description:"",__v:0,id:"54ba9eeaa868bc317a7aff43"},{_id:"54ba9e70a868bc317a7aff38",name:"Дивизия СС «Галичина»",parent:"54ba9e52a868bc317a7aff36",description:"",__v:0,id:"54ba9e70a868bc317a7aff38"},{_id:"54ba9d01a868bc317a7aff18",name:"Топография лагеря и окрестностей",parent:"54ba9ccba868bc317a7aff14",description:"",__v:0,id:"54ba9d01a868bc317a7aff18"},{_id:"54ba9d59a868bc317a7aff21",name:"Внутрилагерные работы",parent:"54ba9ccba868bc317a7aff14",description:"",__v:0,id:"54ba9d59a868bc317a7aff21"},{_id:"54ba9d78a868bc317a7aff26",name:"межнациональные отношения:",parent:"54ba9d59a868bc317a7aff22",description:"",__v:0,id:"54ba9d78a868bc317a7aff26"},{_id:"54ba9d03a868bc317a7aff1a",name:"Повседневность",parent:"54ba9ccba868bc317a7aff14",description:"",__v:0,id:"54ba9d03a868bc317a7aff1a"},{_id:"54bad419a868bca4e8cc65ca",name:"Остарбайтеры в Германии",parent:"",description:"",__v:0,id:"54bad419a868bca4e8cc65ca"},{_id:"54ba9ea9a868bc317a7aff3c",name:"Болезни, медицина (не в больницах)",parent:"54ba9b30a868bc317a7afefa",description:"",__v:0,id:"54ba9ea9a868bc317a7aff3c"},{_id:"54ba9e1da868bc317a7aff30",name:"Сотрудничество с оккупационными властями",parent:"54ba9b30a868bc317a7afefa",description:"",__v:0,id:"54ba9e1da868bc317a7aff30"},{_id:"54ba9ec9a868bc317a7aff41",name:"в сельской местности",parent:"54ba9eaaa868bc317a7aff3d",description:"",__v:0,id:"54ba9ec9a868bc317a7aff41"},{_id:"54ba9e52a868bc317a7aff35",name:"выдача евреев, партизан, членов партии, беглых",parent:"54ba9e1da868bc317a7aff30",description:"",__v:0,id:"54ba9e52a868bc317a7aff35"},{_id:"54ba9ddba868bc317a7aff2b",name:"Наказания",parent:"54ba9ccba868bc317a7aff14",description:"",__v:0,id:"54ba9ddba868bc317a7aff2b"},{_id:"54ba9d39a868bc317a7aff1e",name:"питание",parent:"54ba9d03a868bc317a7aff1a",description:"",__v:0,id:"54ba9d39a868bc317a7aff1e"},{_id:"54ba9ccba868bc317a7aff14",name:"Сборный пункт для взятых в плен военных + гражданских (на оккупированной территории СССР)",parent:"54ba9b30a868bc317a7afefa",description:"",__v:0,id:"54ba9ccba868bc317a7aff14"},{_id:"54ba9eeaa868bc317a7aff46",name:"театры",parent:"54ba9eaaa868bc317a7aff3e",description:"",__v:0,id:"54ba9eeaa868bc317a7aff46"},{_id:"54ba9d02a868bc317a7aff19",name:"Регламентация лагерной жизни",parent:"54ba9ccba868bc317a7aff14",description:"",__v:0,id:"54ba9d02a868bc317a7aff19"},{_id:"54ba9d59a868bc317a7aff22",name:"Отношения между заключенными",parent:"54ba9ccba868bc317a7aff14",description:"",__v:0,id:"54ba9d59a868bc317a7aff22"},{_id:"54ba9e52a868bc317a7aff37",name:"РОА",parent:"54ba9e52a868bc317a7aff36",description:"",__v:0,id:"54ba9e52a868bc317a7aff37"},{_id:"54ba9ea9a868bc317a7aff3b",name:"голод и способы выживания (обмен, воровство, грабежи)",parent:"54ba9b30a868bc317a7afefa",description:"",__v:0,id:"54ba9ea9a868bc317a7aff3b"},{_id:"54badd15a868bcff4803cbd3",name:"облава",parent:"54badd14a868bcff4803cbd0",__v:0,id:"54badd15a868bcff4803cbd3"},{_id:"54ba9db6a868bc317a7aff2a",name:"Смерть и похороны",parent:"54ba9ccba868bc317a7aff14",description:"",__v:0,id:"54ba9db6a868bc317a7aff2a"},{_id:"54ba9e39a868bc317a7aff32",name:"Партизанское движение и подпольная деятельность",parent:"54ba9e1da868bc317a7aff2f",description:"",__v:0,id:"54ba9e39a868bc317a7aff32"},{_id:"54ba9d59a868bc317a7aff23",name:"Болезни, медицина",parent:"54ba9ccba868bc317a7aff14",description:"",__v:0,id:"54ba9d59a868bc317a7aff23"},{_id:"54ba9ddba868bc317a7aff2c",name:"Сопротивление",parent:"54ba9ccba868bc317a7aff14",description:"",__v:0,id:"54ba9ddba868bc317a7aff2c"},{_id:"54ba9eaaa868bc317a7aff3f",name:"медицинские учреждения",parent:"54ba9eaaa868bc317a7aff3e",description:"",__v:0,id:"54ba9eaaa868bc317a7aff3f"},{_id:"54ba9f61a868bc317a7aff4f",name:"Политические настроения во время войны",parent:"54ba9f5ba868bc317a7aff4d",description:"",__v:0,id:"54ba9f61a868bc317a7aff4f"},{_id:"54ba9eeaa868bc317a7aff42",name:"местная администрация",parent:"54ba9eaaa868bc317a7aff3e",description:"",__v:0,id:"54ba9eeaa868bc317a7aff42"},{_id:"54ba9d14a868bc317a7aff1c",name:"зоны (бараки) иных категорий заключенных",parent:"54ba9d01a868bc317a7aff18",description:"",__v:0,id:"54ba9d14a868bc317a7aff1c"},{_id:"54ba9d77a868bc317a7aff25",name:"взаимопомощь",parent:"54ba9d59a868bc317a7aff22",description:"",__v:0,id:"54ba9d77a868bc317a7aff25"},{_id:"54ba9f45a868bc317a7aff4b",name:"украинизация",parent:"54ba9eaaa868bc317a7aff3e",description:"",__v:0,id:"54ba9f45a868bc317a7aff4b"},{_id:"54ba9d4ea868bc317a7aff20",name:"условия жизни",parent:"54ba9d03a868bc317a7aff1a",description:"",__v:0,id:"54ba9d4ea868bc317a7aff20"},{_id:"54ba9f32a868bc317a7aff49",name:"агитация, газеты, листовки",parent:"54ba9eaaa868bc317a7aff3e",description:"",__v:0,id:"54ba9f32a868bc317a7aff49"},{_id:"54ba9e1da868bc317a7aff2f",name:"Сопротивление местного населения",parent:"54ba9b30a868bc317a7afefa",description:"",__v:0,id:"54ba9e1da868bc317a7aff2f"},{_id:"54ba9e39a868bc317a7aff34",name:"помощь партизанам (в том числе десанту и бывшим военным, окруженцам)",parent:"54ba9e1da868bc317a7aff2f",description:"",__v:0,id:"54ba9e39a868bc317a7aff34"},{_id:"54ba9ec9a868bc317a7aff40",name:"в городе",parent:"54ba9eaaa868bc317a7aff3d",description:"",__v:0,id:"54ba9ec9a868bc317a7aff40"},{_id:"54ba9e7aa868bc317a7aff39",name:"Иное",parent:"54ba9e52a868bc317a7aff36",description:"",__v:0,id:"54ba9e7aa868bc317a7aff39"},{_id:"54ba9eeaa868bc317a7aff44",name:"городские службы (управдом, например)",parent:"54ba9eaaa868bc317a7aff3e",description:"",__v:0,id:"54ba9eeaa868bc317a7aff44"},{_id:"54ba9f29a868bc317a7aff48",name:"торговля",parent:"54ba9eaaa868bc317a7aff3e",description:"",__v:0,id:"54ba9f29a868bc317a7aff48"},{_id:"54badd14a868bcff4803cbcf",name:"Отправка на принудительные работы",parent:"54bad419a868bca4e8cc65ca",__v:0,id:"54badd14a868bcff4803cbcf"},{_id:"54badd15a868bcff4803cbd7",name:"эшелон (для ОСТов), этапирование (не только ОСТОВ)",parent:"54badd15a868bcff4803cbd6",__v:0,id:"54badd15a868bcff4803cbd7"},{_id:"54ba9f5ba868bc317a7aff4d",name:"Настроения общества и идеология в военный период",parent:"54b984b2a868bcf41d8fa713",description:"",__v:0,id:"54ba9f5ba868bc317a7aff4d"},{_id:"54badd15a868bcff4803cbd4",name:"добровольный отъезд",parent:"54badd14a868bcff4803cbd0",__v:0,id:"54badd15a868bcff4803cbd4"},{_id:"54badd16a868bcff4803cbdd",name:"ОСТы",parent:"54badd16a868bcff4803cbdc",__v:0,id:"54badd16a868bcff4803cbdd"},{_id:"54badd15a868bcff4803cbd8",name:"питание",parent:"54badd15a868bcff4803cbd6",__v:0,id:"54badd15a868bcff4803cbd8"},{_id:"54badd15a868bcff4803cbd5",name:"случайность",parent:"54badd14a868bcff4803cbd0",__v:0,id:"54badd15a868bcff4803cbd5"},{_id:"54badd16a868bcff4803cbdc",name:"нашивки, винкели, лагерные номера",parent:"54badd16a868bcff4803cbdb",__v:0,id:"54badd16a868bcff4803cbdc"},{_id:"54badd14a868bcff4803cbd0",name:"Способы отправки",parent:"54badd14a868bcff4803cbcf",__v:0,id:"54badd14a868bcff4803cbd0"},{_id:"54badd16a868bcff4803cbda",name:"Способы избежать отправки в Германию",parent:"54badd14a868bcff4803cbcf",__v:0,id:"54badd16a868bcff4803cbda"},{_id:"54badd16a868bcff4803cbd9",name:"медицинское освидетельствование и санобработка",parent:"54badd15a868bcff4803cbd6",__v:0,id:"54badd16a868bcff4803cbd9"},{_id:"54ba9de4a868bc317a7aff2d",name:"Казни (в том числе потенциальные)",parent:"54ba9ddba868bc317a7aff2b",description:"",__v:0,id:"54ba9de4a868bc317a7aff2d"},{_id:"54badd17a868bcff4803cbe2",name:"гомосексуалисты",parent:"54badd16a868bcff4803cbdc",__v:0,id:"54badd17a868bcff4803cbe2"},{_id:"54ba9e52a868bc317a7aff36",name:"участие в созданных оккупационными властями военных формированиях",parent:"54ba9e1da868bc317a7aff30",description:"",__v:0,id:"54ba9e52a868bc317a7aff36"},{_id:"54ba9ea9a868bc317a7aff3a",name:"снабжение продовольствием (магазины, карточки)",parent:"54ba9b30a868bc317a7afefa",description:"",__v:0,id:"54ba9ea9a868bc317a7aff3a"},{_id:"54badd14a868bcff4803cbd1",name:"по повестке",parent:"54badd14a868bcff4803cbd0",__v:0,id:"54badd14a868bcff4803cbd1"},{_id:"54ba9f60a868bc317a7aff4e",name:"Военная цензура",parent:"54ba9f5ba868bc317a7aff4d",description:"",__v:0,id:"54ba9f60a868bc317a7aff4e"},{_id:"54ba9eeaa868bc317a7aff45",name:"школы",parent:"54ba9eaaa868bc317a7aff3e",description:"",__v:0,id:"54ba9eeaa868bc317a7aff45"},{_id:"54badd16a868bcff4803cbde",name:"военнопленные",parent:"54badd16a868bcff4803cbdc",__v:0,id:"54badd16a868bcff4803cbde"},{_id:"54badd17a868bcff4803cbe4",name:"религиозные ",parent:"54badd16a868bcff4803cbdc",__v:0,id:"54badd17a868bcff4803cbe4"},{_id:"54ba9e1ea868bc317a7aff31",name:"Организация повседневной жизни (жилье, соседи)",parent:"54ba9b30a868bc317a7afefa",description:"",__v:0,id:"54ba9e1ea868bc317a7aff31"},{_id:"54ba9eaaa868bc317a7aff3e",name:"Функционирование властных и общественных институтов на оккупированной территории",parent:"54ba9b30a868bc317a7afefa",description:"",__v:0,id:"54ba9eaaa868bc317a7aff3e"},{_id:"54badd16a868bcff4803cbdb",name:"Осты – общие характеристики / также и общие хар-ки военнопленных и пр./",parent:"54bad419a868bca4e8cc65ca",__v:0,id:"54badd16a868bcff4803cbdb"},{_id:"54ba9f33a868bc317a7aff4a",name:"детские дома",parent:"54ba9eaaa868bc317a7aff3e",description:"",__v:0,id:"54ba9f33a868bc317a7aff4a"},{_id:"54badd15a868bcff4803cbd2",name:"арест",parent:"54badd14a868bcff4803cbd0",__v:0,id:"54badd15a868bcff4803cbd2"},{_id:"54badd15a868bcff4803cbd6",name:"Доставка в Германию или на оккупированные зоны",parent:"54badd14a868bcff4803cbcf",__v:0,id:"54badd15a868bcff4803cbd6"},{_id:"54badd17a868bcff4803cbe7",name:"эмигранты (упомянут синий винкель ID10)",parent:"54badd16a868bcff4803cbdc",__v:0,id:"54badd17a868bcff4803cbe7"},{_id:"54ba9f61a868bc317a7aff50",name:"Советская пропаганда, агитация, идеологическое воспитание, особые отделы НКВД, трибуналы",parent:"54ba9f5ba868bc317a7aff4d",description:"",__v:0,id:"54ba9f61a868bc317a7aff50"},{_id:"54badd16a868bcff4803cbdf",name:"цыгане",parent:"54badd16a868bcff4803cbdc",__v:0,id:"54badd16a868bcff4803cbdf"},{_id:"54badd16a868bcff4803cbe0",name:"евреи",parent:"54badd16a868bcff4803cbdc",__v:0,id:"54badd16a868bcff4803cbe0"},{_id:"54badd17a868bcff4803cbe3",name:"уголовники",parent:"54badd16a868bcff4803cbdc",__v:0,id:"54badd17a868bcff4803cbe3"},{_id:"54badd17a868bcff4803cbe6",name:"иные",parent:"54badd16a868bcff4803cbdc",__v:0,id:"54badd17a868bcff4803cbe6"},{_id:"54badd17a868bcff4803cbe8",name:"Общение с гражданским населением вне работы и лагерей /не только ОСТов, но и военнопленных и пр./",parent:"54badd16a868bcff4803cbdb",__v:0,id:"54badd17a868bcff4803cbe8"},{_id:"54badd17a868bcff4803cbe1",name:"политические  (участники Сопротивления, в том числе, могли быть и военнопленные)",parent:"54badd16a868bcff4803cbdc",__v:0,id:"54badd17a868bcff4803cbe1"},{_id:"54badf67a868bcfa52e66a5d",name:"Надежда выжить или ее осутствие",parent:"54badd16a868bcff4803cbdb",__v:0,id:"54badf67a868bcfa52e66a5d"},{_id:"54badf68a868bcfa52e66a61",name:"Детские дома",parent:"54badd16a868bcff4803cbdb",__v:0,id:"54badf68a868bcfa52e66a61"},{_id:"54badf67a868bcfa52e66a5e",name:"Перемена хозяев",parent:"54badd16a868bcff4803cbdb",__v:0,id:"54badf67a868bcfa52e66a5e"},{_id:"54badd18a868bcff4803cbe9",name:"Бомбежки в Германии (вне зависимости от типа лагеря, на всей территории Вермахта)",parent:"54badd16a868bcff4803cbdb",__v:0,id:"54badd18a868bcff4803cbe9"},{_id:"54badd17a868bcff4803cbe5",name:"национальности (обозначение) /начала заполнять с ID10/",parent:"54badd16a868bcff4803cbdc",__v:0,id:"54badd17a868bcff4803cbe5"},{_id:"54badf68a868bcfa52e66a62",name:"Вербовка и участие в прогерманских военных организациях",parent:"54badd16a868bcff4803cbdb",__v:0,id:"54badf68a868bcfa52e66a62"},{_id:"54badf68a868bcfa52e66a60",name:"Сексуальные домогательства",parent:"54badd16a868bcff4803cbdb",__v:0,id:"54badf68a868bcfa52e66a60"},{_id:"54badf67a868bcfa52e66a5f",name:"нелегальная продажа остов",parent:"54badf67a868bcfa52e66a5e",__v:0,id:"54badf67a868bcfa52e66a5f"},{_id:"54badf69a868bcfa52e66a67",name:"«Зеленая полиция» / «полиция правопорядка»",parent:"54badf68a868bcfa52e66a64",__v:0,id:"54badf69a868bcfa52e66a67"},{_id:"54badf68a868bcfa52e66a63",name:"вербовка",parent:"54badf68a868bcfa52e66a62",__v:0,id:"54badf68a868bcfa52e66a63"},{_id:"54badf69a868bcfa52e66a6c",name:"«Русская освободительная народная армия»",parent:"54badf68a868bcfa52e66a64",__v:0,id:"54badf69a868bcfa52e66a6c"},{_id:"54badf69a868bcfa52e66a6d",name:"Казачьи формирования",parent:"54badf68a868bcfa52e66a62",__v:0,id:"54badf69a868bcfa52e66a6d"},{_id:"54badf67a868bcfa52e66a5c",name:"Немецкий язык",parent:"54badd16a868bcff4803cbdb",__v:0,id:"54badf67a868bcfa52e66a5c"},{_id:"54badf69a868bcfa52e66a68",name:"войска охраны / «шума» / Schutzmannschaften",parent:"54badf68a868bcfa52e66a64",__v:0,id:"54badf69a868bcfa52e66a68"},{_id:"54badf6aa868bcfa52e66a71",name:"Перемещения из лагеря в лагерь (не связанные с сортировкой, т.е. переезды – не только концлагерь, но и из Гестапо в пересылочный лагерь, сортировочный  и пр)",parent:"54badd16a868bcff4803cbdb",__v:0,id:"54badf6aa868bcfa52e66a71"},{_id:"54bae0f6a868bc91280a8330",name:"поляки",parent:"54bae0f6a868bc91280a832d",__v:0,id:"54bae0f6a868bc91280a8330"},{_id:"54badf69a868bcfa52e66a69",name:"Ostlegionen (Восточные легионы) и Osttruppen (Восточные войска) /Фрайвиллиге / Freiwillige /добровольческие соединения",parent:"54badf68a868bcfa52e66a64",__v:0,id:"54badf69a868bcfa52e66a69"},{_id:"54bae0f5a868bc91280a832a",name:"Начальство",parent:"54bae0f5a868bc91280a8329",__v:0,id:"54bae0f5a868bc91280a832a"},{_id:"54badf69a868bcfa52e66a6e",name:"национальные  «добровольческие» формирования",parent:"54badf68a868bcfa52e66a62",__v:0,id:"54badf69a868bcfa52e66a6e"},{_id:"54badf69a868bcfa52e66a6a",name:"«Зондерштаб Р» («Россия»)",parent:"54badf68a868bcfa52e66a64",__v:0,id:"54badf69a868bcfa52e66a6a"},{_id:"54bae0f8a868bc91280a833a",name:"коксохимический завод",parent:"54bae0f7a868bc91280a8339",__v:0,id:"54bae0f8a868bc91280a833a"},{_id:"54badf68a868bcfa52e66a66",name:"«Организация Тодт»",parent:"54badf68a868bcfa52e66a64",__v:0,id:"54badf68a868bcfa52e66a66"},{_id:"54badf68a868bcfa52e66a64",name:"военнизированные соединения",parent:"54badf68a868bcfa52e66a62",__v:0,id:"54badf68a868bcfa52e66a64"},{_id:"54badf6aa868bcfa52e66a72",name:"Марши смерти",parent:"54badd16a868bcff4803cbdb",__v:0,id:"54badf6aa868bcfa52e66a72"},{_id:"54bae0f7a868bc91280a8335",name:"Обслуживание",parent:"54bae0f7a868bc91280a8334",__v:0,id:"54bae0f7a868bc91280a8335"},{_id:"54bae0f7a868bc91280a8333",name:"итальянцы",parent:"54bae0f6a868bc91280a832d",__v:0,id:"54bae0f7a868bc91280a8333"},{_id:"54bae0f8a868bc91280a833f",name:"железные дороги (грузчики; ремонтные)",parent:"54bae0f7a868bc91280a8337",description:"",__v:0,id:"54bae0f8a868bc91280a833f"},{_id:"54badf6aa868bcfa52e66a70",name:"Неустановленный тип",parent:"54badf68a868bcfa52e66a62",__v:0,id:"54badf6aa868bcfa52e66a70"},{_id:"54bae0f5a868bc91280a8328",name:"Принудительный труд в Германии",parent:"54bad419a868bca4e8cc65ca",__v:0,id:"54bae0f5a868bc91280a8328"},{_id:"54bae0f6a868bc91280a832d",name:"Другие категории заключенных, в том числе по национальному признаку)",parent:"54bae0f5a868bc91280a8329",__v:0,id:"54bae0f6a868bc91280a832d"},{_id:"54bae0f7a868bc91280a8332",name:"немцы",parent:"54bae0f6a868bc91280a832d",__v:0,id:"54bae0f7a868bc91280a8332"},{_id:"54bae0f8a868bc91280a833b",name:"шахта",parent:"54bae0f7a868bc91280a8339",__v:0,id:"54bae0f8a868bc91280a833b"},{_id:"54bae0f7a868bc91280a8336",name:"Конвой",parent:"54bae0f7a868bc91280a8334",__v:0,id:"54bae0f7a868bc91280a8336"},{_id:"54bae0f7a868bc91280a8338",name:"вооружение",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0f7a868bc91280a8338"},{_id:"54bae0f6a868bc91280a832b",name:"Мастер, контролер, надзиратель",parent:"54bae0f5a868bc91280a832a",__v:0,id:"54bae0f6a868bc91280a832b"},{_id:"54bae0f6a868bc91280a832c",name:"Высокое начальство",parent:"54bae0f5a868bc91280a832a",__v:0,id:"54bae0f6a868bc91280a832c"},{_id:"54badf68a868bcfa52e66a65",name:"Хильфсвиллиге / Hilfswillige («хиви»)",parent:"54badf68a868bcfa52e66a64",__v:0,id:"54badf68a868bcfa52e66a65"},{_id:"54bae0f8a868bc91280a8340",name:"строительство (заводов)",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0f8a868bc91280a8340"},{_id:"54bae0f6a868bc91280a832f",name:"чехи",parent:"54bae0f6a868bc91280a832d",__v:0,id:"54bae0f6a868bc91280a832f"},{_id:"54bae0f8a868bc91280a833d",name:"каменоломни",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0f8a868bc91280a833d"},{_id:"54bae0f7a868bc91280a8334",name:"Вольнонаёмные немцы (австрийцы и пр.)",parent:"54bae0f5a868bc91280a8329",__v:0,id:"54bae0f7a868bc91280a8334"},{_id:"54bae0f8a868bc91280a833e",name:'клепальные работы (на транспортере для вывоза грунта из штольни)"',parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0f8a868bc91280a833e"},{_id:"54bae0f9a868bc91280a8344",name:"Строительство [дорог]",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0f9a868bc91280a8344"},{_id:"54bae0f7a868bc91280a8339",name:"Шахты",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0f7a868bc91280a8339"},{_id:"54bae0faa868bc91280a8348",name:"Автомобильный завод Фольксваген - ремонт самолетов",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0faa868bc91280a8348"},{_id:"54bae0f9a868bc91280a8341",name:"Строительство [бараков]",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0f9a868bc91280a8341"},{_id:"54badf69a868bcfa52e66a6b",name:"«Русская Народная Национальная Армия»",parent:"54badf68a868bcfa52e66a64",__v:0,id:"54badf69a868bcfa52e66a6b"},{_id:"54bae0f9a868bc91280a8343",name:"Строительство аэродрома",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0f9a868bc91280a8343"},{_id:"54badf69a868bcfa52e66a6f",name:"«власовцы» / Русская Освободительная армия (РОА)  под командованием А. А. Власова и Комитет Освобождения народов России (КОНР) ",parent:"54badf69a868bcfa52e66a6e",__v:0,id:"54badf69a868bcfa52e66a6f"},{_id:"54bae0f7a868bc91280a8337",name:"Виды работ",parent:"54bae0f5a868bc91280a8329",__v:0,id:"54bae0f7a868bc91280a8337"},{_id:"54bae0f6a868bc91280a8331",name:"русские военнопленные",parent:"54bae0f6a868bc91280a832d",__v:0,id:"54bae0f6a868bc91280a8331"},{_id:"54bae0f9a868bc91280a8345",name:"Железные дороги",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0f9a868bc91280a8345"},{_id:"54bae0f5a868bc91280a8329",name:"Промышленность (бывш. «работа в рабочих лагерях»)",parent:"54bae0f5a868bc91280a8328",__v:0,id:"54bae0f5a868bc91280a8329"},{_id:"54bae0f8a868bc91280a833c",name:"контора (констр. бюро)",parent:"54bae0f7a868bc91280a8339",__v:0,id:"54bae0f8a868bc91280a833c"},{_id:"54bae0f6a868bc91280a832e",name:"французы",parent:"54bae0f6a868bc91280a832d",__v:0,id:"54bae0f6a868bc91280a832e"},{_id:"54bae0f9a868bc91280a8347",name:"Авиационный завод",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0f9a868bc91280a8347"},{_id:"54bae0f9a868bc91280a8342",name:"Строительство (укреплений, в частности на Балтике)",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0f9a868bc91280a8342"},{_id:"54bae0f9a868bc91280a8346",name:"Судоверфи",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0f9a868bc91280a8346"},{_id:"54bae0faa868bc91280a834d",name:"лесозаготовки",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0faa868bc91280a834d"},{_id:"54bae323a868bc6fab4bcc0b",name:"наказания ",parent:"54bae323a868bc6fab4bcc0a",__v:0,id:"54bae323a868bc6fab4bcc0b"},{_id:"54bae39da868bc6fab4bcc0f",name:"Сельское хозяйство",parent:"54bae0f5a868bc91280a8328",__v:0,id:"54bae39da868bc6fab4bcc0f"},{_id:"54bae0faa868bc91280a8349",name:"Станкостроительный завод (производство металлообрабатывающих станков)",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0faa868bc91280a8349"},{_id:"54bae324a868bc6fab4bcc0e",name:"Женский труд (специально обозначенный как отсутствие мужчин на работах)",parent:"54bae0f5a868bc91280a8329",__v:0,id:"54bae324a868bc6fab4bcc0e"},{_id:"54bae3a0a868bc6fab4bcc1f",name:"частный дрожжевой завод",parent:"54bae39fa868bc6fab4bcc18",__v:0,id:"54bae3a0a868bc6fab4bcc1f"},{_id:"54bae0faa868bc91280a834a",name:"Необозначенный завод (литейный или тракторный?",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0faa868bc91280a834a"},{_id:"54bae3a0a868bc6fab4bcc1d",name:"Пекарня",parent:"54bae39fa868bc6fab4bcc18",__v:0,id:"54bae3a0a868bc6fab4bcc1d"},{_id:"54bae39fa868bc6fab4bcc19",name:"Домашняя прислуга",parent:"54bae39fa868bc6fab4bcc18",__v:0,id:"54bae39fa868bc6fab4bcc19"},{_id:"54bae0faa868bc91280a834b",name:"Глинозёмный завод (производство кирпичей)",parent:"54bae0f7a868bc91280a8337",__v:0,id:"54bae0faa868bc91280a834b"},{_id:"54bae39ea868bc6fab4bcc13",name:"Виды работ",parent:"54bae39da868bc6fab4bcc0f",__v:0,id:"54bae39ea868bc6fab4bcc13"},{_id:"54bae2dda868bc6fab4bcc04",name:"Условия труда ",parent:"54bae0f5a868bc91280a8329",__v:0,id:"54bae2dda868bc6fab4bcc04"},{_id:"54bae2dda868bc6fab4bcc06",name:"зарплата, боны",parent:"54bae2dda868bc6fab4bcc04",__v:0,id:"54bae2dda868bc6fab4bcc06"},{_id:"54bae40ba868bc6fab4bcc24",name:"Переводчик, пропагандист",parent:"54bae40ba868bc6fab4bcc23",__v:0,id:"54bae40ba868bc6fab4bcc24"},{_id:"54bae323a868bc6fab4bcc09",name:"учебная  команда",parent:"54bae0f5a868bc91280a8329",__v:0,id:"54bae323a868bc6fab4bcc09"},{_id:"54bae1f7a868bc96bdab8394",name:"квалифицированный труд",parent:"54bae0f7a868bc91280a8337",description:"",__v:0,id:"54bae1f7a868bc96bdab8394"},{_id:"54bae323a868bc6fab4bcc0a",name:"Описание места работы, режима",parent:"54bae0f5a868bc91280a8329",__v:0,id:"54bae323a868bc6fab4bcc0a"},{_id:"54bae1f6a868bc96bdab8393",name:"чернорабочие",parent:"54bae0f7a868bc91280a8337",description:"",__v:0,id:"54bae1f6a868bc96bdab8393"},{_id:"54bae323a868bc6fab4bcc0d",name:"Детский труд",parent:"54bae0f5a868bc91280a8329",__v:0,id:"54bae323a868bc6fab4bcc0d"},{_id:"54bae39da868bc6fab4bcc10",name:"начальство",parent:"54bae39da868bc6fab4bcc0f",__v:0,id:"54bae39da868bc6fab4bcc10"},{_id:"54bae3a0a868bc6fab4bcc20",name:"уход за детьми хозяев",parent:"54bae39fa868bc6fab4bcc18",__v:0,id:"54bae3a0a868bc6fab4bcc20"},{_id:"54bae39ea868bc6fab4bcc14",name:"Условия труда",parent:"54bae39da868bc6fab4bcc0f",__v:0,id:"54bae39ea868bc6fab4bcc14"},{_id:"54bae39fa868bc6fab4bcc1a",name:"Ресторанная прислуга",parent:"54bae39fa868bc6fab4bcc18",__v:0,id:"54bae39fa868bc6fab4bcc1a"},{_id:"54bae3a0a868bc6fab4bcc1e",name:"работа в частном магазине",parent:"54bae39fa868bc6fab4bcc18",__v:0,id:"54bae3a0a868bc6fab4bcc1e"},{_id:"54bae39fa868bc6fab4bcc17",name:"детский труд",parent:"54bae39da868bc6fab4bcc0f",__v:0,id:"54bae39fa868bc6fab4bcc17"},{_id:"54bae2dda868bc6fab4bcc05",name:"трудоемкость",parent:"54bae2dda868bc6fab4bcc04",__v:0,id:"54bae2dda868bc6fab4bcc05"},{_id:"54bae3a0a868bc6fab4bcc21",name:"условия труда",parent:"54bae39fa868bc6fab4bcc18",__v:0,id:"54bae3a0a868bc6fab4bcc21"},{_id:"54bae39ea868bc6fab4bcc12",name:"вольнонаёмные",parent:"54bae39da868bc6fab4bcc0f",__v:0,id:"54bae39ea868bc6fab4bcc12"},{_id:"54bae40ca868bc6fab4bcc26",name:"церковная",parent:"54bae40ca868bc6fab4bcc25",__v:0,id:"54bae40ca868bc6fab4bcc26"},{_id:"54bae323a868bc6fab4bcc0c",name:"Саботаж",parent:"54bae0f5a868bc91280a8329",__v:0,id:"54bae323a868bc6fab4bcc0c"},{_id:"54bae39fa868bc6fab4bcc18",name:"Частный сектор",parent:"54bae0f5a868bc91280a8328",__v:0,id:"54bae39fa868bc6fab4bcc18"},{_id:"54bae40ba868bc6fab4bcc23",name:"Иное",parent:"54bae0f5a868bc91280a8328",__v:0,id:"54bae40ba868bc6fab4bcc23"},{_id:"54bae40ca868bc6fab4bcc28",name:"Детский дом",parent:"54bae40ba868bc6fab4bcc23",__v:0,id:"54bae40ca868bc6fab4bcc28"},{_id:"54bae39ea868bc6fab4bcc16",name:"саботаж",parent:"54bae39da868bc6fab4bcc0f",__v:0,id:"54bae39ea868bc6fab4bcc16"},{_id:"54bae322a868bc6fab4bcc07",name:"штрафная команда",parent:"54bae0f5a868bc91280a8329",__v:0,id:"54bae322a868bc6fab4bcc07"},{_id:"54bae40ca868bc6fab4bcc27",name:"госпиталь",parent:"54bae40ca868bc6fab4bcc25",__v:0,id:"54bae40ca868bc6fab4bcc27"},{_id:"54bae3a1a868bc6fab4bcc22",name:"зарплата",parent:"54bae3a0a868bc6fab4bcc21",__v:0,id:"54bae3a1a868bc6fab4bcc22"},{_id:"54bae40da868bc6fab4bcc2b",name:"Разведка",parent:"54bae40ba868bc6fab4bcc23",__v:0,id:"54bae40da868bc6fab4bcc2b"},{_id:"54bae40da868bc6fab4bcc2c",name:"гестапо, уборщик",parent:"54bae40ba868bc6fab4bcc23",__v:0,id:"54bae40da868bc6fab4bcc2c"},{_id:"54bae40da868bc6fab4bcc2a",name:"Бани",parent:"54bae40ba868bc6fab4bcc23",__v:0,id:"54bae40da868bc6fab4bcc2a"},{_id:"54bae40ea868bc6fab4bcc2f",name:"осушение болот",parent:"54bae40ba868bc6fab4bcc23",__v:0,id:"54bae40ea868bc6fab4bcc2f"},{_id:"54bae40ca868bc6fab4bcc25",name:"Больницы",parent:"54bae40ba868bc6fab4bcc23",__v:0,id:"54bae40ca868bc6fab4bcc25"},{_id:"54bae495a868bc6fab4bcc38",name:"другие дети",parent:"54bae494a868bc6fab4bcc36",__v:0,id:"54bae495a868bc6fab4bcc38"},{_id:"54bae496a868bc6fab4bcc3d",name:"Администрация",parent:"54bae496a868bc6fab4bcc3c",__v:0,id:"54bae496a868bc6fab4bcc3d"},{_id:"54bae498a868bc6fab4bcc47",name:"Дезинфекция",parent:"54bae497a868bc6fab4bcc44",__v:0,id:"54bae498a868bc6fab4bcc47"},{_id:"54bae493a868bc6fab4bcc31",name:"Сборный лагерь",parent:"54bae493a868bc6fab4bcc30",__v:0,id:"54bae493a868bc6fab4bcc31"},{_id:"54bae495a868bc6fab4bcc3a",name:"побеги",parent:"54bae495a868bc6fab4bcc39",__v:0,id:"54bae495a868bc6fab4bcc3a"},{_id:"54bae496a868bc6fab4bcc3e",name:"Надзиратели",parent:"54bae496a868bc6fab4bcc3c",__v:0,id:"54bae496a868bc6fab4bcc3e"},{_id:"54bae497a868bc6fab4bcc43",name:"соседние лагеря",parent:"54bae496a868bc6fab4bcc40",__v:0,id:"54bae497a868bc6fab4bcc43"},{_id:"54bae494a868bc6fab4bcc33",name:"Биржа труда (как передают хозяевам по прибытии, бежали от хозяев и приходя на биржу труда)",parent:"54bae493a868bc6fab4bcc31",__v:0,id:"54bae494a868bc6fab4bcc33"},{_id:"54bae494a868bc6fab4bcc36",name:"Дети в лагере",parent:"54bae493a868bc6fab4bcc31",__v:0,id:"54bae494a868bc6fab4bcc36"},{_id:"54bae498a868bc6fab4bcc48",name:"Повседневность:",parent:"54bae495a868bc6fab4bcc3b",__v:0,id:"54bae498a868bc6fab4bcc48"},{_id:"54bae49aa868bc6fab4bcc50",name:"Несоблюдение режима (самоволки, хождение без винкеля и прочие непротестные для выживания нарушения или намерения к тому)",parent:"54bae498a868bc6fab4bcc48",__v:0,id:"54bae49aa868bc6fab4bcc50"},{_id:"54bae499a868bc6fab4bcc4e",name:"Обмен",parent:"54bae498a868bc6fab4bcc48",__v:0,id:"54bae499a868bc6fab4bcc4e"},{_id:"54bae498a868bc6fab4bcc49",name:"Одежда, обувь",parent:"54bae498a868bc6fab4bcc48",__v:0,id:"54bae498a868bc6fab4bcc49"},{_id:"54bae496a868bc6fab4bcc3f",name:"Вольнонаёмные",parent:"54bae496a868bc6fab4bcc3c",__v:0,id:"54bae496a868bc6fab4bcc3f"},{_id:"54bae495a868bc6fab4bcc39",name:"Сопротивление",parent:"54bae493a868bc6fab4bcc31",__v:0,id:"54bae495a868bc6fab4bcc39"},{_id:"54bae49ca868bc6fab4bcc5a",name:"землячества",parent:"54bae49ba868bc6fab4bcc57",__v:0,id:"54bae49ca868bc6fab4bcc5a"},{_id:"54bae49aa868bc6fab4bcc53",name:"игра в карты",parent:"54bae49aa868bc6fab4bcc52",__v:0,id:"54bae49aa868bc6fab4bcc53"},{_id:"54bae498a868bc6fab4bcc4a",name:"Питание",parent:"54bae498a868bc6fab4bcc48",__v:0,id:"54bae498a868bc6fab4bcc4a"},{_id:"54bae49ca868bc6fab4bcc5d",name:'иерархия заключенных (капо, штубовые, старосты, старшие по бараку, блоковые , разница в режимах содержания, категории по винкелями с конкретными правами, "дно")',parent:"54bae49ba868bc6fab4bcc57",__v:0,id:"54bae49ca868bc6fab4bcc5d"},{_id:"54bae49da868bc6fab4bcc62",name:"сербы (югославы)",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae49da868bc6fab4bcc62"},{_id:"54bae49ea868bc6fab4bcc65",name:"поляки",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae49ea868bc6fab4bcc65"},{_id:"54bae49ea868bc6fab4bcc67",name:"украинцы",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae49ea868bc6fab4bcc67"},{_id:"54bae49aa868bc6fab4bcc54",name:"смена фамилии",parent:"54bae49aa868bc6fab4bcc52",__v:0,id:"54bae49aa868bc6fab4bcc54"},{_id:"54bae49da868bc6fab4bcc60",name:"чехи",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae49da868bc6fab4bcc60"},{_id:"54bae49fa868bc6fab4bcc6a",name:"армяне",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae49fa868bc6fab4bcc6a"},{_id:"54bae49ea868bc6fab4bcc63",name:"англичане",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae49ea868bc6fab4bcc63"},{_id:"54bae4a1a868bc6fab4bcc72",name:"Дети в лагере",parent:"54bae495a868bc6fab4bcc3b",__v:0,id:"54bae4a1a868bc6fab4bcc72"},{_id:"54bae4a0a868bc6fab4bcc6f",name:"бельгийцы",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae4a0a868bc6fab4bcc6f"},{_id:"54bae4a0a868bc6fab4bcc6d",name:"туркмены",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae4a0a868bc6fab4bcc6d"},{_id:"54bae498a868bc6fab4bcc46",name:"Сортировка",parent:"54bae497a868bc6fab4bcc44",__v:0,id:"54bae498a868bc6fab4bcc46"},{_id:"54bae4a3a868bc6fab4bcc7c",name:"Наказания",parent:"54bae495a868bc6fab4bcc3b",__v:0,id:"54bae4a3a868bc6fab4bcc7c"},{_id:"54bae4a2a868bc6fab4bcc77",name:"общие болезни",parent:"54bae4a2a868bc6fab4bcc75",__v:0,id:"54bae4a2a868bc6fab4bcc77"},{_id:"54bae49ea868bc6fab4bcc66",name:"евреи",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae49ea868bc6fab4bcc66"},{_id:"54bae4a0a868bc6fab4bcc6c",name:"белорусы",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae4a0a868bc6fab4bcc6c"},{_id:"54bae49fa868bc6fab4bcc6b",name:"хорваты",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae49fa868bc6fab4bcc6b"},{_id:"54bae4a4a868bc6fab4bcc81",name:"Сопротивление:",parent:"54bae495a868bc6fab4bcc3b",__v:0,id:"54bae4a4a868bc6fab4bcc81"},{_id:"54bae4a3a868bc6fab4bcc7b",name:"Смерть и похороны",parent:"54bae495a868bc6fab4bcc3b",__v:0,id:"54bae4a3a868bc6fab4bcc7b"},{_id:"54bae49da868bc6fab4bcc61",name:"словаки",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae49da868bc6fab4bcc61"},{_id:"54bae49ca868bc6fab4bcc5b",name:"взаимопомощь",parent:"54bae49ba868bc6fab4bcc57",__v:0,id:"54bae49ca868bc6fab4bcc5b"},{_id:"54bae4a2a868bc6fab4bcc76",name:"гинекология",parent:"54bae4a2a868bc6fab4bcc75",__v:0,id:"54bae4a2a868bc6fab4bcc76"},{_id:"54bae4a6a868bc6fab4bcc86",name:"Повседневность",parent:"54bae4a5a868bc6fab4bcc85",__v:0,id:"54bae4a6a868bc6fab4bcc86"},{_id:"54bae4a7a868bc6fab4bcc8c",name:"Болезни, медицина",parent:"54bae4a5a868bc6fab4bcc85",__v:0,id:"54bae4a7a868bc6fab4bcc8c"},{_id:"54bae49ea868bc6fab4bcc64",name:"французы",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae49ea868bc6fab4bcc64"},{_id:"54bae49fa868bc6fab4bcc69",name:"цыгане",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae49fa868bc6fab4bcc69"},{_id:"54bae4a0a868bc6fab4bcc6e",name:"татары",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae4a0a868bc6fab4bcc6e"},{_id:"54bae4a0a868bc6fab4bcc70",name:"голландцы",parent:"54bae49ca868bc6fab4bcc5e",__v:0,id:"54bae4a0a868bc6fab4bcc70"},{_id:"54bae4a2a868bc6fab4bcc75",name:"Болезни, медицина",parent:"54bae495a868bc6fab4bcc3b",__v:0,id:"54bae4a2a868bc6fab4bcc75"},{_id:"54bae4a3a868bc6fab4bcc7a",name:"беременность",parent:"54bae4a2a868bc6fab4bcc75",__v:0,id:"54bae4a3a868bc6fab4bcc7a"},{_id:"54bae4aaa868bc6fab4bcc96",name:"Одежда, обувь",parent:"54bae4a9a868bc6fab4bcc95",__v:0,id:"54bae4aaa868bc6fab4bcc96"},{_id:"54bae4a4a868bc6fab4bcc80",name:"Публичный дом",parent:"54bae495a868bc6fab4bcc3b",__v:0,id:"54bae4a4a868bc6fab4bcc80"},{_id:"54bae4a8a868bc6fab4bcc8e",name:"Хозяева",parent:"54bae4a7a868bc6fab4bcc8d",__v:0,id:"54bae4a8a868bc6fab4bcc8e"},{_id:"54bae4a7a868bc6fab4bcc89",name:"питание",parent:"54bae4a6a868bc6fab4bcc86",__v:0,id:"54bae4a7a868bc6fab4bcc89"},{_id:"54bae4a6a868bc6fab4bcc87",name:"одежда, обувь",parent:"54bae4a6a868bc6fab4bcc86",__v:0,id:"54bae4a6a868bc6fab4bcc87"},{_id:"54bae4a1a868bc6fab4bcc74",name:"другие дети",parent:"54bae4a1a868bc6fab4bcc72",__v:0,id:"54bae4a1a868bc6fab4bcc74"},{_id:"54bae4a5a868bc6fab4bcc82",name:"побеги",parent:"54bae4a4a868bc6fab4bcc81",__v:0,id:"54bae4a5a868bc6fab4bcc82"},{_id:"54bae4a2a868bc6fab4bcc78",name:"травматология",parent:"54bae4a2a868bc6fab4bcc75",__v:0,id:"54bae4a2a868bc6fab4bcc78"},{_id:"54bae4a7a868bc6fab4bcc8d",name:"Проживание в частном с/х секторе / Проживание в частном секторе (прислуга у врача - ID35); вообще в частном секторе, в т.ч. в городе (ID14)",parent:"54bae493a868bc6fab4bcc30",__v:0,id:"54bae4a7a868bc6fab4bcc8d"},{_id:"54bae4aba868bc6fab4bcc9d",name:"Несоблюдение режима (самоволки, хождение без винкеля и прочие непротестные для выживания нарушения)",parent:"54bae4a9a868bc6fab4bcc95",__v:0,id:"54bae4aba868bc6fab4bcc9d"},{_id:"54bae4aba868bc6fab4bcc9b",name:"Обмен",parent:"54bae4a9a868bc6fab4bcc95",__v:0,id:"54bae4aba868bc6fab4bcc9b"},{_id:"54bae4b0a868bc6fab4bccaf",name:"сербы (югославы)",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4b0a868bc6fab4bccaf"},{_id:"54bae4b0a868bc6fab4bccad",name:"чехи",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4b0a868bc6fab4bccad"},{_id:"54bae4b1a868bc6fab4bccb4",name:"украинцы",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4b1a868bc6fab4bccb4"},{_id:"54bae4b2a868bc6fab4bccb8",name:"белорусы",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4b2a868bc6fab4bccb8"},{_id:"54bae4aea868bc6fab4bcca7",name:"землячества",parent:"54bae4ada868bc6fab4bcca4",__v:0,id:"54bae4aea868bc6fab4bcca7"},{_id:"54bae4b4a868bc6fab4bccbe",name:"другие дети",parent:"54bae4b4a868bc6fab4bccbc",__v:0,id:"54bae4b4a868bc6fab4bccbe"},{_id:"54bae4b1a868bc6fab4bccb1",name:"французы",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4b1a868bc6fab4bccb1"},{_id:"54bae4b2a868bc6fab4bccb6",name:"армяне",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4b2a868bc6fab4bccb6"},{_id:"54bae4b3a868bc6fab4bccbb",name:"русские",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4b3a868bc6fab4bccbb"},{_id:"54bae4aca868bc6fab4bcca0",name:"игра в карты",parent:"54bae4aca868bc6fab4bcc9f",__v:0,id:"54bae4aca868bc6fab4bcca0"},{_id:"54bae4b5a868bc6fab4bccc1",name:"общие болезни",parent:"54bae4b5a868bc6fab4bccbf",__v:0,id:"54bae4b5a868bc6fab4bccc1"},{_id:"54bae4b6a868bc6fab4bccc4",name:"Смерть и похороны",parent:"54bae4a7a868bc6fab4bcc8d",__v:0,id:"54bae4b6a868bc6fab4bccc4"},{_id:"54bae4b6a868bc6fab4bccc5",name:"Наказания",parent:"54bae4a7a868bc6fab4bcc8d",__v:0,id:"54bae4b6a868bc6fab4bccc5"},{_id:"54bae4b1a868bc6fab4bccb3",name:"евреи",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4b1a868bc6fab4bccb3"},{_id:"54bae4b3a868bc6fab4bccb9",name:"туркмены",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4b3a868bc6fab4bccb9"},{_id:"54bae4b0a868bc6fab4bccae",name:"словаки",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4b0a868bc6fab4bccae"},{_id:"54bae4a9a868bc6fab4bcc95",name:"Повседневность",parent:"54bae4a7a868bc6fab4bcc8d",__v:0,id:"54bae4a9a868bc6fab4bcc95"},{_id:"54bae4b5a868bc6fab4bccc2",name:"травматология",parent:"54bae4b5a868bc6fab4bccbf",__v:0,id:"54bae4b5a868bc6fab4bccc2"},{_id:"54bae4aca868bc6fab4bcca1",name:"смена фамилии",parent:"54bae4aca868bc6fab4bcc9f",__v:0,id:"54bae4aca868bc6fab4bcca1"},{_id:"54bae4afa868bc6fab4bccaa",name:'иерархия заключенных (капо, штубовые, старосты, старшие по бараку, блоковые , разница в режимах содержания, категории по винкелями с конкретными правами, "дно")',parent:"54bae4ada868bc6fab4bcca4",__v:0,id:"54bae4afa868bc6fab4bccaa"},{_id:"54bae4b0a868bc6fab4bccb0",name:"англичане",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4b0a868bc6fab4bccb0"},{_id:"54bae4aea868bc6fab4bcca8",name:"взаимопомощь",parent:"54bae4ada868bc6fab4bcca4",__v:0,id:"54bae4aea868bc6fab4bcca8"},{_id:"54bae4ada868bc6fab4bcca3",name:"причёска",parent:"54bae4aca868bc6fab4bcc9f",__v:0,id:"54bae4ada868bc6fab4bcca3"},{_id:"54bae4b8a868bc6fab4bcccb",name:"побеги",parent:"54bae4b8a868bc6fab4bccca",__v:0,id:"54bae4b8a868bc6fab4bcccb"},{_id:"54bae4b2a868bc6fab4bccb5",name:"цыгане",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4b2a868bc6fab4bccb5"},{_id:"54bae4b3a868bc6fab4bccba",name:"татары",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4b3a868bc6fab4bccba"},{_id:"54bae4bba868bc6fab4bccd4",name:"Надзиратели",parent:"54bae4baa868bc6fab4bccd2",__v:0,id:"54bae4bba868bc6fab4bccd4"},{_id:"54bae4b7a868bc6fab4bccc9",name:"Публичный дом",parent:"54bae4a7a868bc6fab4bcc8d",__v:0,id:"54bae4b7a868bc6fab4bccc9"},{_id:"54bae4b5a868bc6fab4bccbf",name:"Болезни, медицина",parent:"54bae4a7a868bc6fab4bcc8d",__v:0,id:"54bae4b5a868bc6fab4bccbf"},{_id:"54bae4baa868bc6fab4bccd3",name:"Администрация",parent:"54bae4baa868bc6fab4bccd2",__v:0,id:"54bae4baa868bc6fab4bccd3"},{_id:"54bae4bca868bc6fab4bccd9",name:"соседние лагеря",parent:"54bae4bba868bc6fab4bccd6",__v:0,id:"54bae4bca868bc6fab4bccd9"},{_id:"54bae4baa868bc6fab4bccd1",name:"Штрафные лагеря",parent:"54bae493a868bc6fab4bcc30",__v:0,id:"54bae4baa868bc6fab4bccd1"},{_id:"54bae4bda868bc6fab4bccdd",name:"Дезинфекция",parent:"54bae4bda868bc6fab4bccda",__v:0,id:"54bae4bda868bc6fab4bccdd"},{_id:"54bae4b2a868bc6fab4bccb7",name:"хорваты",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4b2a868bc6fab4bccb7"},{_id:"54bae4b1a868bc6fab4bccb2",name:"поляки",parent:"54bae4afa868bc6fab4bccab",__v:0,id:"54bae4b1a868bc6fab4bccb2"},{_id:"54bae4b8a868bc6fab4bccca",name:"Сопротивление:",parent:"54bae4a7a868bc6fab4bcc8d",__v:0,id:"54bae4b8a868bc6fab4bccca"},{_id:"54bae4b5a868bc6fab4bccc0",name:"гинекология",parent:"54bae4b5a868bc6fab4bccbf",__v:0,id:"54bae4b5a868bc6fab4bccc0"},{_id:"54bae4bba868bc6fab4bccd5",name:"Вольнонаёмные",parent:"54bae4baa868bc6fab4bccd2",__v:0,id:"54bae4bba868bc6fab4bccd5"},{_id:"54bae4baa868bc6fab4bccd0",name:"казни",parent:"54bae4b9a868bc6fab4bcccf",__v:0,id:"54bae4baa868bc6fab4bccd0"},{_id:"54bae4bda868bc6fab4bccdc",name:"Сортировка",parent:"54bae4bda868bc6fab4bccda",__v:0,id:"54bae4bda868bc6fab4bccdc"},{_id:"54bae4bea868bc6fab4bccdf",name:"Одежда, обувь",parent:"54bae4bea868bc6fab4bccde",__v:0,id:"54bae4bea868bc6fab4bccdf"},{_id:"54bae4bea868bc6fab4bccde",name:"Повседневность:",parent:"54bae4baa868bc6fab4bccd1",__v:0,id:"54bae4bea868bc6fab4bccde"},{_id:"54bae4c0a868bc6fab4bcce4",name:"Обмен",parent:"54bae4bea868bc6fab4bccde",__v:0,id:"54bae4c0a868bc6fab4bcce4"},{_id:"54bae4c1a868bc6fab4bcce9",name:"игра в карты",parent:"54bae4c1a868bc6fab4bcce8",__v:0,id:"54bae4c1a868bc6fab4bcce9"},{_id:"54bae4c2a868bc6fab4bccea",name:"смена фамилии",parent:"54bae4c1a868bc6fab4bcce8",__v:0,id:"54bae4c2a868bc6fab4bccea"},{_id:"54bae4c0a868bc6fab4bcce6",name:"Несоблюдение режима (самоволки, хождение без винкеля и прочие непротестные для выживания нарушения)",parent:"54bae4bea868bc6fab4bccde",__v:0,id:"54bae4c0a868bc6fab4bcce6"},{_id:"54bae4c4a868bc6fab4bccf1",name:"взаимопомощь",parent:"54bae4c3a868bc6fab4bcced",__v:0,id:"54bae4c4a868bc6fab4bccf1"},{_id:"54bae4c6a868bc6fab4bccf9",name:"англичане",parent:"54bae4c5a868bc6fab4bccf4",__v:0,id:"54bae4c6a868bc6fab4bccf9"},{_id:"54bae4c6a868bc6fab4bccf7",name:"словаки",parent:"54bae4c5a868bc6fab4bccf4",__v:0,id:"54bae4c6a868bc6fab4bccf7"},{_id:"54bae4c7a868bc6fab4bccfc",name:"евреи",parent:"54bae4c5a868bc6fab4bccf4",__v:0,id:"54bae4c7a868bc6fab4bccfc"},{_id:"54bae4c8a868bc6fab4bccfe",name:"цыгане",parent:"54bae4c5a868bc6fab4bccf4",__v:0,id:"54bae4c8a868bc6fab4bccfe"},{_id:"54bae4c5a868bc6fab4bccf6",name:"чехи",parent:"54bae4c5a868bc6fab4bccf4",__v:0,id:"54bae4c5a868bc6fab4bccf6"},{_id:"54bae4c7a868bc6fab4bccfa",name:"французы",parent:"54bae4c5a868bc6fab4bccf4",__v:0,id:"54bae4c7a868bc6fab4bccfa"},{_id:"54bae4cda868bc6fab4bcd0d",name:"Наказания",parent:"54bae4baa868bc6fab4bccd1",__v:0,id:"54bae4cda868bc6fab4bcd0d"},{_id:"54bae4c8a868bc6fab4bccfd",name:"украинцы",parent:"54bae4c5a868bc6fab4bccf4",__v:0,id:"54bae4c8a868bc6fab4bccfd"},{_id:"54bae4cba868bc6fab4bcd08",name:"гинекология",parent:"54bae4cba868bc6fab4bcd07",__v:0,id:"54bae4cba868bc6fab4bcd08"},{_id:"54bae4c4a868bc6fab4bccf3",name:'иерархия заключенных (капо, штубовые, старосты, старшие по бараку, блоковые , разница в режимах содержания, категории по винкелями с конкретными правами, "дно")',parent:"54bae4c3a868bc6fab4bcced",__v:0,id:"54bae4c4a868bc6fab4bccf3"},{_id:"54bae4c6a868bc6fab4bccf8",name:"сербы (югославы)",parent:"54bae4c5a868bc6fab4bccf4",__v:0,id:"54bae4c6a868bc6fab4bccf8"},{_id:"54bae4c9a868bc6fab4bcd00",name:"хорваты",parent:"54bae4c5a868bc6fab4bccf4",__v:0,id:"54bae4c9a868bc6fab4bcd00"},{_id:"54bae4cca868bc6fab4bcd09",name:"общие болезни",parent:"54bae4cba868bc6fab4bcd07",__v:0,id:"54bae4cca868bc6fab4bcd09"},{_id:"54bae4caa868bc6fab4bcd03",name:"татары",parent:"54bae4c5a868bc6fab4bccf4",__v:0,id:"54bae4caa868bc6fab4bcd03"},{_id:"54bae4cca868bc6fab4bcd0a",name:"травматология",parent:"54bae4cba868bc6fab4bcd07",__v:0,id:"54bae4cca868bc6fab4bcd0a"},{_id:"54bae4cba868bc6fab4bcd07",name:"Болезни, медицина",parent:"54bae4baa868bc6fab4bccd1",__v:0,id:"54bae4cba868bc6fab4bcd07"},{_id:"54bae4cba868bc6fab4bcd06",name:"другие дети",parent:"54bae4caa868bc6fab4bcd04",__v:0,id:"54bae4cba868bc6fab4bcd06"},{_id:"54bae4cfa868bc6fab4bcd13",name:"побеги",parent:"54bae4cea868bc6fab4bcd12",__v:0,id:"54bae4cfa868bc6fab4bcd13"},{_id:"54bae4c4a868bc6fab4bccf0",name:"землячества",parent:"54bae4c3a868bc6fab4bcced",__v:0,id:"54bae4c4a868bc6fab4bccf0"},{_id:"54bae4c7a868bc6fab4bccfb",name:"поляки",parent:"54bae4c5a868bc6fab4bccf4",__v:0,id:"54bae4c7a868bc6fab4bccfb"},{_id:"54bae4c9a868bc6fab4bcd01",name:"белорусы",parent:"54bae4c5a868bc6fab4bccf4",__v:0,id:"54bae4c9a868bc6fab4bcd01"},{_id:"54bae4c8a868bc6fab4bccff",name:"армяне",parent:"54bae4c5a868bc6fab4bccf4",__v:0,id:"54bae4c8a868bc6fab4bccff"},{_id:"54bae4d1a868bc6fab4bcd19",name:"армейские сборные пункты /Armeekriegsgefangenensammelstelle и фроншталаги / Frontstammlager (крупные лагеря фронотового уровня)",parent:"54bae4d0a868bc6fab4bcd17",__v:0,id:"54bae4d1a868bc6fab4bcd19"},{_id:"54bae4caa868bc6fab4bcd04",name:"Дети в лагере",parent:"54bae4baa868bc6fab4bccd1",__v:0,id:"54bae4caa868bc6fab4bcd04"},{_id:"54bae4cea868bc6fab4bcd12",name:"Сопротивление:",parent:"54bae4baa868bc6fab4bccd1",__v:0,id:"54bae4cea868bc6fab4bcd12"},{_id:"54bae4cea868bc6fab4bcd11",name:"Публичный дом",parent:"54bae4baa868bc6fab4bccd1",__v:0,id:"54bae4cea868bc6fab4bcd11"},{_id:"54bae4d4a868bc6fab4bcd22",name:"Иные",parent:"54bae4d0a868bc6fab4bcd17",__v:0,id:"54bae4d4a868bc6fab4bcd22"},{_id:"54bae4d2a868bc6fab4bcd1c",name:"Шталаг / Stammlager — для рядовых и нижних чинов (из шталагов военнопленные могли переводиться в рабочие лагеря или в штрафные лагеря)",parent:"54bae4d0a868bc6fab4bcd17",__v:0,id:"54bae4d2a868bc6fab4bcd1c"},{_id:"54bae4d0a868bc6fab4bcd17",name:"тип лагеря",parent:"54bae4d0a868bc6fab4bcd16",__v:0,id:"54bae4d0a868bc6fab4bcd17"},{_id:"54bae4c9a868bc6fab4bcd02",name:"туркмены",parent:"54bae4c5a868bc6fab4bccf4",__v:0,id:"54bae4c9a868bc6fab4bcd02"},{_id:"54bae4d4a868bc6fab4bcd23",name:"образовательный",parent:"54bae4d4a868bc6fab4bcd22",__v:0,id:"54bae4d4a868bc6fab4bcd23"},{_id:"54bae4cca868bc6fab4bcd0c",name:"Смерть и похороны",parent:"54bae4baa868bc6fab4bccd1",__v:0,id:"54bae4cca868bc6fab4bcd0c"},{_id:"54bae4d6a868bc6fab4bcd27",name:"Надзиратели",parent:"54bae4d5a868bc6fab4bcd25",__v:0,id:"54bae4d6a868bc6fab4bcd27"},{_id:"54bae4d1a868bc6fab4bcd1a",name:"дулаг / Durchgangslager — транзитный (пересыльный) (фильтрация по признакам национальности, профессии, степени лояльности)",parent:"54bae4d0a868bc6fab4bcd17",__v:0,id:"54bae4d1a868bc6fab4bcd1a"},{_id:"54bae4daa868bc6fab4bcd32",name:"Одежда, обувь",parent:"54bae4d9a868bc6fab4bcd31",__v:0,id:"54bae4daa868bc6fab4bcd32"},{_id:"54bae4d9a868bc6fab4bcd30",name:"Дезинфекция",parent:"54bae4d8a868bc6fab4bcd2d",__v:0,id:"54bae4d9a868bc6fab4bcd30"},{_id:"54bae4d8a868bc6fab4bcd2f",name:"Сортировка",parent:"54bae4d8a868bc6fab4bcd2d",__v:0,id:"54bae4d8a868bc6fab4bcd2f"},{_id:"54bae4dda868bc6fab4bcd3c",name:"игра в карты",parent:"54bae4dda868bc6fab4bcd3b",__v:0,id:"54bae4dda868bc6fab4bcd3c"},{_id:"54bae4d5a868bc6fab4bcd26",name:"Администрация",parent:"54bae4d5a868bc6fab4bcd25",__v:0,id:"54bae4d5a868bc6fab4bcd26"},{_id:"54bae4d7a868bc6fab4bcd2c",name:"соседние лагеря",parent:"54bae4d6a868bc6fab4bcd29",__v:0,id:"54bae4d7a868bc6fab4bcd2c"},{_id:"54bae4d9a868bc6fab4bcd31",name:"Повседневность:",parent:"54bae4d0a868bc6fab4bcd16",__v:0,id:"54bae4d9a868bc6fab4bcd31"},{_id:"54bae4dba868bc6fab4bcd37",name:"Обмен",parent:"54bae4d9a868bc6fab4bcd31",__v:0,id:"54bae4dba868bc6fab4bcd37"},{_id:"54bae4e0a868bc6fab4bcd45",name:"взаимопомощь",parent:"54bae4dfa868bc6fab4bcd41",__v:0,id:"54bae4e0a868bc6fab4bcd45"},{_id:"54bae4e5a868bc6fab4bcd51",name:"украинцы",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e5a868bc6fab4bcd51"},{_id:"54bae4d6a868bc6fab4bcd28",name:"Вольнонаёмные",parent:"54bae4d5a868bc6fab4bcd25",__v:0,id:"54bae4d6a868bc6fab4bcd28"},{_id:"54bae4dea868bc6fab4bcd40",name:"оркестр",parent:"54bae4dea868bc6fab4bcd3f",__v:0,id:"54bae4dea868bc6fab4bcd40"},{_id:"54bae4e0a868bc6fab4bcd44",name:"землячества",parent:"54bae4dfa868bc6fab4bcd41",__v:0,id:"54bae4e0a868bc6fab4bcd44"},{_id:"54bae4dda868bc6fab4bcd3d",name:"смена фамилии",parent:"54bae4dda868bc6fab4bcd3b",__v:0,id:"54bae4dda868bc6fab4bcd3d"},{_id:"54bae4e2a868bc6fab4bcd4a",name:"чехи",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e2a868bc6fab4bcd4a"},{_id:"54bae4e3a868bc6fab4bcd4c",name:"сербы (югославы)",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e3a868bc6fab4bcd4c"},{_id:"54bae4e4a868bc6fab4bcd4f",name:"поляки",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e4a868bc6fab4bcd4f"},{_id:"54bae4e6a868bc6fab4bcd54",name:"хорваты",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e6a868bc6fab4bcd54"},{_id:"54bae4e9a868bc6fab4bcd5b",name:"грузины",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e9a868bc6fab4bcd5b"},{_id:"54bae4e7a868bc6fab4bcd56",name:"туркмены",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e7a868bc6fab4bcd56"},{_id:"54bae4e6a868bc6fab4bcd53",name:"армяне",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e6a868bc6fab4bcd53"},{_id:"54bae4eaa868bc6fab4bcd5e",name:"другие дети",parent:"54bae4e9a868bc6fab4bcd5c",__v:0,id:"54bae4eaa868bc6fab4bcd5e"},{_id:"54bae4e7a868bc6fab4bcd55",name:"белорусы",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e7a868bc6fab4bcd55"},{_id:"54bae4e5a868bc6fab4bcd50",name:"евреи",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e5a868bc6fab4bcd50"},{_id:"54bae4e8a868bc6fab4bcd59",name:"бельгийцы",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e8a868bc6fab4bcd59"},{_id:"54bae4eaa868bc6fab4bcd5f",name:"Болезни, медицина",parent:"54bae4d0a868bc6fab4bcd16",__v:0,id:"54bae4eaa868bc6fab4bcd5f"},{_id:"54bae4eba868bc6fab4bcd60",name:"гинекология",parent:"54bae4eaa868bc6fab4bcd5f",__v:0,id:"54bae4eba868bc6fab4bcd60"},{_id:"54bae4e3a868bc6fab4bcd4b",name:"словаки",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e3a868bc6fab4bcd4b"},{_id:"54bae4e8a868bc6fab4bcd58",name:"итальянцы",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e8a868bc6fab4bcd58"},{_id:"54bae4e3a868bc6fab4bcd4d",name:"англичане",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e3a868bc6fab4bcd4d"},{_id:"54bae4e8a868bc6fab4bcd5a",name:"голландцы",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e8a868bc6fab4bcd5a"},{_id:"54bae4e4a868bc6fab4bcd4e",name:"французы",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e4a868bc6fab4bcd4e"},{_id:"54bae4eca868bc6fab4bcd62",name:"травматология",parent:"54bae4eaa868bc6fab4bcd5f",__v:0,id:"54bae4eca868bc6fab4bcd62"},{_id:"54bae4e5a868bc6fab4bcd52",name:"цыгане",parent:"54bae4e1a868bc6fab4bcd48",__v:0,id:"54bae4e5a868bc6fab4bcd52"},{_id:"54c905c8451f2549eee4b310",name:"New Subject",parent:"",__v:0,id:"54c905c8451f2549eee4b310"},{_id:"54c90609451f25f4d943a04f",name:"bbbbb",parent:"",__v:0,id:"54c90609451f25f4d943a04f"},{_id:"54c906c7451f2503304dddaf",name:"aaaadf",parent:"54c90609451f25f4d943a04f",__v:0,id:"54c906c7451f2503304dddaf"},{_id:"54c9116c972f4f931205ff32",name:"New Subject",parent:"54c906c7451f2503304dddaf",__v:0,id:"54c9116c972f4f931205ff32"},{_id:"54c91201972f4f931205ff33",name:"New Subject",parent:"54c905c8451f2549eee4b310",__v:0,id:"54c91201972f4f931205ff33"},{_id:"54c91221972f4f931205ff34",name:"New Subject",parent:"54c91201972f4f931205ff33",__v:0,id:"54c91221972f4f931205ff34"},{_id:"54c91238972f4f931205ff35",name:"New Subject",parent:"54c91201972f4f931205ff33",__v:0,id:"54c91238972f4f931205ff35"},{_id:"54c9125a451f25d0ccdb81ae",name:"New Subject",parent:"54c91221972f4f931205ff34",__v:0,id:"54c9125a451f25d0ccdb81ae"},{_id:"54c913ad451f25aa8fabccd3",name:"New Subject",parent:"54c91201972f4f931205ff33",__v:0,id:"54c913ad451f25aa8fabccd3"},{_id:"54c913cd451f25ff41364739",name:"New Subject",parent:"54c91221972f4f931205ff34",__v:0,id:"54c913cd451f25ff41364739"},{_id:"54c91404451f25150fe9c439",name:"klasdjfadsf",parent:"54c91221972f4f931205ff34",__v:0,id:"54c91404451f25150fe9c439"},{_id:"54b8f267a868bc4fd8ca4a49",name:"Довоенный период",description:"",parent:"",__v:0,id:"54b8f267a868bc4fd8ca4a49"},{_id:"54ce8847aca33cdb82a05e0a",name:"Организация повседневной жизни",parent:"54bae9e6a868bc3ec7fb5ae6",__v:0,id:"54ce8847aca33cdb82a05e0a"},{_id:"54ce885caca33cdb82a05e0b",name:"Сельская местность",parent:"54ce8847aca33cdb82a05e0a",__v:0,id:"54ce885caca33cdb82a05e0b"},{_id:"54d8aab4a868bc0e08306a67",name:"New Subject 5",parent:"",__v:0,id:"54d8aab4a868bc0e08306a67"},{_id:"550035582c1b8368cc1ab2cf",name:"New Subject",parent:"",__v:0,id:"550035582c1b8368cc1ab2cf"},{_id:"550039d72c1b83e60cc36973",name:"New Subject",parent:"",__v:0,id:"550039d72c1b83e60cc36973"},{_id:"55003b5e2c1b8399f9323af4",name:"New Subject",parent:"",__v:0,id:"55003b5e2c1b8399f9323af4"},{_id:"55003b822c1b8399f9323af5",name:"New Subject",parent:"",__v:0,id:"55003b822c1b8399f9323af5"}],o=function(){};
o.Prototype=function(){this.getDocument=function(e,t){var a=new n(i);window.doc=a,t(null,a)},this.saveDocument=function(e,t){t(new Error("Saving not supported in dev mode"))},this.getEntities=function(e,t){var n=a.filter(c,function(t){return a.includes(e,t.id)});t(null,n)},this.getSuggestedEntities=function(e){e(null,r)},this.searchEntities=function(e,t,a){a(null,s)},this.getSubjects=function(e){e(null,b)}},a.initClass(o),t.exports=o},{"../data/sample_doc":2,"./interview":195,substance:110,"substance/helpers":109}],215:[function(e,t){"use strict";var a=e("substance"),n=function(){n.super.call(this),this.messages=[]};n.Prototype=function(){this.addMessage=function(e){this.messages.push(e),this.emit("messages:updated",this.messages)},this.log=function(e){this.addMessage({type:"info",message:e})},this.error=function(e){this.addMessage({type:"error",message:e})},this.warn=this.log,this.info=this.log,this.clearMessages=function(){this.messages=[],this.emit("messages:updated",this.messages)}},a.inherit(n,a.EventEmitter),t.exports=n},{substance:110}],216:[function(e,t){var a=e("substance"),n=React.createElement,i=a.Surface,c=e("substance/helpers"),r=(e("substance/writer").TextProperty,e("./title_editor")),s=["strong","emphasis","timecode","remark","entity_reference","subject_reference"],b=React.createClass({displayName:"ContentEditor",contextTypes:{componentFactory:React.PropTypes.object.isRequired,notifications:React.PropTypes.object.isRequired},childContextTypes:{surface:React.PropTypes.object},getChildContext:function(){return{surface:this.surface}},getInitialState:function(){var e=new i.ContainerEditor(this.props.doc.get("content"));e.defaultTextType="text";var t={logger:this.context.notifications};return this.surface=new i(e,t),{}},handleToggleSubjectReference:function(e){e.preventDefault();var t=e.currentTarget.dataset.id,a=this.props.writerCtrl,n=a.state;a.replaceState("editSubjectReference"===n.contextId&&n.subjectReferenceId===t?{contextId:"subjects"}:{contextId:"editSubjectReference",subjectReferenceId:t})},render:function(){var e=this.props.node,t=this.props.doc,a=this.props.writerCtrl,i=t.getIndex("type").get("subject_reference"),s=[],b=a.getActiveContainerAnnotations();c.each(i,function(e){s.push(n("a",{className:"subject-reference"+(c.includes(b,e.id)?" selected":""),href:"#","data-id":e.id,onClick:this.handleToggleSubjectReference}))},this);var o=this.context.componentFactory,d=[];return d=d.concat(e.nodes.map(function(e){var i=t.get(e),c=o.get(i.type);if(!c)throw new Error("Could not resolve a component for type: "+i.type);return n(c,{key:i.id,doc:t,node:i,writerCtrl:a})})),n("div",{className:"content-wrapper"},n(r,{writerCtrl:this.props.writerCtrl}),n("div",{ref:"interviewContent",className:"interview-content",contentEditable:!0,"data-id":"content"},n("div",{className:"container-node "+this.props.node.id,spellCheck:!1,"data-id":this.props.node.id},n("div",{className:"nodes"},d),n("div",{className:"subject-references",contentEditable:!1},s))))},updateBrackets:function(){var e=this.props.doc,t=e.getIndex("type").get("subject_reference");c.each(t,function(e){var t,a,n=$(this.getDOMNode()).find(".nodes .anchor[data-id="+e.id+"]");if($(n[0]).hasClass("start-anchor")?(t=n[0],a=n[1]):(t=n[1],a=n[0]),!t||!a)return void console.warn("FIXME: Could not find anchors for subject reference ",e.id);var i=$(t).position().top,c=$(a).position().top+$(a).height(),r=c-i,s=$(this.getDOMNode()).find(".subject-references .subject-reference[data-id="+e.id+"]");s.css({top:i,height:r})},this)},componentDidMount:function(){var e=this.surface,t=this.props.doc;t.connect(this,{"document:changed":this.onDocumentChange}),this.props.writerCtrl.registerSurface(e,"content",{enabledTools:s}),e.attach(this.refs.interviewContent.getDOMNode()),t.connect(this,{"container-annotation-update":this.handleContainerAnnotationUpdate});var a=this;this.forceUpdate(function(){a.updateBrackets(),c.delay(function(){a.updateBrackets()},100),a.surface.rerenderDomSelection()}),$(window).resize(this.updateBrackets)},handleContainerAnnotationUpdate:function(){var e=this;this.forceUpdate(function(){e.updateBrackets()})},componentDidUpdate:function(){if(!this.surface.__prerendering__){var e=this;setTimeout(function(){e.surface.rerenderDomSelection()})}},componentWillUnmount:function(){var e=this.surface,t=this.props.doc;t.disconnect(this),this.props.writerCtrl.unregisterSurface(e),e.detach()},onDocumentChange:function(e){var t=this.props.writerCtrl,a=c.filter(e.deleted,function(e){return"subject_reference"===e.type}),n=c.filter(e.created,function(e){return"subject_reference"===e.type}),i=a[0];if(i&&t.state.subjectReferenceId===i.id)return void t.replaceState({contextId:"subjects"});if(e.isAffected([this.props.node.id,"nodes"])||n.length>0){var r=this;this.forceUpdate(function(){r.updateBrackets()})}else this.updateBrackets()}});t.exports=b},{"./title_editor":220,substance:110,"substance/helpers":109,"substance/writer":192}],217:[function(e,t){"use strict";var a=e("./state_handlers"),n=e("./content_editor");t.exports={components:{container:n},name:"archivist",panels:[],stateHandlers:a,tools:[]}},{"./content_editor":216,"./state_handlers":219}],218:[function(e,t){var a=React.createElement,n={prison:"Prison",toponym:"Toponym",person:"Person",definition:"Definition"},i=React.createClass({displayName:"Entity",handleClick:function(e){e.preventDefault(),this.props.handleSelection(this.props.id)},render:function(){var e=["entity",this.props.type];this.props.active&&e.push("active");var t=[a("div",{className:"type"},n[this.props.type]),a("div",{className:"name"},this.props.name||this.props.title)];if(this.props.synonyms&&t.push(a("div",{className:"synonyms"},"Also known as: "+this.props.synonyms)),this.props.country&&t.push(a("div",{className:"country"},"Country: "+this.props.country)),"person"==this.props.type){var i=this.props.description;i.length>100&&(i=i.substring(0,100)+"..."),t.push(a("div",{className:"description"},i))}return a("div",{className:e.join(" "),onClick:this.handleClick},t)}}),c={contextTypes:{backend:React.PropTypes.object.isRequired},handleCancel:function(e){e.preventDefault(),console.log("props",this.props),this.props.writerCtrl.replaceState(this.props.entityReferenceId?{contextId:"showEntityReference",entityReferenceId:this.props.entityReferenceId}:{contextId:"entities"})},loadEntities:function(e){var t=this,a=this.context.backend;e?a.searchEntities(e,this.props.entityType,function(e,a){t.setState({state:a.state,entities:a.results})}):a.getSuggestedEntities(function(e,a){t.setState({state:a.state,entities:a.results})})},getInitialState:function(){return{searchString:this.props.searchString,entities:[]}},componentDidMount:function(){this.loadEntities(this.state.searchString)},handleSearchStringChange:function(e){var t=e.target.value;this.setState({searchString:t}),this.loadEntities(t)},render:function(){var e,t=this,n=this.state.entities,c=this.state.state;return e=n.length>0?n.map(function(e){return e.handleSelection=t.handleSelection,a(i,e)}):[a("div",{className:"no-results",text:"Loading suggestions"})],a("div",{className:"panel dialog tag-entity-panel-component"},a("div",{className:"dialog-header"},a("a",{href:"#",className:"back",onClick:this.handleCancel,dangerouslySetInnerHTML:{__html:'<i class="fa fa-chevron-left"></i>'}}),a("div",{className:"label"},"Select entity")),a("div",{className:"panel-content"},a("div",{className:"search",html:""},a("input",{className:"search-str",type:"text",placeholder:"Type to search for entities",value:this.state.searchString,onChange:this.handleSearchStringChange}),a("select",{className:"entity-type"},a("option",{value:""},"All"),a("option",{value:"location"},"Location"),a("option",{value:"person"},"Person"),a("option",{value:"definition"},"Definition"))),a("div",{className:"search-result-state"},a("span",{className:"state"},c),a("span",{className:"add-entity"},a("span",{className:"label"},"Add new: "),a("a",{href:"/prisons/add",target:"_blank"},a("i",{className:"fa fa-th"},"")),a("a",{href:"/toponyms/add",target:"_blank"},a("i",{className:"fa fa-globe"},"")),a("a",{href:"/definitions/add",target:"_blank"},a("i",{className:"fa fa-bookmark"},"")),a("a",{href:"/persons/add",target:"_blank"},a("i",{className:"fa fa-users"},"")))),a("div",{className:"entities"},e)))}};t.exports=c},{}],219:[function(e,t){var a=(React.createElement,{handleSelectionChange:function(e,t){var a=e.getSurface();if("content"===a.name&&!t.isNull()&&t.isCollapsed()){var n=e.doc.annotationIndex.get(t.getPath(),t.getStartOffset(),t.getEndOffset(),"reference");if(0===n.length&&"editSubjectReference"!==e.state.contextId){var i=e.state.contextId,c="entities";return("editSubjectReference"===i||"subjects"===i)&&(c="subjects"),e.replaceState({contextId:c}),!0}}}});t.exports=a},{}],220:[function(e,t){var a=React.createElement,n=e("substance"),i=n.Surface,c=e("substance/writer").TextProperty,r=React.createClass({displayName:"TitleEditor",childContextTypes:{surface:React.PropTypes.object},getChildContext:function(){return{surface:this.surface}},componentWillMount:function(){return this.surface=new i(new i.FormEditor(this.props.writerCtrl.doc)),{}},componentDidMount:function(){this.props.writerCtrl.registerSurface(this.surface,"title-editor"),this.surface.attach(this.getDOMNode())},componentWillUnmount:function(){this.props.writerCtrl.unregisterSurface(this.surface),this.surface.detach()},render:function(){this.state;return a("div",{className:"interview-title",contentEditable:!0,"data-id":"title-editor"},a(c,{doc:this.props.writerCtrl.doc,tagName:"div",className:"title",path:["document","title"],writerCtrl:this.props.writerCtrl}))}});t.exports=r},{substance:110,"substance/writer":192}],221:[function(e,t){var a=(e("substance"),React.createElement),n=e("./entity_types/prison"),i=e("./entity_types/toponym"),c=e("./entity_types/person"),r=e("./entity_types/definition"),s=e("substance/helpers"),b=React.createClass({displayName:"Entities",contextTypes:{backend:React.PropTypes.object.isRequired},getReferencedEntityIds:function(){var e=this.props.writerCtrl.doc,t=e.entityReferencesIndex.get();return s.map(t,function(e){return e.target})},loadEntities:function(){var e=this,t=this.context.backend,a=e.getReferencedEntityIds();t.getEntities(a,function(t,a){e.setState({entities:a})})},getInitialState:function(){return{entities:[]}},componentDidMount:function(){this.loadEntities()},componentWillReceiveProps:function(){this.loadEntities()},handleToggle:function(e){var t=this.props.writerCtrl;t.replaceState(t.state.entityId===e?{contextId:"entities"}:{contextId:"entities",entityId:e})},getEntityElement:function(e){if(e.handleToggle=this.handleToggle,"prison"===e.type)return a(n,e);if("toponym"===e.type)return a(i,e);if("person"===e.type)return a(c,e);if("definition"===e.type)return a(r,e);throw new Error("No view component for "+e.type)},render:function(){var e=this.state,t=this.props,n=this.getEntityElement,i=e.entities.map(function(e){return e.active=e.id===t.entityId,e.key=e.id,n(e)});return a("div",{className:"panel entities-panel-component"},a("div",{className:"panel-content"},a("div",{className:"entities"},i)))}});b.contextId="entities",b.icon="fa-bullseye",t.exports=b},{"./entity_types/definition":222,"./entity_types/person":224,"./entity_types/prison":225,"./entity_types/toponym":226,substance:110,"substance/helpers":109}],222:[function(e,t){var a=React.createElement,n=e("./entity_mixin"),i=React.createClass({displayName:"Definition",mixins:[n],handleEdit:function(e){e.stopPropagation()},render:function(){var e=["entity definition"];return this.props.active&&e.push("active"),a("div",{className:e.join(" "),onClick:this.handleToggle},a("div",{className:"type"},"Definition"),a("div",{className:"title"},this.props.title),a("div",{className:"description"},this.props.description),a("a",{className:"edit",target:"_blank",href:"./definitions/"+this.props.id,onClick:this.handleEdit},a("i",{className:"fa fa-pencil-square-o"})))}});t.exports=i},{"./entity_mixin":223}],223:[function(e,t){var a={handleToggle:function(e){console.log("handle toggle"),this.props.handleToggle(this.props.id),e.preventDefault()}};t.exports=a},{}],224:[function(e,t){var a=React.createElement,n=e("./entity_mixin"),i=React.createClass({displayName:"Person",mixins:[n],handleEdit:function(e){e.stopPropagation()},render:function(){var e=["entity person"];return this.props.active&&e.push("active"),a("div",{className:e.join(" "),onClick:this.handleToggle},a("div",{className:"type"},"Person"),a("div",{className:"name"},this.props.name),a("div",{className:"description"},this.props.description),a("a",{className:"edit",target:"_blank",href:"./persons/"+this.props.id,onClick:this.handleEdit},a("i",{className:"fa fa-pencil-square-o"})))}});t.exports=i},{"./entity_mixin":223}],225:[function(e,t){var a=React.createElement,n=e("./entity_mixin"),i=React.createClass({displayName:"Prison",mixins:[n],handleEdit:function(e){e.stopPropagation()},render:function(){var e=["entity prison"];return this.props.active&&e.push("active"),a("div",{className:e.join(" "),onClick:this.handleToggle},a("div",{className:"type"},"Prison"),a("div",{className:"name"},this.props.name),a("div",{className:"synonyms"},"Also known as: "+this.props.synonyms),a("div",{className:"country"},"Country: "+this.props.country),a("div",{className:"description"},this.props.description),a("a",{className:"edit",target:"_blank",href:"./prisons/"+this.props.id,onClick:this.handleEdit},a("i",{className:"fa fa-pencil-square-o"})))}});t.exports=i},{"./entity_mixin":223}],226:[function(e,t){var a=React.createElement,n=e("./entity_mixin"),i=React.createClass({displayName:"Toponym",mixins:[n],handleEdit:function(e){e.stopPropagation()},render:function(){var e=["entity toponym"];return this.props.active&&e.push("active"),a("div",{className:e.join(" "),onClick:this.handleToggle},a("div",{className:"type"},"Toponym"),a("div",{className:"name"},this.props.name),a("div",{className:"synonyms"},"Also known as: "+this.props.synonyms),a("div",{className:"country"},"Country: "+this.props.country),a("div",{className:"description"},this.props.description),a("a",{className:"edit",target:"_blank",href:"./toponyms/"+this.props.id,onClick:this.handleEdit},a("i",{className:"fa fa-pencil-square-o"})))}});t.exports=i},{"./entity_mixin":223}],227:[function(e,t){var a=e("./entities_panel"),n=e("./tag_entity_panel"),i=e("./tag_entity_tool"),c=e("./show_entity_reference_panel"),r=e("./state_handlers");t.exports={name:"entities",panels:[a,n,c],stateHandlers:r,tools:[i]}},{"./entities_panel":221,"./show_entity_reference_panel":228,"./state_handlers":229,"./tag_entity_panel":230,"./tag_entity_tool":231}],228:[function(e,t){var a=(e("substance"),React.createElement),n=e("./entity_types/prison"),i=e("./entity_types/toponym"),c=e("./entity_types/person"),r=e("./entity_types/definition"),s=(e("substance/helpers"),React.createClass({displayName:"Entity",contextTypes:{backend:React.PropTypes.object.isRequired},loadEntity:function(e){e=e||this.props;var t=e.writerCtrl.doc,a=this,n=t.get(e.entityReferenceId),i=this.context.backend;i.getEntities([n.target],function(e,t){a.setState({entity:t[0]})}.bind(this))},getInitialState:function(){return{entity:null}},componentDidMount:function(){this.loadEntity()},componentWillReceiveProps:function(e){this.loadEntity(e)},handleToggle:function(){},getEntityElement:function(e){if(e.handleToggle=this.handleToggle,e.active=!1,"prison"===e.type)return a(n,e);if("toponym"===e.type)return a(i,e);if("person"===e.type)return a(c,e);if("definition"===e.type)return a(r,e);throw new Error("No view component for "+e.type)},handleCancel:function(e){e.preventDefault(),this.props.writerCtrl.replaceState({contextId:"entities"})},handleEdit:function(e){e.preventDefault(),this.props.writerCtrl.replaceState({contextId:"tagentity",entityReferenceId:this.props.entityReferenceId})},handleDeleteReference:function(e){e.preventDefault();var t=this.props.writerCtrl,a=this.props.writerCtrl.doc,n=a.startTransaction();try{n.delete(this.props.entityReferenceId),n.save(),t.replaceState({contextId:"entities"})}finally{n.cleanup()}},render:function(){{var e;this.state,this.props}return e=this.state.entity?this.getEntityElement(this.state.entity):a("div",null,"loading..."),a("div",{className:"panel dialog show-entity-reference-panel-component"},a("div",{className:"dialog-header"},a("a",{href:"#",className:"back",onClick:this.handleCancel,dangerouslySetInnerHTML:{__html:'<i class="fa fa-chevron-left"></i>'}}),a("div",{className:"label"},"Related entity"),a("div",{className:"actions"},a("a",{href:"#",className:"edit-reference",onClick:this.handleEdit,dangerouslySetInnerHTML:{__html:'<i class="fa fa-pencil"></i> Edit'}}),a("a",{href:"#",className:"delete-reference",onClick:this.handleDeleteReference,dangerouslySetInnerHTML:{__html:'<i class="fa fa-trash"></i> Remove'}}))),a("div",{className:"panel-content"},a("div",{className:"entities"},e)))}}));s.contextId="showEntityReference",s.icon="fa-bullseye",s.isDialog=!0,t.exports=s},{"./entity_types/definition":222,"./entity_types/person":224,"./entity_types/prison":225,"./entity_types/toponym":226,substance:110,"substance/helpers":109}],229:[function(e,t){var a=e("./entities_panel"),n=e("./tag_entity_panel"),i=e("./show_entity_reference_panel"),c=React.createElement,r={handleContextPanelCreation:function(e){var t=e.getState();return"entities"===t.contextId?c(a,{writerCtrl:e,entityId:t.entityId}):"showEntityReference"===t.contextId?c(i,{writerCtrl:e,entityReferenceId:t.entityReferenceId}):"tagentity"===t.contextId?c(n,{writerCtrl:e,path:t.path,startOffset:t.startOffset,endOffset:t.endOffset,entityReferenceId:t.entityReferenceId,searchString:t.searchString}):void 0},handleSelectionChange:function(e,t,a){if(!t.isNull()&&t.isPropertySelection()&&t.isCollapsed()){var a=e.doc.annotationIndex.get(t.getPath(),t.getStartOffset(),t.getEndOffset(),"entity_reference"),n=e.getSurface();if("content"!==n.name)return!1;if(a.length>0){var c=a[0];return e.replaceState({contextId:i.contextId,entityReferenceId:c.id}),!0}}},getHighlightedNodes:function(e){var t=e.doc,a=e.getState();if("entities"===a.contextId&&a.entityId){var n=Object.keys(t.references.get(a.entityId));return n}return a.entityReferenceId?[a.entityReferenceId]:void 0}};t.exports=r},{"./entities_panel":221,"./show_entity_reference_panel":228,"./tag_entity_panel":230}],230:[function(e,t){var a=e("../archivist/select_entity_mixin"),n=e("substance/helpers"),i=n.extend({},a,{handleSelection:function(e){var t=this.props.writerCtrl,a=this.props.entityReferenceId;if(a){var n=t.doc.startTransaction();try{n.set([a,"target"],e),n.save({})}finally{n.cleanup()}t.replaceState({contextId:"showEntityReference",entityReferenceId:a})}else{var i=this.props.path,c=this.props.startOffset,r=this.props.endOffset,s=t.annotate({type:"entity_reference",target:e,path:i,startOffset:c,endOffset:r});t.replaceState({contextId:"showEntityReference",entityReferenceId:s.id})}}}),c=React.createClass({mixins:[i],displayName:"Tag Entity"});c.contextId="tagentity",c.icon="fa-bullseye",c.isDialog=!0,t.exports=c},{"../archivist/select_entity_mixin":218,"substance/helpers":109}],231:[function(e,t){"use strict";var a=(e("substance"),e("substance/helpers")),n=e("substance/writer").AnnotationToolMixin,i=a.extend({},n,{performAction:function(){var e=this.state.sel,t=this.props.writerCtrl,a=window.getSelection().toString();"create"===this.state.mode?t.replaceState({contextId:"tagentity",path:e.getPath(),startOffset:e.getStartOffset(),endOffset:e.getEndOffset(),searchString:a}):n.performAction.call(this)},disabledModes:["remove","fusion"]}),c=React.createClass({mixins:[i],displayName:"TagEntityTool",annotationType:"entity_reference",toolIcon:"fa-bullseye"});t.exports=c},{substance:110,"substance/helpers":109,"substance/writer":192}],232:[function(e,t){var a=e("substance/writer").CoreModule,n=e("./archivist"),i=e("./subjects"),c=e("./entities"),r=e("./metadata"),s=e("./timecodes"),b=e("./remarks");t.exports=[c,i,s,b,a,r,n]},{"./archivist":217,"./entities":227,"./metadata":233,"./remarks":237,"./subjects":243,"./timecodes":251,"substance/writer":192}],233:[function(e,t){var a=e("./metadata_panel"),n=e("./select_location_panel"),i=e("./state_handlers");t.exports={name:"metadata",panels:[a,n],stateHandlers:i,tools:[]}},{"./metadata_panel":234,"./select_location_panel":235,"./state_handlers":236}],234:[function(e,t){function a(e){return i("div",{className:"label",contentEditable:!1},e)}var n=e("substance"),i=React.createElement,c=n.Surface,r=e("substance/helpers"),s=e("substance/writer").TextProperty,b=React.createClass({displayName:"Info",contextTypes:{backend:React.PropTypes.object.isRequired},childContextTypes:{surface:React.PropTypes.object},getChildContext:function(){return{surface:this.surface}},getInitialState:function(){return this.surface=new c(new c.FormEditor(this.props.writerCtrl.doc)),null},componentDidMount:function(){this.props.writerCtrl.registerSurface(this.surface,"metadata",{enabledTools:["strong","emphasis"]}),this.surface.attach(this.getDOMNode());var e=this.props.writerCtrl.doc;e.connect(this,{"document:changed":this.handleDocumentChange}),this.loadMetadata()},handleDocumentChange:function(e){this.props.subjectReferenceId;(e.isAffected(["document","interviewee_prisons"])||e.isAffected(["document","interviewee_waypoints"])||e.isAffected(["document","project_location"])||e.isAffected(["document","record_type"]))&&this.loadMetadata()},handleWaypointDensityChange:function(e){var t=e.currentTarget.dataset.waypointId,a=e.currentTarget.value,n=this.props.writerCtrl.doc.startTransaction();try{n.set([t,"density"],a),n.save({})}finally{n.cleanup()}},componentWillUnmount:function(){this.props.writerCtrl.unregisterSurface(this.surface),this.surface.detach()},loadPrisons:function(e){var t=this.context.backend,a=this.props.writerCtrl.doc,n=a.get("document").interviewee_prisons;t.getEntities(n,e)},loadProjectLocation:function(e){var t=this.context.backend,a=this.props.writerCtrl.doc,n=a.get("document").project_location;n?t.getEntities([n],function(t,a){return t?e(t):void e(null,a[0])}):e(null,null)},loadWaypointLocations:function(e){var t=this.context.backend,a=this.props.writerCtrl.doc,n=a.get("document").getWaypoints(),i=r.pluck(n,"entityId");t.getEntities(i,function(t,a){if(t)return e(t);var n={};r.each(a,function(e){n[e.id]=e}),e(null,n)})},loadMetadata:function(){var e=this;console.log("loading/reloading external metadata and rerender"),this.loadPrisons(function(t,a){e.loadWaypointLocations(function(t,n){e.loadProjectLocation(function(t,i){e.setState({prisons:a,waypointLocations:n,projectLocation:i})})})})},renderTextProperty:function(e){return i(s,{doc:this.props.writerCtrl.doc,path:["document",e],writerCtrl:this.props.writerCtrl})},renderInterviewType:function(){var e=doc.get("document").record_type;return i("select",{contentEditable:!1,onChange:this.handleInterviewTypeState,defaultValue:e},i("option","video","Video"),i("option","audio","Audio"))},handleInterviewTypeState:function(e){var t=e.currentTarget.value,a=this.props.writerCtrl.doc.startTransaction();try{a.set(["document","record_type"],t),a.save({})}finally{a.cleanup()}},handleAddPrison:function(e){e.preventDefault(),this.props.writerCtrl.replaceState({contextId:"selectPrison"})},handleAddWaypoint:function(e){e.preventDefault(),this.props.writerCtrl.replaceState({contextId:"selectWaypoint"})},handleSetProjectLocation:function(e){e.preventDefault(),this.props.writerCtrl.replaceState({contextId:"selectProjectLocation"})},handleRemoveProjectLocation:function(e){e.preventDefault();var t=(this.props.writerCtrl.doc,this.props.writerCtrl.doc.startTransaction());try{t.set(["document","project_location"],null),t.save({})}finally{t.cleanup()}},handleRemoveWaypoint:function(e){var t=e.currentTarget.dataset.id;e.preventDefault();var a=this.props.writerCtrl.doc,n=this.props.writerCtrl.doc.startTransaction();try{n.delete(t);var i=a.get("document").interviewee_waypoints;i=r.without(i,t),n.set(["document","interviewee_waypoints"],i),n.save({})}finally{n.cleanup()}},handleRemovePrison:function(e){var t=e.currentTarget.dataset.id;e.preventDefault();var a=this.props.writerCtrl.doc,n=a.get("document").interviewee_prisons;n=r.without(n,t);var i=this.props.writerCtrl.doc.startTransaction();try{i.set(["document","interviewee_prisons"],n),i.save({})}finally{i.cleanup()}},renderProjectLocation:function(){var e=[a("Project Location")];if(this.state.projectLocation){var t=i("span",{className:"entity-tag",contentEditable:!1},i("span",{className:"project-location name"},this.state.projectLocation.name),i("a",{href:"#","data-id":this.state.projectLocation.id,className:"remove-tag remove-project-location",onClick:this.handleRemoveProjectLocation,dangerouslySetInnerHTML:{__html:'<i class="fa fa-remove"></i>'}}));e.push(t)}else e.push(i("a",{href:"#",className:"add-entity set-project-location",onClick:this.handleSetProjectLocation},"Set project Location"));return i("div",{contentEditable:!1,className:"project-location-wrapper"},e)},renderPrisons:function(){var e=this.state.prisons.map(function(e){return i("span",{className:"entity-tag prison"},i("span",{className:"name"},e.name),i("a",{href:"#","data-id":e.id,className:"remove-tag remove-prison",onClick:this.handleRemovePrison,dangerouslySetInnerHTML:{__html:'<i class="fa fa-remove"></i>'}}))}.bind(this));return i("div",{className:"prisons-wrapper",contentEditable:!1},a("Prisons"),i("div",{className:"entity-tags prisons"},e),i("a",{href:"#",className:"add-entity add-prison",onClick:this.handleAddPrison},"Add prison"))},renderWaypoints:function(){var e=this.props.writerCtrl.doc,t=e.get("document").getWaypoints(),n=t.map(function(e){return waypointLocation=this.state.waypointLocations[e.entityId],i("span",{className:"entity-tag waypoint"},i("span",{className:"name"},waypointLocation.name),i("input",{"data-waypoint-id":e.id,className:"density",min:1,max:5,type:"number",defaultValue:e.density,onChange:this.handleWaypointDensityChange}),i("a",{href:"#","data-id":e.id,className:"remove-tag remove-waypoint",onClick:this.handleRemoveWaypoint,dangerouslySetInnerHTML:{__html:'<i class="fa fa-remove"></i>'}}))}.bind(this));return i("div",{className:"waypoints-wrapper",contentEditable:!1},a("Waypoints"),i("div",{className:"entity-tags waypoints"},n),i("a",{href:"#",className:"add-entity add-waypoint",onClick:this.handleAddWaypoint},"Add waypoint"))},render:function(){this.props;return this.state?i("div",{className:"panel metadata-panel-component",contentEditable:!0,"data-id":"metadata"},i("div",{className:"panel-content"},i("div",{className:"abstracts section"},i("h3",{contentEditable:!1},"Summary"),a("Russian"),this.renderTextProperty("abstract"),a("English"),this.renderTextProperty("abstract_en")),i("div",{className:"biography section"},i("h3",{contentEditable:!1},"Biography"),a("Name"),this.renderTextProperty("title"),a("Biography"),this.renderTextProperty("interviewee_bio"),a("Category"),this.renderTextProperty("interviewee_category"),a("Forced labor"),this.renderTextProperty("interviewee_forced_labor_type"),this.renderPrisons(),this.renderWaypoints()),i("div",{className:"project section"},i("h3",{contentEditable:!1},"Project Details"),a("Project Name"),this.renderTextProperty("project_name"),this.renderProjectLocation(),a("Place"),this.renderTextProperty("interview_location"),a("Persons present"),this.renderTextProperty("persons_present"),a("Interview Type"),this.renderInterviewType(),a("Duration (in minutes)"),this.renderTextProperty("interview_duration"),a("Interview date"),this.renderTextProperty("interview_date"),a("Interviewer"),this.renderTextProperty("conductor"),a("Operator"),this.renderTextProperty("operator"),a("Sound Operator"),this.renderTextProperty("sound_operator"),a("Date of publication"),this.renderTextProperty("published_on")))):i("div",{contentEditable:!0,"data-id":"metadata"},"Loading")}});b.contextId="metadata",b.icon="fa-info",t.exports=b},{substance:110,"substance/helpers":109,"substance/writer":192}],235:[function(e,t){var a=e("../archivist/select_entity_mixin"),n=e("substance/helpers"),i=e("substance"),c=n.extend({},a,{handleSelection:function(e){var t=this.props.writerCtrl;if("selectPrison"===t.state.contextId){var a=doc.get("document").interviewee_prisons;a.push(e);var n=t.doc.startTransaction();try{n.set(["document","interviewee_prisons"],a),n.save({})}finally{n.cleanup()}}else if("selectWaypoint"===t.state.contextId){var c=doc.get("document").interviewee_waypoints,n=t.doc.startTransaction();try{var r=n.create({id:i.uuid("waypoint"),type:"waypoint",density:1,entityId:e});c.push(r.id),n.set(["document","interviewee_waypoints"],c),n.save({})}finally{n.cleanup()}}else if("selectProjectLocation"===t.state.contextId){var n=t.doc.startTransaction();try{n.set(["document","project_location"],e),n.save({})}finally{n.cleanup()}}t.replaceState({contextId:"metadata"})}}),r=React.createClass({mixins:[c],displayName:"Tag Entity"});r.contextId="selectPrison",r.icon="fa-bullseye",r.isDialog=!0,t.exports=r},{"../archivist/select_entity_mixin":218,substance:110,"substance/helpers":109}],236:[function(e,t){var a=e("./metadata_panel"),n=e("./select_location_panel"),i=React.createElement,c={handleContextPanelCreation:function(e){var t=e.getState();return"metadata"===t.contextId?i(a,{writerCtrl:e}):t.contextId?i(n,{writerCtrl:e}):void 0}};t.exports=c},{"./metadata_panel":234,"./select_location_panel":235}],237:[function(e,t){var a=e("./remarks_panel"),n=e("./remark_tool"),i=e("./state_handlers");t.exports={name:"subjects",panels:[a],stateHandlers:i,tools:[n]}},{"./remark_tool":239,"./remarks_panel":240,"./state_handlers":241}],238:[function(e,t){var a=React.createElement,n=e("substance/writer").TextProperty,i=React.createClass({displayName:"Remark",handleToggle:function(e){this.props.handleToggle(this.props.remark.id),e.preventDefault()},handleDelete:function(e){e.preventDefault();var t=this.props.writerCtrl,a=this.props.writerCtrl.doc,n=a.startTransaction();try{n.delete(this.props.remark.id),n.save(),t.replaceState({contextId:"remarks"})}finally{n.cleanup()}},render:function(){var e=["remark",this.props.type];return this.props.active&&e.push("active"),a("div",{className:e.join(" ")},a("div",{contentEditable:!1,className:"remark-header",onClick:this.handleToggle},a("a",{href:"#",className:"remark-title"},"TODO: display annotated text"),a("a",{href:"#",className:"delete-remark",dangerouslySetInnerHTML:{__html:'<i class="fa fa-remove"></i>'},onClick:this.handleDelete})),a(n,{tagName:"div",doc:this.props.writerCtrl.doc,path:[this.props.remark.id,"content"],writerCtrl:this.props.writerCtrl}))}});t.exports=i},{"substance/writer":192}],239:[function(e,t){"use strict";var a=(e("substance"),e("substance/helpers")),n=(React.createElement,e("substance/writer").AnnotationToolMixin),i=a.extend({},n,{getAnnotationData:function(){return{container:"content",content:""}},disabledModes:["remove","fusion"],afterCreate:function(e){this.props.writerCtrl.replaceState({contextId:"remarks",remarkId:e.id})}}),c=React.createClass({mixins:[i],displayName:"RemarkTool",annotationType:"remark",toolIcon:"fa-comment"});t.exports=c},{substance:110,"substance/helpers":109,"substance/writer":192}],240:[function(e,t){var a=React.createElement,n=e("substance"),i=n.Surface,c=e("./remark"),r=React.createClass({displayName:"Remarks",childContextTypes:{surface:React.PropTypes.object},getChildContext:function(){return{surface:this.surface}},componentWillMount:function(){return this.surface=new i(new i.FormEditor(this.props.writerCtrl.doc)),{}},componentDidMount:function(){this.props.writerCtrl.registerSurface(this.surface,"remarks",{enabledTools:["strong","emphasis"]}),this.surface.attach(this.getDOMNode())},componentWillUnmount:function(){this.props.writerCtrl.unregisterSurface(this.surface),this.surface.detach()},handleToggle:function(e){var t=this.props.writerCtrl;t.replaceState(t.state.remarkId===e?{contextId:"remarks"}:{contextId:"remarks",remarkId:e})
},render:function(){var e=(this.state,this.props),t=this,n=this.props.remarks.map(function(n){return a(c,{remark:n,key:n.id,handleToggle:t.handleToggle,active:n===e.activeRemark,writerCtrl:e.writerCtrl})});return a("div",{className:"panel remarks-panel-component",contentEditable:!0,"data-id":"remarks"},a("div",{className:"panel-content"},a("div",{className:"remarks"},n)))}});r.contextId="remarks",r.icon="fa-comment",t.exports=r},{"./remark":238,substance:110}],241:[function(e,t){var a=e("./remarks_panel"),n=React.createElement,i=(e("substance"),e("substance/helpers")),c={handleContextPanelCreation:function(e){var t=e.getState(),c=e.doc,r=i.map(c.remarksIndex.get(),function(e){return e});if(t.contextId===a.contextId){var s;return t.remarkId&&(s=c.get(t.remarkId)),n(a,{writerCtrl:e,remarks:r,activeRemark:s})}},handleSelectionChange:function(e,t){if(!t.isNull()&&t.isCollapsed()){var n=e.getSurface();if("content"!==n.name)return!1;var i=e.doc,c=n.getContainer(),r=i.getContainerAnnotationsForSelection(t,c,{type:"remark"}),s=r[0];return s?(e.replaceState({contextId:a.contextId,remarkId:s.id}),!0):void 0}},getHighlightedNodes:function(e){var t=(e.doc,e.getState());return"remarks"===t.contextId&&t.remarkId?[t.remarkId]:void 0},getActiveContainerAnnotations:function(e){var t=(e.getState(),e.doc),a=Object.keys(t.remarksIndex.get());return a}};t.exports=c},{"./remarks_panel":240,substance:110,"substance/helpers":109}],242:[function(e,t){var a=React.createElement,n=e("./subjects_model"),i=(e("substance/helpers"),e("./tree_component")),c=React.createClass({displayName:"Tag subjects",contextTypes:{backend:React.PropTypes.object.isRequired},handleCancel:function(e){e.preventDefault(),this.props.writerCtrl.replaceState({contextId:"subjects"})},loadSubjects:function(){var e=this.props.writerCtrl,t=this.context.backend;t.getSubjects(function(t,a){this.setState({subjects:new n(e.doc,a)})}.bind(this))},getInitialState:function(){return{subjects:null}},componentDidMount:function(){var e=this.props.writerCtrl.doc;e.connect(this,{"document:changed":this.handleDocumentChange}),this.loadSubjects()},handleDocumentChange:function(e,t){var a=this.props.subjectReferenceId;t.updateSubjectReference||e.isAffected([a,"target"])&&this.forceUpdate()},handleDeleteReference:function(){var e=this.props.writerCtrl,t=this.props.writerCtrl.doc,a=t.startTransaction();try{a.delete(this.props.subjectReferenceId),a.save(),e.replaceState({contextId:"subjects"})}finally{a.cleanup()}},componentWillUnmount:function(){this.props.writerCtrl.doc.disconnect(this)},updateSubjectReference:function(e){var t=Object.keys(e),a=this.props.writerCtrl.doc.startTransaction();try{a.set([this.props.subjectReferenceId,"target"],t),a.save({},{updateSubjectReference:!0})}finally{a.cleanup()}},render:function(){var e,t=this.props.writerCtrl.doc;return e=this.state.subjects?a(i,{ref:"treeWidget",selectedNodes:t.get(this.props.subjectReferenceId).target,tree:this.state.subjects.tree,onSelectionChanged:this.updateSubjectReference}):a("div",{className:"subjects-tree",ref:"subjectsTree"},"Loading subjects"),a("div",{className:"panel dialog edit-subject-reference-panel-component"},a("div",{className:"dialog-header"},a("a",{href:"#",className:"back",onClick:this.handleCancel,dangerouslySetInnerHTML:{__html:'<i class="fa fa-chevron-left"></i>'}}),a("div",{className:"label"},"Related subjects"),a("div",{className:"actions"},a("a",{href:"#",className:"delete-reference",onClick:this.handleDeleteReference,dangerouslySetInnerHTML:{__html:'<i class="fa fa-trash"></i> Remove'}}))),a("div",{className:"panel-content"},e))}});c.contextId="editSubjectReference",c.icon="fa-tag",c.isDialog=!0,t.exports=c},{"./subjects_model":246,"./tree_component":250,"substance/helpers":109}],243:[function(e,t){var a=e("./subjects_panel"),n=e("./edit_subject_reference_panel"),i=e("./tag_subject_tool"),c=e("./state_handlers");t.exports={name:"subjects",panels:[a,n],stateHandlers:c,tools:[i]}},{"./edit_subject_reference_panel":242,"./state_handlers":244,"./subjects_panel":247,"./tag_subject_tool":248}],244:[function(e,t){var a=e("./subjects_panel"),n=e("./edit_subject_reference_panel"),i=React.createElement,c=(e("substance/helpers"),{handleContextPanelCreation:function(e){var t=e.getState();return t.contextId===a.contextId?i(a,{writerCtrl:e,subjectId:t.subjectId}):t.contextId===n.contextId&&t.subjectReferenceId?i(n,{writerCtrl:e,subjectReferenceId:t.subjectReferenceId}):void 0},handleSelectionChange:function(e){var t=e.getState();return t.contextId===n.contextId?!0:void 0},getHighlightedNodes:function(e){var t=e.doc,a=e.getState();if("subjects"===a.contextId&&a.subjectId){var i=Object.keys(t.subjectReferencesIndex.get(a.subjectId));return i}return a.contextId===n.contextId&&a.subjectReferenceId?[a.subjectReferenceId]:void 0},getActiveContainerAnnotations:function(e){var t=e.getState();if(t.contextId===n.contextId&&t.subjectReferenceId)return[t.subjectReferenceId];if("subjects"===t.contextId&&t.subjectId){var a=e.doc,i=Object.keys(a.subjectReferencesIndex.get(t.subjectId));return i}}});t.exports=c},{"./edit_subject_reference_panel":242,"./subjects_panel":247,"substance/helpers":109}],245:[function(e,t){var a=React.createElement,n=React.createClass({displayName:"Subject",handleToggle:function(e){this.props.handleToggle(this.props.id),e.preventDefault()},render:function(){var e=["subject",this.props.type];return this.props.active&&e.push("active"),a("div",{className:e.join(" "),onClick:this.handleToggle},a("div",{className:"full-path"},this.props.fullPath.join(" > ")))}});t.exports=n},{}],246:[function(e,t){var a=e("./tree"),n=e("substance"),i=function(e,t){this.doc=e,this.subjects={},n.each(t,function(e){this.subjects[e.id]=e},this),this.tree=new a(this.subjects)};i.prototype.getTree=function(){function e(a){var i=[],c=t.getChildren(a);return 0===c.length?i:(n.each(c,function(t){var a={id:t.id,text:t.name,children:e(t.id)};i.push(a)}),i)}var t=this.tree;return e("root")},i.prototype.getAllReferencedSubjects=function(){var e=this.doc,t=e.subjectReferencesIndex.get(),a=[];return n.each(t,function(e){n.each(e.target,function(e){var t=this.tree.get(e);n.includes(a,t)||a.push(t)},this)},this),a},i.prototype.getFullPathForSubject=function(e){function t(e){var i=a.get(e),c=a.getParent(e);return c&&t(c.id),n.push(i.name),n}var a=this.tree,n=[];return t(e)},t.exports=i},{"./tree":249,substance:110}],247:[function(e,t){var a=React.createElement,n=(e("substance"),e("./subjects_model")),i=e("./subject"),c=React.createClass({displayName:"Subjects",contextTypes:{backend:React.PropTypes.object.isRequired},loadSubjects:function(){var e=this.props.writerCtrl,t=this.context.backend;console.log("loading subjects..."),t.getSubjects(function(t,a){this.setState({subjects:new n(e.doc,a)})}.bind(this))},getInitialState:function(){return{subjects:null}},componentDidMount:function(){this.state.subjects||this.loadSubjects()},handleToggle:function(e){var t=this.props.writerCtrl;t.replaceState(t.state.subjectId===e?{contextId:"subjects"}:{contextId:"subjects",subjectId:e})},render:function(){var e=this.state,t=this.props,n=this;if(!e.subjects)return a("div",null,"Loading subjects ...");var c=e.subjects.getAllReferencedSubjects(),r=c.map(function(c){return c.active=c.id===t.subjectId,c.key=c.id,c.handleToggle=n.handleToggle,c.fullPath=e.subjects.getFullPathForSubject(c.id),a(i,c)});return a("div",{className:"panel subjects-panel-component"},a("div",{className:"panel-content"},a("div",{className:"subjects"},r)))}});c.contextId="subjects",c.icon="fa-tag",t.exports=c},{"./subject":245,"./subjects_model":246,substance:110}],248:[function(e,t){"use strict";var a=(e("substance"),e("substance/helpers")),n=(React.createElement,e("substance/writer").AnnotationToolMixin),i=a.extend({},n,{getAnnotationData:function(){return{container:"content",target:[]}},canCreate:function(e,t){var a=this.props.writerCtrl;return"editSubjectReference"!==a.state.contextId&&!t.isCollapsed()},getActiveAnno:function(e){var t=this.props.writerCtrl;return a.filter(e,function(e){return e.id===t.state.subjectReferenceId})[0]},canExpand:function(e,t){var a=this.props.writerCtrl;if(0===e.length)return!1;if("editSubjectReference"!==a.state.contextId)return!1;var n=this.getActiveAnno(e);if(!n)return!1;var i=n.getSelection();return t.overlaps(i)&&!t.isCollapsed()},canFusion:function(){return!1},canRemove:function(){return!1},canTruncate:function(e,t){var a=this.props.writerCtrl;if(0===e.length)return!1;if("editSubjectReference"!==a.state.contextId)return!1;var n=this.getActiveAnno(e);if(!n)return!1;console.log("canTruncate#activeAnno",n);var i=n.getSelection(),c=(t.isLeftAlignedWith(i)||t.isRightAlignedWith(i))&&!t.equals(i);return console.log("canTruncate",c),c},handleTruncate:function(e){var t=this.getDocument(),a=e.sel,n=t.startTransaction({selection:a});try{var i=this.getActiveAnno(e.annos);if(!i)return!1;var c=i.getSelection(),r=c.truncate(a);i.updateRange(n,r),n.save({selection:a}),this.afterTruncate()}finally{n.cleanup()}},handleExpand:function(e){var t=this.getDocument(),a=e.sel,n=t.startTransaction({selection:a});try{var i=this.getActiveAnno(e.annos);if(!i)return!1;var c=i.getSelection(),r=c.expand(a);i.updateRange(n,r),n.save({selection:a}),this.afterExpand()}finally{n.cleanup()}},disabledModes:["remove","fusion"],afterCreate:function(e){this.props.writerCtrl.replaceState({contextId:"editSubjectReference",subjectReferenceId:e.id})}}),c=React.createClass({mixins:[i],displayName:"SubjectReferenceTool",annotationType:"subject_reference",toolIcon:"fa-tag"});t.exports=c},{substance:110,"substance/helpers":109,"substance/writer":192}],249:[function(e,t){var a=e("substance"),n=function(e){this.nodes=e,this.buildIndexes()};n.Prototype=function(){this.buildIndexes=function(){this.parentIndex={},a.each(this.nodes,function(e){var t=e.parent||"root";this.parentIndex[t]?this.parentIndex[t].push(e):this.parentIndex[t]=[e]},this)},this.get=function(e){return this.nodes[e]},this.getChildren=function(e){return this.parentIndex[e]||[]},this.getParent=function(e){var t=this.nodes[e];return this.nodes[t.parent]},this.walkTree=function(e,t){function n(e,t,c){"root"!==e&&t.call(c,e);i.getChildren(e.id);a.each(i.getChildren(e.id||e),function(e){n(e,t,c)})}var i=this;return t||(t=this),n("root",e,t)}},n.prototype=new n.Prototype,t.exports=n},{substance:110}],250:[function(e,t){var a=React.createElement,n=(e("./subjects_model"),e("substance/helpers")),i=React.createClass({displayName:"TreeNode",render:function(){var e=this.props.node,t=this.props.treeComp,c=t.props.tree,r=c.getChildren(e.id),s=[];this.props.node._expanded&&(s=r.map(function(e){return a(i,{treeComp:t,key:e.id,node:e,handleSelection:this.props.handleSelection,handleExpansion:this.props.handleExpansion})}.bind(this)),n.each(this.props.children,function(e){s(a(i,{node:e}))}));var b=e._expanded?"fa-caret-down":"fa-caret-right",o=e._selected?"fa-check-square-o":"fa-square-o",d=0===r.length;return a("div",{className:"tree-node"+(e._selected?" selected":"")+(e._expanded?" expanded":"")},a("a",{"data-id":e.id,className:"expand-toggle"+(d?" hidden":""),onClick:this.props.handleExpansion,href:"#",dangerouslySetInnerHTML:{__html:'<i class="fa '+b+'"></i>'}}),a("a",{href:"#","data-id":e.id,className:"select-toggle",onClick:this.props.handleSelection,dangerouslySetInnerHTML:{__html:'<i class="fa '+o+'"></i>'}}),a("a",{href:"#",className:"name","data-id":e.id,onClick:this.props.handleSelection},e.name),a("div",{className:"children"},s))}}),c=React.createClass({displayName:"Tree",componentWillMount:function(){this._prepare(this.props.selectedNodes)},componentWillReceiveProps:function(e){this._prepare(e.selectedNodes)},_prepare:function(e){function t(e){e&&(e._expanded=!0,t(a.get(e.parent)))}var a=this.props.tree;a.walkTree(function(e){delete e._selected,delete e._expanded});var i={};n.each(e,function(e){i[e]=!0}),a.walkTree(function(e){e._selected=i[e.id],e._selected&&t(a.get(e.parent))}),this.state={tree:a,selectedNodes:i}},getInitialState:function(){return{selectedNodes:null,tree:null}},handleExpansion:function(e){e.preventDefault();var t=e.currentTarget.dataset.id,a=this.state.tree,n=a.get(t),i=this.state.selectedNodes;n._expanded=n._expanded?!1:!0,this.setState({selectedNodes:i,tree:a})},handleSelection:function(e){e.preventDefault();var t=e.currentTarget.dataset.id,a=this.state.tree,n=a.get(t),i=this.state.selectedNodes;i[t]?(n._selected=!1,delete i[t]):(n._selected=!0,i[t]=!0),this.setState({selectedNodes:i,tree:a}),this.props.onSelectionChanged(i)},render:function(){var e=this.state.tree,t=e.getChildren("root"),n=t.map(function(e){return a(i,{treeComp:this,key:e.id,node:e,handleSelection:this.handleSelection,handleExpansion:this.handleExpansion})}.bind(this));return a("div",{className:"tree-component"},n)}});t.exports=c},{"./subjects_model":246,"substance/helpers":109}],251:[function(e,t){var a=e("./timecode_tool");t.exports={name:"timecodes",panels:[],tools:[a]}},{"./timecode_tool":252}],252:[function(e,t){var a=e("substance/writer").AnnotationToolMixin,n=React.createClass({mixins:[a],displayName:"TimecodeTool",annotationType:"timecode",toolIcon:"fa-clock-o"});t.exports=n},{"substance/writer":192}]},{},[1]);